"use strict";var gO=Object.defineProperty,mO=Object.defineProperties,yO=Object.getOwnPropertyDescriptors,PM=Object.getOwnPropertySymbols,_O=Object.prototype.hasOwnProperty,vO=Object.prototype.propertyIsEnumerable,kM=(Je,Ee,O)=>Ee in Je?gO(Je,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[Ee]=O,FM=(Je,Ee)=>{for(var O in Ee||(Ee={}))_O.call(Ee,O)&&kM(Je,O,Ee[O]);if(PM)for(var O of PM(Ee))vO.call(Ee,O)&&kM(Je,O,Ee[O]);return Je},LM=(Je,Ee)=>mO(Je,yO(Ee));(self.webpackChunkhackathon=self.webpackChunkhackathon||[]).push([[179],{2011:(Je,Ee,O)=>{O.d(Ee,{hO:()=>He,xv:()=>ce,Dh:()=>ie,GT:()=>fe,cc:()=>Me,on:()=>j,pX:()=>ne});var f=O(5e3),Q=O(127),P=O(5813);Je=O.hmd(Je);const oe=["ngOnDestroy"],ne=(Ce,Ge,Ke,Te={})=>new Proxy(Ce,{get:(ve,Ie)=>Ke.runOutsideAngular(()=>{var je;if(Ce[Ie])return(null===(je=null==Te?void 0:Te.spy)||void 0===je?void 0:je.get)&&Te.spy.get(Ie,Ce[Ie]),Ce[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const Be=Ge.toPromise().then(B=>{const _e=B&&B[Ie];return"function"==typeof _e?_e.bind(B):_e&&_e.then?_e.then(W=>Ke.run(()=>W)):Ke.run(()=>_e)});return new Proxy(()=>{},{get:(B,_e)=>Be[_e],apply:(B,_e,W)=>Be.then(re=>{var J;const me=re&&re(...W);return(null===(J=null==Te?void 0:Te.spy)||void 0===J?void 0:J.apply)&&Te.spy.apply(Ie,W,me),me})})})}),fe=(Ce,Ge)=>{Ge.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Te))})})};class ae{constructor(Ge){return Ge}}const ie=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function j(Ce,Ge,Ke){const ve="object"==typeof Ke&&Ke||{};ve.name=ve.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const je=Q.Z.apps.filter(Be=>Be&&Be.name===ve.name)[0]||Ge.runOutsideAngular(()=>Q.Z.initializeApp(Ce,ve));try{JSON.stringify(Ce)!==JSON.stringify(je.options)&&U("error",`${je.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ae(je)}const U=(Ce,...Ge)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)},X={provide:ae,useFactory:j,deps:[ie,f.R0b,[new f.FiY,ce]]};let He=(()=>{class Ce{constructor(Ke){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,Ke.toString())}static initializeApp(Ke,Te){return{ngModule:Ce,providers:[{provide:ie,useValue:Ke},{provide:ce,useValue:Te}]}}}return Ce.\u0275fac=function(Ke){return new(Ke||Ce)(f.LFG(f.Lbi))},Ce.\u0275mod=f.oAB({type:Ce}),Ce.\u0275inj=f.cJS({providers:[X]}),Ce})();function Me(Ce,Ge,Ke,Te,ve){const[,Ie,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ce)||[];if(Ie)return function Ne(Ce,Ge){try{return Ce.toString()===Ge.toString()}catch(Ke){return Ce===Ge}}(ve,je)||(de("error",`${Ge} was already initialized on the ${Ke} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ve,was:je})),Ie;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Be,ve]),Be}}const Ue=!!Je.hot,de=(Ce,...Ge)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,Ee,O)=>{O.d(Ee,{q4:()=>to,iC:()=>jo,HU:()=>Zc,vb:()=>Wc,JM:()=>bp});var f=O(5e3),Q=O(5867),P=O(5861),oe=O(9681),ne=O(2090),fe=O(4859),ae=O(1877),ie=O(8766);const ce="@firebase/installations",j="0.5.9",X=`w:${j}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function Te({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return je.apply(this,arguments)}function je(){return(je=(0,P.Z)(function*(D,C){const F=(yield C.json()).error;return Ge.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function B(D,{refreshToken:C}){const M=Be(D);return M.append("Authorization",function J(D){return`${He} ${D}`}(C)),M}function _e(D){return W.apply(this,arguments)}function W(){return(W=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function me(D,C){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:M}){const F=Te(D),Z=Be(D),te=C.getImmediate({optional:!0});if(te){const at=yield te.getHeartbeatsHeader();at&&Z.append("x-firebase-client",at)}const Le={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:He,appId:D.appId,sdkVersion:X})},Et=yield _e(()=>fetch(F,Le));if(Et.ok){const at=yield Et.json();return{fid:at.fid||M,registrationStatus:2,refreshToken:at.refreshToken,authToken:ve(at.authToken)}}throw yield Ie("Create Installation",Et)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const Lt=/^[cdef][\w-]{21}$/;function Ye(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Wt(D){return function st(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Lt.test(M)?M:""}catch(D){return""}}function En(D){return`${D.appName}!${D.appId}`}const Yt=new Map;function qt(D,C){const M=En(D);Mt(M,C),function Gi(D,C){const M=function sr(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=D=>{Mt(D.data.key,D.data.fid)}),Lr}();M&&M.postMessage({key:D,fid:C}),function wr(){0===Yt.size&&Lr&&(Lr.close(),Lr=null)}()}(M,C)}function Mt(D,C){const M=Yt.get(D);if(M)for(const F of M)F(C)}let Lr=null;const Vr="firebase-installations-store";let Di=null;function dt(){return Di||(Di=(0,ie.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Vr)}})),Di}function Ur(D,C){return pn.apply(this,arguments)}function pn(){return(pn=(0,P.Z)(function*(D,C){const M=En(D),Z=(yield dt()).transaction(Vr,"readwrite"),te=Z.objectStore(Vr),pe=yield te.get(M);return yield te.put(C,M),yield Z.done,(!pe||pe.fid!==C.fid)&&qt(D,C.fid),C})).apply(this,arguments)}function wn(D){return Us.apply(this,arguments)}function Us(){return(Us=(0,P.Z)(function*(D){const C=En(D),F=(yield dt()).transaction(Vr,"readwrite");yield F.objectStore(Vr).delete(C),yield F.done})).apply(this,arguments)}function Br(D,C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,P.Z)(function*(D,C){const M=En(D),Z=(yield dt()).transaction(Vr,"readwrite"),te=Z.objectStore(Vr),pe=yield te.get(M),Le=C(pe);return void 0===Le?yield te.delete(M):yield te.put(Le,M),yield Z.done,Le&&(!pe||pe.fid!==Le.fid)&&qt(D,Le.fid),Le})).apply(this,arguments)}function An(D){return ci.apply(this,arguments)}function ci(){return(ci=(0,P.Z)(function*(D){let C;const M=yield Br(D.appConfig,F=>{const Z=yo(F),te=Vt(D,Z);return C=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function yo(D){return Bs(D||{fid:Ye(),registrationStatus:0})}function Vt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ge.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(D,C){return gt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:or(D)}:{installationEntry:C}}function gt(){return(gt=(0,P.Z)(function*(D,C){try{const M=yield me(D,C);return Ur(D.appConfig,M)}catch(M){throw Ke(M)&&409===M.customData.serverCode?yield wn(D.appConfig):yield Ur(D.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function or(D){return jr.apply(this,arguments)}function jr(){return(jr=(0,P.Z)(function*(D){let C=yield Nt(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Nt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield An(D);return F||M}return C})).apply(this,arguments)}function Nt(D){return Br(D,C=>{if(!C)throw Ge.create("installation-not-found");return Bs(C)})}function Bs(D){return function ar(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ur(D,C){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},M){const F=H(D,M),Z=B(D,M),te=C.getImmediate({optional:!0});if(te){const at=yield te.getHeartbeatsHeader();at&&Z.append("x-firebase-client",at)}const Le={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:X,appId:D.appId}})},Et=yield _e(()=>fetch(F,Le));if(Et.ok)return ve(yield Et.json());throw yield Ie("Generate Auth Token",Et)})).apply(this,arguments)}function H(D,{fid:C}){return`${Te(D)}/${C}/authTokens:generate`}function G(D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(D,C=!1){let M;const F=yield Br(D.appConfig,te=>{if(!vt(te))throw Ge.create("not-registered");const pe=te.authToken;if(!C&&rn(pe))return te;if(1===pe.requestStatus)return M=$(D,C),te;{if(!navigator.onLine)throw Ge.create("app-offline");const Le=On(te);return M=Qe(D,Le),Le}});return M?yield M:F.authToken})).apply(this,arguments)}function $(D,C){return Y.apply(this,arguments)}function Y(){return(Y=(0,P.Z)(function*(D,C){let M=yield Re(D.appConfig);for(;1===M.authToken.requestStatus;)yield Oe(100),M=yield Re(D.appConfig);const F=M.authToken;return 0===F.requestStatus?G(D,C):F})).apply(this,arguments)}function Re(D){return Br(D,C=>{if(!vt(C))throw Ge.create("not-registered");return function Ir(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Qe(D,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(D,C){try{const M=yield ur(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield Ur(D.appConfig,F),M}catch(M){if(!Ke(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ur(D.appConfig,F)}else yield wn(D.appConfig);throw M}})).apply(this,arguments)}function vt(D){return void 0!==D&&2===D.registrationStatus}function rn(D){return 2===D.requestStatus&&!function yt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function On(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function ta(){return(ta=(0,P.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield An(C);return F?F.catch(console.error):G(C).catch(console.error),M.fid})).apply(this,arguments)}function na(){return(na=(0,P.Z)(function*(D,C=!1){const M=D;return yield Pn(M),(yield G(M,C)).token})).apply(this,arguments)}function Pn(D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,P.Z)(function*(D){const{registrationPromise:C}=yield An(D);C&&(yield C)})).apply(this,arguments)}function _o(D){return Ge.create("missing-app-config-values",{valueName:D})}const Mr="installations",it=D=>{const C=D.getProvider("app").getImmediate(),M=function Yn(D){if(!D||!D.options)throw _o("App Configuration");if(!D.name)throw _o("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw _o(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Zt=D=>{const C=D.getProvider("app").getImmediate(),M=(0,oe._getProvider)(C,Mr).getImmediate();return{getId:()=>function nu(D){return ta.apply(this,arguments)}(M),getToken:Z=>function ru(D){return na.apply(this,arguments)}(M,Z)}};(function xr(){(0,oe._registerComponent)(new fe.wA(Mr,it,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("installations-internal",Zt,"PRIVATE"))})(),(0,oe.registerVersion)(ce,j),(0,oe.registerVersion)(ce,j,"esm2017");const Ci="@firebase/remote-config",In=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pp{constructor(C,M,F,Z){this.client=C,this.storage=M,this.storageCache=F,this.logger=Z}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Z=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var M=this;return(0,P.Z)(function*(){const[F,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Z;C.eTag=Z&&Z.eTag;const te=yield M.client.fetch(C),pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&pe.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(pe),te})()}}function Tc(D=navigator){return D.languages&&D.languages[0]||D.language}class cr{constructor(C,M,F,Z,te,pe){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=Z,this.apiKey=te,this.appId=pe}fetch(C){var M=this;return(0,P.Z)(function*(){const[F,Z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Et={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:M.appId,language_code:Tc()},at={method:"POST",headers:Le,body:JSON.stringify(Et)},Pt=fetch(pe,at),_t=new Promise((Qr,Jr)=>{C.signal.addEventListener(()=>{const bu=new Error("The operation was aborted.");bu.name="AbortError",Jr(bu)})});let hr;try{yield Promise.race([Pt,_t]),hr=yield Pt}catch(Qr){let Jr="fetch-client-network";throw"AbortError"===Qr.name&&(Jr="fetch-timeout"),In.create(Jr,{originalErrorMessage:Qr.message})}let Gn=hr.status;const Ji=hr.headers.get("ETag")||void 0;let Pr,Yr;if(200===hr.status){let Qr;try{Qr=yield hr.json()}catch(Jr){throw In.create("fetch-client-parse",{originalErrorMessage:Jr.message})}Pr=Qr.entries,Yr=Qr.state}if("INSTANCE_STATE_UNSPECIFIED"===Yr?Gn=500:"NO_CHANGE"===Yr?Gn=304:("NO_TEMPLATE"===Yr||"EMPTY_CONFIG"===Yr)&&(Pr={}),304!==Gn&&200!==Gn)throw In.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:Ji,config:Pr}})()}}class gp{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,P.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var Z=this;return(0,P.Z)(function*(){yield function gs(D,C){return new Promise((M,F)=>{const Z=Math.max(C-Date.now(),0),te=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(te),F(In.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const te=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),te}catch(te){if(!function Ac(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(te))throw te;const pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(pe),Z.attemptFetch(C,pe)}})()}}class Sc{constructor(C,M,F,Z,te){this.app=C,this._client=M,this._storageCache=F,this._storage=Z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fl(D,C){const M=D.target.error||void 0;return In.create(C,{originalErrorMessage:M&&M.message})}const ms="app_namespace_store";class _p{constructor(C,M,F,Z=function yp(){return new Promise((D,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(fl(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ms,{keyPath:"compositeKey"})}}catch(M){C(In.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,te)=>{const Le=F.transaction([ms],"readonly").objectStore(ms),Et=M.createCompositeKey(C);try{const at=Le.get(Et);at.onerror=Pt=>{te(fl(Pt,"storage-get"))},at.onsuccess=Pt=>{const _t=Pt.target.result;Z(_t?_t.value:void 0)}}catch(at){te(In.create("storage-get",{originalErrorMessage:at&&at.message}))}})})()}set(C,M){var F=this;return(0,P.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((te,pe)=>{const Et=Z.transaction([ms],"readwrite").objectStore(ms),at=F.createCompositeKey(C);try{const Pt=Et.put({compositeKey:at,value:M});Pt.onerror=_t=>{pe(fl(_t,"storage-set"))},Pt.onsuccess=()=>{te()}}catch(Pt){pe(In.create("storage-set",{originalErrorMessage:Pt&&Pt.message}))}})})()}delete(C){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,te)=>{const Le=F.transaction([ms],"readwrite").objectStore(ms),Et=M.createCompositeKey(C);try{const at=Le.delete(Et);at.onerror=Pt=>{te(fl(Pt,"storage-delete"))},at.onsuccess=()=>{Z()}}catch(at){te(In.create("storage-delete",{originalErrorMessage:at&&at.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class xc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),te=yield M;te&&(C.lastFetchStatus=te);const pe=yield F;pe&&(C.lastSuccessfulFetchTimestampMillis=pe);const Le=yield Z;Le&&(C.activeConfig=Le)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function au(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}!function vo(){(0,oe._registerComponent)(new fe.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw In.create("registration-window");if(!(0,ne.hl)())throw In.create("indexed-db-unavailable");const{projectId:te,apiKey:pe,appId:Le}=F.options;if(!te)throw In.create("registration-project-id");if(!pe)throw In.create("registration-api-key");if(!Le)throw In.create("registration-app-id");const Et=new _p(Le,F.name,M=M||"firebase"),at=new xc(Et),Pt=new ae.Yd(Ci);Pt.logLevel=ae.in.ERROR;const _t=new cr(Z,oe.SDK_VERSION,M,te,pe,Le),hr=new gp(_t,Et),Gn=new pp(hr,Et,at,Pt),Ji=new Sc(F,Gn,at,Et,Pt);return function Qt(D){const C=(0,ne.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ji),Ji},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ci,"0.3.8"),(0,oe.registerVersion)(Ci,"0.3.8","esm2017")}();const Oc="/firebase-messaging-sw.js",dr="/firebase-cloud-messaging-push-scope",Hs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Eo="google.c.a.c_id",Pc="google.c.a.c_l",hh="google.c.a.ts",Nr="google.c.a.e";var wo=(()=>{return(D=wo||(wo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",wo;var D})();function Cr(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Z=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Z[te]=F.charCodeAt(te);return Z}const br="fcm_token_details_db",$r="fcm_token_object_Store";function pl(D){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(br))return null;let C=null;return(yield(0,ie.X3)(br,5,{upgrade:(F=(0,P.Z)(function*(Z,te,pe,Le){var Et;if(te<2||!Z.objectStoreNames.contains($r))return;const at=Le.objectStore($r),Pt=yield at.index("fcmSenderId").get(D);if(yield at.clear(),Pt)if(2===te){const _t=Pt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;C={token:_t.fcmToken,createTime:null!==(Et=_t.createTime)&&void 0!==Et?Et:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:Cr(_t.vapidKey)}}}else if(3===te){const _t=Pt;C={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Cr(_t.auth),p256dh:Cr(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Cr(_t.vapidKey)}}}else if(4===te){const _t=Pt;C={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Cr(_t.auth),p256dh:Cr(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Cr(_t.vapidKey)}}}}),function(te,pe,Le,Et){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(br),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),gl(C)?C:null;var F}),Fc.apply(this,arguments)}function gl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const xi="firebase-messaging-store";let fh=null;function Jt(){return fh||(fh=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(xi)}})),fh}function aa(D){return qs.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(D){const C=Qn(D),F=yield(yield Jt()).transaction(xi).objectStore(xi).get(C);if(F)return F;{const Z=yield pl(D.appConfig.senderId);if(Z)return yield zt(D,Z),Z}})).apply(this,arguments)}function zt(D,C){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(D,C){const M=Qn(D),Z=(yield Jt()).transaction(xi,"readwrite");return yield Z.objectStore(xi).put(C,M),yield Z.done,C})).apply(this,arguments)}function uu(D){return ys.apply(this,arguments)}function ys(){return(ys=(0,P.Z)(function*(D){const C=Qn(D),F=(yield Jt()).transaction(xi,"readwrite");yield F.objectStore(xi).delete(C),yield F.done})).apply(this,arguments)}function Qn({appConfig:D}){return D.appId}const un=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ri(D,C){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,P.Z)(function*(D,C){const M=yield Co(D),F=bo(C),Z={method:"POST",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Ni(D.appConfig),Z)).json()}catch(pe){throw un.create("token-subscribe-failed",{errorInfo:pe})}if(te.error)throw un.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw un.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function zs(D,C){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,P.Z)(function*(D,C){const M=yield Co(D),F=bo(C.subscriptionOptions),Z={method:"PATCH",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Ni(D.appConfig)}/${C.token}`,Z)).json()}catch(pe){throw un.create("token-update-failed",{errorInfo:pe})}if(te.error)throw un.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw un.create("token-update-no-token");return te.token})).apply(this,arguments)}function la(D,C){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(D,C){const F={method:"DELETE",headers:yield Co(D)};try{const te=yield(yield fetch(`${Ni(D.appConfig)}/${C}`,F)).json();if(te.error)throw un.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Z){throw un.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function Ni({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Co(D){return lt.apply(this,arguments)}function lt(){return(lt=(0,P.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function bo({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const Z={web:{endpoint:M,auth:C,p256dh:D}};return F!==Hs&&(Z.web.applicationPubKey=F),Z}const lu=6048e5;function ca(D){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.Z)(function*(D){const C=yield on(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Cr(C.getKey("auth")),p256dh:Cr(C.getKey("p256dh"))},F=yield aa(D.firebaseDependencies);if(F){if(Ws(F.subscriptionOptions,M))return Date.now()>=F.createTime+lu?El(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield la(D.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return Tt(D.firebaseDependencies,M)}return Tt(D.firebaseDependencies,M)})).apply(this,arguments)}function da(D){return vl.apply(this,arguments)}function vl(){return(vl=(0,P.Z)(function*(D){const C=yield aa(D.firebaseDependencies);C&&(yield la(D.firebaseDependencies,C.token),yield uu(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function El(D,C){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.Z)(function*(D,C){try{const M=yield zs(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield zt(D.firebaseDependencies,F),M}catch(M){throw yield da(D),M}})).apply(this,arguments)}function Tt(D,C){return cu.apply(this,arguments)}function cu(){return(cu=(0,P.Z)(function*(D,C){const F={token:yield Ri(D,C),createTime:Date.now(),subscriptionOptions:C};return yield zt(D,F),F.token})).apply(this,arguments)}function on(D,C){return To.apply(this,arguments)}function To(){return(To=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kc(C)})})).apply(this,arguments)}function Ws(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Hr(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function ha(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const Z=C.notification.image;Z&&(D.notification.image=Z)}(C,D),function wl(D,C){!C.data||(D.data=C.data)}(C,D),function vp(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const M=C.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function du(D){return"object"==typeof D&&!!D&&Eo in D}function fa(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function Dn(D){return un.create("missing-app-config-values",{valueName:D})}fa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zi{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function hu(D){if(!D||!D.options)throw Dn("App Configuration Object");if(!D.name)throw Dn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw Dn(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function pa(D){return _s.apply(this,arguments)}function _s(){return(_s=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Oc,{scope:dr}),D.swRegistration.update().catch(()=>{})}catch(C){throw un.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function fi(D,C){return Il.apply(this,arguments)}function Il(){return(Il=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield pa(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw un.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function fu(D,C){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Hs)})).apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(D,C){if(!navigator)throw un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw un.create("permission-blocked");return yield fu(D,null==C?void 0:C.vapidKey),yield fi(D,null==C?void 0:C.serviceWorkerRegistration),ca(D)})).apply(this,arguments)}function ma(D,C,M){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,P.Z)(function*(D,C,M){const F=ya(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Eo],message_name:M[Pc],message_time:M[hh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ya(D){switch(D){case wo.NOTIFICATION_CLICKED:return"notification_open";case wo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function bl(){return(bl=(0,P.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===wo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Hr(M)):D.onMessageHandler.next(Hr(M)));const F=M.data;du(F)&&"1"===F[Nr]&&(yield ma(D,M.messageType,F))})).apply(this,arguments)}const Ao="@firebase/messaging",Lc=D=>{const C=new Zi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ep(D,C){return bl.apply(this,arguments)}(C,M)),C},So=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function pu(D,C){return ga.apply(this,arguments)}(C,F)}};function Mo(){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vc(){(0,oe._registerComponent)(new fe.wA("messaging",Lc,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("messaging-internal",So,"PRIVATE")),(0,oe.registerVersion)(Ao,"0.9.13"),(0,oe.registerVersion)(Ao,"0.9.13","esm2017")}();const Uc="analytics",wp="firebase_id",Ki="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xo="https://www.googletagmanager.com/gtag/js",$n=new ae.Yd("@firebase/analytics");function mh(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function Zs(D,C){const M=document.createElement("script");M.src=`${xo}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function jc(D,C,M,F,Z,te){return mu.apply(this,arguments)}function mu(){return(mu=(0,P.Z)(function*(D,C,M,F,Z,te){const pe=F[Z];try{if(pe)yield C[pe];else{const Et=(yield mh(M)).find(at=>at.measurementId===Z);Et&&(yield C[Et.appId])}}catch(Le){$n.error(Le)}D("config",Z,te)})).apply(this,arguments)}function yu(D,C,M,F,Z){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*(D,C,M,F,Z){try{let te=[];if(Z&&Z.send_to){let pe=Z.send_to;Array.isArray(pe)||(pe=[pe]);const Le=yield mh(M);for(const Et of pe){const at=Le.find(_t=>_t.measurementId===Et),Pt=at&&C[at.appId];if(!Pt){te=[];break}te.push(Pt)}}0===te.length&&(te=Object.values(C)),yield Promise.all(te),D("event",F,Z||{})}catch(te){$n.error(te)}})).apply(this,arguments)}function mn(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(xo))return C;return null}const Xe=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tl=new class Mn{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Hc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ki(D){return Al.apply(this,arguments)}function Al(){return(Al=(0,P.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,Z={method:"GET",headers:Hc(F)},te=Ki.replace("{app-id}",M),pe=yield fetch(te,Z);if(200!==pe.status&&304!==pe.status){let Le="";try{const Et=yield pe.json();(null===(C=Et.error)||void 0===C?void 0:C.message)&&(Le=Et.error.message)}catch(Et){}throw Xe.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:Le})}return pe.json()})).apply(this,arguments)}function en(D){return wa.apply(this,arguments)}function wa(){return(wa=(0,P.Z)(function*(D,C=Tl,M){const{appId:F,apiKey:Z,measurementId:te}=D.options;if(!F)throw Xe.create("no-app-id");if(!Z){if(te)return{measurementId:te,appId:F};throw Xe.create("no-api-key")}const pe=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new qc;return setTimeout((0,P.Z)(function*(){Le.abort()}),void 0!==M?M:6e4),pi({appId:F,apiKey:Z,measurementId:te},pe,Le,C)})).apply(this,arguments)}function pi(D,C,M){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,Z=Tl){const{appId:te,measurementId:pe}=D;try{yield _u(F,C)}catch(Le){if(pe)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:te,measurementId:pe};throw Le}try{const Le=yield ki(D);return Z.deleteThrottleMetadata(te),Le}catch(Le){if(!Gc(Le)){if(Z.deleteThrottleMetadata(te),pe)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:te,measurementId:pe};throw Le}const Et=503===Number(Le.customData.httpStatus)?(0,ne.$s)(M,Z.intervalMillis,30):(0,ne.$s)(M,Z.intervalMillis),at={throttleEndTimeMillis:Date.now()+Et,backoffCount:M+1};return Z.setThrottleMetadata(te,at),$n.debug(`Calling attemptFetch again in ${Et} millis`),pi(D,at,F,Z)}})).apply(this,arguments)}function _u(D,C){return new Promise((M,F)=>{const Z=Math.max(C-Date.now(),0),te=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(te),F(Xe.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Gc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class qc{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Sl(){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)(function*(){if(!(0,ne.hl)())return $n.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(D){return $n.warn(Xe.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function No(){return(No=(0,P.Z)(function*(D,C,M,F,Z,te,pe){var Le;const Et=en(D);Et.then(Gn=>{M[Gn.measurementId]=Gn.appId,D.options.measurementId&&Gn.measurementId!==D.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>$n.error(Gn)),C.push(Et);const at=Sl().then(Gn=>{if(Gn)return F.getId()}),[Pt,_t]=yield Promise.all([Et,at]);mn()||Zs(te,Pt.measurementId),Z("js",new Date);const hr=null!==(Le=null==pe?void 0:pe.config)&&void 0!==Le?Le:{};return hr.origin="firebase",hr.update=!0,null!=_t&&(hr[wp]=_t),Z("config",Pt.measurementId,hr),Pt.measurementId})).apply(this,arguments)}class vs{constructor(C){this.app=C}_delete(){return delete Xn[this.app.options.appId],Promise.resolve()}}let Xn={},vu=[];const Es={};let Po,Ys,Oo="dataLayer",ko=!1;function Ia(D,C,M){!function Lo(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),M=Xe.create("invalid-analytics-context",{errorInfo:C});$n.warn(M.message)}}();const F=D.options.appId;if(!F)throw Xe.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Xe.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xn[F])throw Xe.create("already-exists",{id:F});if(!ko){!function gu(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Oo);const{wrappedGtag:te,gtagCore:pe}=function Ip(D,C,M,F,Z){let te=function(...pe){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(te=window[Z]),window[Z]=function $c(D,C,M,F){function te(){return(te=(0,P.Z)(function*(pe,Le,Et){try{"event"===pe?yield yu(D,C,M,Le,Et):"config"===pe?yield jc(D,C,M,F,Le,Et):D("set",Le)}catch(at){$n.error(at)}})).apply(this,arguments)}return function Z(pe,Le,Et){return te.apply(this,arguments)}}(te,D,C,M),{gtagCore:te,wrappedGtag:window[Z]}}(Xn,vu,Es,Oo,"gtag");Ys=te,Po=pe,ko=!0}return Xn[F]=function Ro(D,C,M,F,Z,te,pe){return No.apply(this,arguments)}(D,vu,Es,C,Po,Oo,M),new vs(D)}function er(){return(er=(0,P.Z)(function*(D,C,M,F,Z){if(Z&&Z.global)D("event",M,F);else{const te=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function wu(){return Da.apply(this,arguments)}function Da(){return(Da=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}const Or="@firebase/analytics";!function Ds(){(0,oe._registerComponent)(new fe.wA(Uc,(C,{options:M})=>Ia(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new fe.wA("analytics-internal",function D(C){try{const M=C.getProvider(Uc).getImmediate();return{logEvent:(F,Z,te)=>function Vo(D,C,M,F){D=(0,ne.m9)(D),function Is(D,C,M,F,Z){return er.apply(this,arguments)}(Ys,Xn[D.app.options.appId],C,M,F).catch(Z=>$n.error(Z))}(M,F,Z,te)}}catch(M){throw Xe.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(Or,"0.7.9"),(0,oe.registerVersion)(Or,"0.7.9","esm2017")}();var Xs=O(4408),ln=O(7565);const eo=new class Ml extends ln.v{}(class Iu extends Xs.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var xl=O(4986),Zr=O(8505),Kr=O(9468),Uo=O(5363);const to=new f.GfV("7.3.0"),no="__angularfire_symbol__analyticsIsSupportedValue",Bo="__angularfire_symbol__analyticsIsSupported",ro="__angularfire_symbol__remoteConfigIsSupportedValue",Qi="__angularfire_symbol__remoteConfigIsSupported",Ca="__angularfire_symbol__messagingIsSupportedValue",bt="__angularfire_symbol__messagingIsSupported";function bp(D,C,M){if(C){if(1===C.length)return C[0];const te=C.filter(pe=>pe.app===M);if(1===te.length)return te[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[Bo]||(globalThis[Bo]=wu().then(D=>globalThis[no]=D).catch(()=>globalThis[no]=!1)),globalThis[bt]||(globalThis[bt]=Mo().then(D=>globalThis[Ca]=D).catch(()=>globalThis[Ca]=!1)),globalThis[Qi]||(globalThis[Qi]=au().then(D=>globalThis[ro]=D).catch(()=>globalThis[ro]=!1));const Wc=(D,C)=>{const M=C?[C]:(0,Q.C6)(),F=[];return M.forEach(Z=>{Z.container.getProvider(D).instances.forEach(pe=>{F.includes(pe)||F.push(pe)})}),F};function bs(){}class gi{constructor(C,M=eo){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const Z=this.zone;return this.delegate.schedule(function(pe){Z.runGuarded(()=>{C.apply(this,[pe])})},M,F)}}class Cu{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),M.pipe((0,Zr.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zc=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new gi(Zone.current)),this.insideAngular=M.run(()=>new gi(Zone.current,xl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Vi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function jo(D){return Vi(),function $o(D){return function(M){return(M=M.lift(new Cu(D.ngZone))).pipe((0,Kr.R)(D.outsideAngular),(0,Uo.Q)(D.insideAngular))}}(Vi())(D)}},2090:(Je,Ee,O)=>{O.d(Ee,{BH:()=>He,LL:()=>se,ZR:()=>me,zI:()=>W,US:()=>fe,tV:()=>ce,L:()=>ie,$s:()=>Nt,r3:()=>Er,Sg:()=>Me,ne:()=>Di,vZ:()=>Lr,ZB:()=>U,pd:()=>cs,m9:()=>ur,z$:()=>Ne,jU:()=>Ce,ru:()=>Ge,d:()=>Te,xb:()=>Mt,w1:()=>ve,hl:()=>B,uI:()=>Ue,UG:()=>de,b$:()=>Ke,G6:()=>Be,Mn:()=>Ie,xO:()=>wr,zd:()=>Ii,eu:()=>_e});const oe=function(L){const H=[];let G=0;for(let De=0;De<L.length;De++){let $=L.charCodeAt(De);$<128?H[G++]=$:$<2048?(H[G++]=$>>6|192,H[G++]=63&$|128):55296==(64512&$)&&De+1<L.length&&56320==(64512&L.charCodeAt(De+1))?($=65536+((1023&$)<<10)+(1023&L.charCodeAt(++De)),H[G++]=$>>18|240,H[G++]=$>>12&63|128,H[G++]=$>>6&63|128,H[G++]=63&$|128):(H[G++]=$>>12|224,H[G++]=$>>6&63|128,H[G++]=63&$|128)}return H},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,H){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let $=0;$<L.length;$+=3){const Y=L[$],Re=$+1<L.length,Qe=Re?L[$+1]:0,ut=$+2<L.length,vt=ut?L[$+2]:0;let On=(15&Qe)<<2|vt>>6,Ir=63&vt;ut||(Ir=64,Re||(On=64)),De.push(G[Y>>2],G[(3&Y)<<4|Qe>>4],G[On],G[Ir])}return De.join("")},encodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(L):this.encodeByteArray(oe(L),H)},decodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(L):function(L){const H=[];let G=0,De=0;for(;G<L.length;){const $=L[G++];if($<128)H[De++]=String.fromCharCode($);else if($>191&&$<224){const Y=L[G++];H[De++]=String.fromCharCode((31&$)<<6|63&Y)}else if($>239&&$<365){const ut=((7&$)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;H[De++]=String.fromCharCode(55296+(ut>>10)),H[De++]=String.fromCharCode(56320+(1023&ut))}else{const Y=L[G++],Re=L[G++];H[De++]=String.fromCharCode((15&$)<<12|(63&Y)<<6|63&Re)}}return H.join("")}(this.decodeStringToByteArray(L,H))},decodeStringToByteArray(L,H){this.init_();const G=H?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let $=0;$<L.length;){const Y=G[L.charAt($++)],Qe=$<L.length?G[L.charAt($)]:0;++$;const vt=$<L.length?G[L.charAt($)]:64;++$;const yt=$<L.length?G[L.charAt($)]:64;if(++$,null==Y||null==Qe||null==vt||null==yt)throw Error();De.push(Y<<2|Qe>>4),64!==vt&&(De.push(Qe<<4&240|vt>>2),64!==yt&&De.push(vt<<6&192|yt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ie=function(L){return function(L){const H=oe(L);return fe.encodeByteArray(H,!0)}(L).replace(/\./g,"")},ce=function(L){try{return fe.decodeString(L,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function U(L,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return H}for(const G in H)!H.hasOwnProperty(G)||!X(G)||(L[G]=U(L[G],H[G]));return L}function X(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,G)=>{this.resolve=H,this.reject=G})}wrapCallback(H){return(G,De)=>{G?this.reject(G):this.resolve(De),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(G):H(G,De))}}}function Me(L,H){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=H||"demo-project",$=L.iat||0,Y=L.sub||L.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:$,exp:$+3600,auth_time:$,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(Re)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Ne().indexOf("Electron/")>=0}function ve(){const L=Ne();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ie(){return Ne().indexOf("MSAppHost/")>=0}function Be(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function _e(){return new Promise((L,H)=>{try{let G=!0;const De="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(De);$.onsuccess=()=>{$.result.close(),G||self.indexedDB.deleteDatabase(De),L(!0)},$.onupgradeneeded=()=>{G=!1},$.onerror=()=>{var Y;H((null===(Y=$.error)||void 0===Y?void 0:Y.message)||"")}}catch(G){H(G)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(H,G,De){super(G),this.code=H,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(H,G,De){this.service=H,this.serviceName=G,this.errors=De}create(H,...G){const De=G[0]||{},$=`${this.service}/${H}`,Y=this.errors[H],Re=Y?function Oe(L,H){return L.replace(st,(G,De)=>{const $=H[De];return null!=$?String($):`<${De}?>`})}(Y,De):"Error";return new me($,`${this.serviceName}: ${Re} (${$}).`,De)}}const st=/\{\$([^}]+)}/g;function Er(L,H){return Object.prototype.hasOwnProperty.call(L,H)}function Mt(L){for(const H in L)if(Object.prototype.hasOwnProperty.call(L,H))return!1;return!0}function Lr(L,H){if(L===H)return!0;const G=Object.keys(L),De=Object.keys(H);for(const $ of G){if(!De.includes($))return!1;const Y=L[$],Re=H[$];if(sr(Y)&&sr(Re)){if(!Lr(Y,Re))return!1}else if(Y!==Re)return!1}for(const $ of De)if(!G.includes($))return!1;return!0}function sr(L){return null!==L&&"object"==typeof L}function wr(L){const H=[];for(const[G,De]of Object.entries(L))Array.isArray(De)?De.forEach($=>{H.push(encodeURIComponent(G)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(G)+"="+encodeURIComponent(De));return H.length?"&"+H.join("&"):""}function Ii(L){const H={};return L.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[$,Y]=De.split("=");H[decodeURIComponent($)]=decodeURIComponent(Y)}}),H}function cs(L){const H=L.indexOf("?");if(!H)return"";const G=L.indexOf("#",H);return L.substring(H,G>0?G:void 0)}function Di(L,H){const G=new dt(L,H);return G.subscribe.bind(G)}class dt{constructor(H,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{H(this)}).catch(De=>{this.error(De)})}next(H){this.forEachObserver(G=>{G.next(H)})}error(H){this.forEachObserver(G=>{G.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,G,De){let $;if(void 0===H&&void 0===G&&void 0===De)throw new Error("Missing Observer.");$=function pn(L,H){if("object"!=typeof L||null===L)return!1;for(const G of H)if(G in L&&"function"==typeof L[G])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:G,complete:De},void 0===$.next&&($.next=wn),void 0===$.error&&($.error=wn),void 0===$.complete&&($.complete=wn);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Re){}}),this.observers.push($),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,H)}sendOne(H,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{G(this.observers[H])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}function Nt(L,H=1e3,G=2){const De=H*Math.pow(G,L),$=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+$)}function ur(L){return L&&L._delegate?L._delegate:L}},3485:(Je,Ee,O)=>{var f=O(5e3);let Q=null;function P(){return Q}const ae=new f.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(U)}()},providedIn:"platform"}),n})();const j=new f.OlP("Location Initialized");let U=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return new U((0,f.LFG)(ae))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,f.LFG)(ae).location;return new Ke((0,f.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new f.OlP("appBaseHref");let Ke=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ue(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ue(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie),f.LFG(Ge,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ue(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ue(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie),f.LFG(Ge,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(){return new ve((0,f.LFG)(de),(0,f.LFG)(ie))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class fs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new fs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),$s(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{$s(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function $s(n,e){n.context.$implicit=e.item}class gs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ac{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const gp=new Ac,zi=new gs;let hl=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return gp;if((0,f.F4k)(t))return zi;throw function cr(n,e){return new f.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})(),Rc=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=f.Yjl({name:"json",type:n,pure:!1}),n})(),Nr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Io(n){return"server"===n}let gl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Do((0,f.LFG)(ae),window)}),n})();class Do{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ml(this.window.history)||ml(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ml(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qs extends class aa extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Q||(Q=n)}(new qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ua(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function ys(n){uu=uu||document.createElement("a"),uu.setAttribute("href",n);const e=uu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let uu,zt=null;const Qn=new f.OlP("TRANSITION_ID"),un=[{provide:f.ip1,useFactory:function yl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Qn,ae,f.zs3],multi:!0}];class Ri{static init(){(0,f.VLi)(new Ri)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Jn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=new f.OlP("EventManagerPlugins");let Wi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class la{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ni=(()=>{class n extends hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Co),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Co))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Co(n){P().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ae(n,o,t):(o=o.replace(bo,n),t.push(o))}return t}function Tt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let on=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ha(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new wl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wi),f.LFG(Ni),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tt(r)):this.eventManager.addEventListener(e,t,Tt(r))}}class ha extends To{constructor(e,t,r,o){super(e),this.component=r;const u=Ae(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function vl(n){return"_ngcontent-%COMP%".replace(bo,n)}(o+"-"+r.id),this.hostAttr=function El(n){return"_nghost-%COMP%".replace(bo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wl extends To{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vp=(()=>{class n extends la{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const du=["alt","control","meta","shift"],hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Zi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pa=(()=>{class n extends la{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(du.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function _s(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Dn.hasOwnProperty(e)&&(e=Dn[e]))}return hu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),du.forEach(u=>{u!=o&&Zi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function fi(){qs.makeCurrent(),Ri.init()},multi:!0},{provide:ae,useFactory:function fu(){return(0,f.RDi)(document),document},deps:[]}]),ga=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Il(){return new f.qLn},deps:[]},{provide:zs,useClass:vp,multi:!0,deps:[ae,f.R0b,f.Lbi]},{provide:zs,useClass:pa,multi:!0,deps:[ae]},{provide:on,useClass:on,deps:[Wi,Ni,f.AFp]},{provide:f.FYo,useExisting:on},{provide:hi,useExisting:Ni},{provide:Ni,useClass:Ni,deps:[ae]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Wi,useClass:Wi,deps:[zs,f.R0b]},{provide:class Jt{},useClass:Jn,deps:[]}];let ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Qn,useExisting:f.AFp},un]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:ga,imports:[Nr,f.hGG]}),n})();"undefined"!=typeof window&&window;var mn=O(8996),Ea=O(7669);function Xe(...n){const e=(0,Ea.yG)(n);return(0,mn.D)(n,e)}var Gr=O(7579);class qr extends Gr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Mn=O(8306);const{isArray:Tl}=Array,{getPrototypeOf:Hc,prototype:ki,keys:Al}=Object;function en(n){if(1===n.length){const e=n[0];if(Tl(e))return{args:e,keys:null};if(function wa(n){return n&&"object"==typeof n&&Hc(n)===ki}(e)){const t=Al(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pi=O(4671),Ct=O(4004);const{isArray:_u}=Array;function qc(n){return(0,Ct.U)(e=>function Gc(n,e){return _u(e)?n(...e):n(e)}(n,e))}function Sl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Cn=O(5403),Ro=O(9672);function Xn(n,e,t){n?(0,Ro.f)(t,n,e):e()}var vu=O(576);function Es(n,e){const t=(0,vu.m)(n)?n:()=>n,r=o=>o.error(t());return new Mn.y(e?o=>e.schedule(r,0,o):r)}const ws=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Po=O(8189);function ko(...n){return function Ys(){return(0,Po.J)(1)}()((0,mn.D)(n,(0,Ea.yG)(n)))}var Fo=O(8421);function Lo(n){return new Mn.y(e=>{(0,Fo.Xf)(n()).subscribe(e)})}var Ia=O(515),Is=O(727),er=O(4482);function Qs(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Eu extends Mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Is.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Is.w0.EMPTY)}return e}refCount(){return Qs()(this)}}function bn(n,e){return(0,er.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Cn.x)(r,w=>{null==o||o.unsubscribe();let b=0;const x=u++;(0,Fo.Xf)(n(w,x)).subscribe(o=(0,Cn.x)(r,N=>r.next(e?e(w,N,x,b++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Js=O(5698);function Fi(...n){const e=(0,Ea.yG)(n);return(0,er.e)((t,r)=>{(e?ko(n,t,e):ko(n,t)).subscribe(r)})}function Yi(n,e,t,r,o){return(u,d)=>{let m=t,w=e,b=0;u.subscribe((0,Cn.x)(d,x=>{const N=b++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Li(n,e){return(0,er.e)(Yi(n,e,arguments.length>=2,!0))}function zr(n,e){return(0,er.e)((t,r)=>{let o=0;t.subscribe((0,Cn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Wr(n){return(0,er.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,d=>{u=(0,Fo.Xf)(n(d,Wr(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var yn=O(5577);function wu(n,e){return(0,vu.m)(e)?(0,yn.z)(n,e,1):(0,yn.z)(n,1)}function Da(n){return n<=0?()=>Ia.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function an(n=Dp){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Dp(){return new ws}function Cp(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Vo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((o,u)=>n(o,u,r)):pi.y,(0,Js.q)(1),t?Cp(e):an(()=>new ws))}var Or=O(8505);class Ds{constructor(e,t){this.id=e,this.url=t}}class Xs extends Ds{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iu extends Ds{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ln extends Ds{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ml extends Ds{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eo extends Ds{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ty extends Ds{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xl extends Ds{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zr extends Ds{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kr extends Ds{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class to{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class no{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const bt="primary";class Du{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hn(n){return new Du(n)}const ba="ngNavigationCancelingError";function Cs(n){const e=Error("NavigationCancelingError: "+n);return e[ba]=!0,e}function Wc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Cu(n[o],e[o]))return!1;return!0}function Cu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Zc(n){return Array.prototype.concat.apply([],n)}function Vi(n){return n.length>0?n[n.length-1]:null}function tn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function tr(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,mn.D)(Promise.resolve(n)):Xe(n)}const jo={exact:function D(n,e,t){if(!at(n.segments,e.segments)||!Z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:M},$o={exact:function Kc(n,e){return gi(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cu(n[t],e[t]))},ignored:()=>!0};function io(n,e,t){return jo[t.paths](n.root,e.root,t.matrixParams)&&$o[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!at(o,t)||e.hasChildren()||!Z(o,t,r))}if(n.segments.length===t.length){if(!at(n.segments,t)||!Z(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!M(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(at(n.segments,o)&&Z(n.segments,o,r)&&n.children[bt])&&F(n.children[bt],e,u,r)}}function Z(n,e,t){return e.every((r,o)=>$o[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return Gn.serialize(this)}}class pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,tn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ji(this)}}class Le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Au(this)}}function at(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class _t{}class hr{parse(e){const t=new iy(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pr(e.root,!0)}`,r=function Ap(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Qr(t)}=${Qr(o)}`).join("&"):`${Qr(t)}=${Qr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Jr(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gn=new hr;function Ji(n){return n.segments.map(e=>Au(e)).join("/")}function Pr(n,e){if(!n.hasChildren())return Ji(n);if(e){const t=n.children[bt]?Pr(n.children[bt],!1):"",r=[];return tn(n.children,(o,u)=>{u!==bt&&r.push(`${u}:${Pr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Pt(n,e){let t=[];return tn(n.children,(r,o)=>{o===bt&&(t=t.concat(e(r,o)))}),tn(n.children,(r,o)=>{o!==bt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===bt?[Pr(n.children[bt],!1)]:[`${o}:${Pr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${Ji(n)}/${t[0]}`:`${Ji(n)}/(${t.join("//")})`}}function Yr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(n){return Yr(n).replace(/%3B/gi,";")}function bu(n){return Yr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tu(n){return decodeURIComponent(n)}function Nl(n){return Tu(n.replace(/\+/g,"%20"))}function Au(n){return`${bu(n.path)}${function Tp(n){return Object.keys(n).map(e=>`;${bu(e)}=${bu(n[e])}`).join("")}(n.parameters)}`}const yh=/^[^\/()?;=#]+/;function so(n){const e=n.match(yh);return e?e[0]:""}const Ol=/^[^=?&#]+/,Sp=/^[^&#]+/;class iy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new pe(e,t)),r}parseSegment(){const e=so(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Le(Tu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=so(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=so(this.remaining);o&&(r=o,this.capture(r))}e[Tu(t)]=Tu(r)}parseQueryParam(e){const t=function ry(n){const e=n.match(Ol);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Mp(n){const e=n.match(Sp);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Nl(t),u=Nl(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=so(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=bt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[bt]:new pe([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class xp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_h(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_h(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Su(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Su(e,this._root).map(t=>t.value)}}function _h(n,e){if(n===e.value)return e;for(const t of e.children){const r=_h(n,t);if(r)return r}return null}function Su(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Su(n,t);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ao(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yc extends xp{constructor(e,t){super(e),this.snapshot=t,Jc(this,e)}toString(){return this.snapshot.toString()}}function Ta(n,e){const t=function sy(n,e){const d=new Ho([],{},{},"",{},bt,e,null,n.root,-1,{});return new vh("",new oo(d,[]))}(n,e),r=new qr([new Le("",{})]),o=new qr({}),u=new qr({}),d=new qr({}),m=new qr(""),w=new Mu(r,o,d,m,u,bt,e,t.root);return w.snapshot=t.root,new Yc(new oo(w,[]),t)}class Mu{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>Hn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>Hn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Qc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ho{constructor(e,t,r,o,u,d,m,w,b,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vh extends xp{constructor(e,t){super(t),this.url=e,Jc(this,t)}toString(){return Eh(this._root)}}function Jc(n,e){e.value._routerState=n,e.children.forEach(t=>Jc(n,t))}function Eh(n){const e=n.children.length>0?` { ${n.children.map(Eh).join(", ")} } `:"";return`${n.value}${e}`}function Xc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gi(e.params,t.params)||n.params.next(t.params),function bs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function wh(n,e){const t=gi(n.params,e.params)&&function Et(n,e){return at(n,e)&&n.every((t,r)=>gi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wh(n.parent,e.parent))}function Pl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function ay(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pl(n,r,o);return Pl(n,r)})}(n,e,t);return new oo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Pl(n,m)),d}}const r=function uy(n){return new Mu(new qr(n.url),new qr(n.params),new qr(n.queryParams),new qr(n.fragment),new qr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Pl(n,u));return new oo(r,o)}}function Ts(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function kl(n){return"object"==typeof n&&null!=n&&n.outlets}function ed(n,e,t,r,o){let u={};if(r&&tn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new te(t,u,o);const d=ly(n,e,t);return new te(d,u,o)}function ly(n,e,t){const r={};return tn(n.children,(o,u)=>{r[u]=o===e?t:ly(o,e,t)}),new pe(n.segments,r)}class Np{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ts(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(kl);if(o&&o!==Vi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class td{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fp(n,e,t){if(n||(n=new pe([],{})),0===n.segments.length&&n.hasChildren())return nd(n,e,t);const r=function x0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(kl(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Xi(w,b,d))return u;r+=2}else{if(!Xi(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new pe(n.segments.slice(0,r.pathIndex),{});return u.children[bt]=new pe(n.segments.slice(r.pathIndex),n.children),nd(u,0,o)}return r.match&&0===o.length?new pe(n.segments,{}):r.match&&!n.hasChildren()?Lp(n,e,t):r.match?nd(n,0,o):Lp(n,e,t)}function nd(n,e,t){if(0===t.length)return new pe(n.segments,{});{const r=function kp(n){return kl(n[0])?n[0].outlets:{[bt]:n}}(t),o={};return tn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Fp(n.children[d],e,u))}),tn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new pe(n.segments,o)}}function Lp(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(kl(u)){const w=As(u.outlets);return new pe(r,w)}if(0===o&&Ts(t[0])){r.push(new Le(n.segments[e].path,Ih(t[0]))),o++;continue}const d=kl(u)?u.outlets[bt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ts(m)?(r.push(new Le(d,Ih(m))),o+=2):(r.push(new Le(d,{})),o++)}return new pe(r,{})}function As(n){const e={};return tn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Lp(new pe([],{}),0,t))}),e}function Ih(n){const e={};return tn(n,(t,r)=>e[r]=`${t}`),e}function Xi(n,e,t){return n==t.path&&gi(e,t.parameters)}class Vp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ao(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),tn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ao(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ao(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ao(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Qi(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Bo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Xc(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Xc(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function rd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class id{constructor(e,t){this.routes=e,this.module=t}}function Sa(n){return"function"==typeof n}function xu(n){return n instanceof te}const sd=Symbol("INITIAL_VALUE");function Ru(){return bn(n=>function No(...n){const e=(0,Ea.yG)(n),t=(0,Ea.jO)(n),{args:r,keys:o}=en(n);if(0===r.length)return(0,mn.D)([],e);const u=new Mn.y(function vs(n,e,t=pi.y){return r=>{Xn(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Xn(e,()=>{const b=(0,mn.D)(n[w],e);let x=!1;b.subscribe((0,Cn.x)(r,N=>{u[w]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Sl(o,d):pi.y));return t?u.pipe(qc(t)):u}(n.map(e=>e.pipe((0,Js.q)(1),Fi(sd)))).pipe(Li((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==sd?o:(u===sd&&(r=!0),r||!1!==u&&d!==t.length-1&&!xu(u)?o:u),e)},sd),zr(e=>e!==sd),(0,Ct.U)(e=>xu(e)?e:!0===e),(0,Js.q)(1)))}class cy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nu,this.attachRef=null}}class Nu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new cy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ll=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new dy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Nu),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class dy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mu?this.route:e===Nu?this.childContexts:this.parent.get(e,t)}}let bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Ll],encapsulation:2}),n})();function Ma(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Th(r,Ah(e,r))}}function Th(n,e){n.children&&Ma(n.children,e)}function Ah(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Sh(n){const e=n.children&&n.children.map(Sh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=bh),t}function Ut(n){return n.outlet||bt}function Bp(n,e){const t=n.filter(r=>Ut(r)===e);return t.push(...n.filter(r=>Ut(r)!==e)),t}const jp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ou(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},jp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Wc)(t,n,e);if(!u)return Object.assign({},jp);const d={};tn(u.posParams,(w,b)=>{d[b]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Pu(n,e,t,r,o="corrected"){if(t.length>0&&function py(n,e,t){return t.some(r=>xa(n,e,r)&&Ut(r)!==bt)}(n,t,r)){const d=new pe(e,function fy(n,e,t,r){const o={};o[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ut(u)!==bt){const d=new pe([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Ut(u)]=d}return o}(n,e,r,new pe(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function gy(n,e,t){return t.some(r=>xa(n,e,r))}(n,t,r)){const d=new pe(n.segments,function hy(n,e,t,r,o,u){const d={};for(const m of r)if(xa(n,t,m)&&!o[Ut(m)]){const w=new pe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Ut(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new pe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function xa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function my(n,e,t,r){return!!(Ut(n)===r||r!==bt&&xa(e,t,n))&&("**"===n.path||Ou(e,n,t).matched)}function $p(n,e,t){return 0===e.length&&!n.children[t]}class qo{constructor(e){this.segmentGroup=e||null}}class Tr{constructor(e){this.urlTree=e}}function Ra(n){return Es(new qo(n))}function Mh(n){return Es(new Tr(n))}class od{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Pu(this.urlTree.root,[],[],this.config).segmentGroup,t=new pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,bt).pipe((0,Ct.U)(u=>this.createUrlTree(Vl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wr(u=>{if(u instanceof Tr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof qo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,bt).pipe((0,Ct.U)(o=>this.createUrlTree(Vl(o),e.queryParams,e.fragment))).pipe(Wr(o=>{throw o instanceof qo?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new pe([],{[bt]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(u=>new pe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,mn.D)(o).pipe(wu(u=>{const d=r.children[u],m=Bp(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Ct.U)(w=>({segment:w,outlet:u})))}),Li((u,d)=>(u[d.outlet]=d.segment,u),{}),function ey(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((o,u)=>n(o,u,r)):pi.y,Da(1),t?Cp(e):an(()=>new ws))}())}expandSegment(e,t,r,o,u,d){return(0,mn.D)(r).pipe(wu(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Wr(b=>{if(b instanceof qo)return Xe(null);throw b}))),Vo(m=>!!m),Wr((m,w)=>{if(m instanceof ws||"EmptyError"===m.name)return $p(t,o,u)?Xe(new pe([],{})):Ra(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return my(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Ra(t):Ra(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Mh(u):this.lineralizeSegments(r,u).pipe((0,yn.z)(d=>{const m=new pe(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:x}=Ou(t,o,u);if(!m)return Ra(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Mh(N):this.lineralizeSegments(o,N).pipe((0,yn.z)(z=>this.expandSegment(e,t,r,z.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(N=>(r._loadedConfig=N,new pe(o,{})))):Xe(new pe(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Ou(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,yn.z)(x=>{const N=x.module,z=x.routes,{segmentGroup:ee,slicedSegments:ge}=Pu(t,m,w,z),Ve=new pe(ee.segments,ee.children);if(0===ge.length&&Ve.hasChildren())return this.expandChildren(N,z,Ve).pipe((0,Ct.U)(Gt=>new pe(m,Gt)));if(0===z.length&&0===ge.length)return Xe(new pe(m,{}));const nt=Ut(r)===u;return this.expandSegment(N,Ve,z,ge,nt?bt:u,!0).pipe((0,Ct.U)(jt=>new pe(m.concat(jt.segments),jt.children)))})):Ra(t)}getChildConfig(e,t,r){return t.children?Xe(new id(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(u=>(t._loadedConfig=u,u))):function nr(n){return Es(Cs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Xe(new id([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Xe(o.map(d=>{const m=e.get(d);let w;if(function Dh(n){return n&&Sa(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Sa(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return tr(w)})).pipe(Ru(),(0,Or.b)(d=>{if(!xu(d))return;const m=Cs(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Ct.U)(d=>!0===d)):Xe(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Xe(r);if(o.numberOfChildren>1||!o.children[bt])return Es(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return tn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return tn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new pe(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Vl(n){const e={};for(const r of Object.keys(n.children)){const u=Vl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function yy(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new pe(n.segments.concat(e.segments),e.children)}return n}(new pe(n.segments,e))}class Xr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uo{constructor(e,t){this.component=e,this.route=t}}function Gp(n,e,t){const r=n._root;return Oa(r,e?e._root:null,t,[r.value])}function ku(n,e,t){const r=function Rh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Oa(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ao(e);return n.children.forEach(d=>{(function zp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function _y(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!at(n.url,e.url);case"pathParamsOrQueryParamsChange":return!at(n.url,e.url)||!gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wh(n,e)||!gi(n.queryParams,e.queryParams);default:return!wh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Xr(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Oa(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new uo(m.outlet.component,d))}else d&&ei(e,m,o),o.canActivateChecks.push(new Xr(r)),Oa(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),tn(u,(d,m)=>ei(d,t.getContext(m),o)),o}function ei(n,e,t){const r=ao(n),o=n.value;tn(r,(u,d)=>{ei(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new uo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Kp{}function Ss(n){return new Mn.y(e=>e.error(n))}class Yp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Pu(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,bt);if(null===t)return null;const r=new Ho([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new oo(r,t),u=new vh(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=oy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Bp(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=Jp(r);return function Qp(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return $p(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!my(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const ee=r.length>0?Vi(r).parameters:{};u=new Ho(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Ut(e),e.component,e,Pa(t),es(t)+r.length,h(e))}else{const ee=Ou(t,e,r);if(!ee.matched)return null;d=ee.consumedSegments,m=ee.remainingSegments,u=new Ho(d,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Ut(e),e.component,e,Pa(t),es(t)+d.length,h(e))}const w=function wy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:x}=Pu(t,d,m,w.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===x.length&&b.hasChildren()){const ee=this.processChildren(w,b);return null===ee?null:[new oo(u,ee)]}if(0===w.length&&0===x.length)return[new oo(u,[])];const N=Ut(e)===o,z=this.processSegment(w,b,x,N?bt:o);return null===z?null:[new oo(u,z)]}}function Ph(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jp(n){const e=[],t=new Set;for(const r of n){if(!Ph(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Jp(r.children);e.push(new oo(r.value,o))}return e.filter(r=>!t.has(r))}function Pa(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function es(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function h(n){return n.resolve||{}}function q(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return bn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,Ct.U)(()=>e)):Xe(e)})}class ot extends class ht{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _n=new f.OlP("ROUTES");class ni{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new id(Zc(d.injector.get(_n,void 0,f.XFs.Self|f.XFs.Optional)).map(Sh),d)}),Wr(u=>{throw t._loader$=void 0,u}));return t._loader$=new Eu(o,()=>new Gr.x).pipe(Qs()),t._loader$}loadModuleFactory(e){return tr(e()).pipe((0,yn.z)(t=>t instanceof f.YKP?Xe(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class Iy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zo(n){throw n}function ud(n,e,t){return e.parse("/")}function ld(n,e){return Xe(null)}const kh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gr.x,this.errorHandler=zo,this.malformedUriErrorHandler=ud,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ld,afterPreactivation:ld},this.urlHandlingStrategy=new Iy,this.routeReuseStrategy=new ot,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const N=d.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function ny(){return new te(new pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ni(d,m,z=>this.triggerEvent(new Uo(z)),z=>this.triggerEvent(new to(z))),this.routerState=Ta(this.currentUrlTree,this.rootComponentType),this.transitions=new qr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zr(o=>0!==o.id),(0,Ct.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),bn(o=>{let u=!1,d=!1;return Xe(o).pipe((0,Or.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),bn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Lh(m.source)&&(this.browserUrlTree=m.extractedUrl),Xe(m).pipe(bn(N=>{const z=this.transitions.getValue();return r.next(new Xs(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),z!==this.transitions.getValue()?Ia.E:Promise.resolve(N)}),function Hp(n,e,t,r){return bn(o=>function Na(n,e,t,r,o){return new od(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ct.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Or.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,yn.z)(u=>function Ul(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Yp(n,e,t,r,o,u).recognize();return null===d?Ss(new Kp):Xe(d)}catch(d){return Ss(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ct.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Or.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ee,N)}this.browserUrlTree=N.urlAfterRedirects}const z=new eo(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(z)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:ee,source:ge,restoredState:Ve,extras:nt}=m,Bt=new Xs(z,this.serializeUrl(ee),ge,Ve);r.next(Bt);const jt=Ta(ee,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},m),{targetSnapshot:jt,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ia.E}),Fe(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=m;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,Or.b)(m=>{const w=new ty(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ct.U)(m=>Object.assign(Object.assign({},m),{guards:Gp(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Wp(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function vy(n,e,t,r){return(0,mn.D)(n).pipe((0,yn.z)(o=>function Oh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Xe(u.map(m=>{const w=ku(m,e,o);let b;if(function R0(n){return n&&Sa(n.canDeactivate)}(w))b=tr(w.canDeactivate(n,e,t,r));else{if(!Sa(w))throw new Error("Invalid CanDeactivate guard");b=tr(w(n,e,t,r))}return b.pipe(Vo())})).pipe(Ru()):Xe(!0)}(o.component,o.route,t,e,r)),Vo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,yn.z)(m=>m&&function Up(n){return"boolean"==typeof n}(m)?function ad(n,e,t,r){return(0,mn.D)(e).pipe(wu(o=>ko(function Zp(n,e){return null!==n&&e&&e(new no(n)),Xe(!0)}(o.route.parent,r),function Ey(n,e){return null!==n&&e&&e(new ro(n)),Xe(!0)}(o.route,r),function Nh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function qp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Lo(()=>Xe(d.guards.map(w=>{const b=ku(w,d.node,t);let x;if(function Ch(n){return n&&Sa(n.canActivateChild)}(b))x=tr(b.canActivateChild(r,n));else{if(!Sa(b))throw new Error("Invalid CanActivateChild guard");x=tr(b(r,n))}return x.pipe(Vo())})).pipe(Ru())));return Xe(u).pipe(Ru())}(n,o.path,t),function ti(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const o=r.map(u=>Lo(()=>{const d=ku(u,e,t);let m;if(function Fl(n){return n&&Sa(n.canActivate)}(d))m=tr(d.canActivate(e,n));else{if(!Sa(d))throw new Error("Invalid CanActivate guard");m=tr(d(e,n))}return m.pipe(Vo())}));return Xe(o).pipe(Ru())}(n,o.route,t))),Vo(o=>!0!==o,!0))}(r,u,n,e):Xe(m)),(0,Ct.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Or.b)(m=>{if(xu(m.guardsResult)){const b=Cs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const w=new xl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),zr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return Xe(m).pipe((0,Or.b)(w=>{const b=new Zr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),bn(w=>{let b=!1;return Xe(w).pipe(function v(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Xe(t);let u=0;return(0,mn.D)(o).pipe(wu(d=>function T(n,e,t,r){return function R(n,e,t,r){const o=q(n);if(0===o.length)return Xe({});const u={};return(0,mn.D)(o).pipe((0,yn.z)(d=>function he(n,e,t,r){const o=ku(n,e,r);return tr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Or.b)(m=>{u[d]=m}))),Da(1),(0,yn.z)(()=>q(u).length===o.length?Xe(u):Ia.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),oy(n,t).resolve),null)))}(d.route,r,n,e)),(0,Or.b)(()=>u++),Da(1),(0,yn.z)(d=>u===o.length?Xe(t):Ia.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Or.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Or.b)(w=>{const b=new Kr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),Fe(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=m;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,Ct.U)(m=>{const w=function Rp(n,e,t){const r=Pl(n,e._root,t?t._root:void 0);return new Yc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Or.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new Vp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Or.b)({next(){u=!0},complete(){u=!0}}),function zc(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Wr(m=>{if(d=!0,function bp(n){return n&&n[ba]}(m)){const w=xu(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const b=new ln(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(b),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lh(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Ml(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Ia.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ma(t),this.config=t.map(Sh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function Go(n,e,t,r,o){if(0===t.length)return ed(e.root,e.root,e.root,r,o);const u=function M0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Np(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return tn(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Np(t,e,r)}(t);if(u.toRoot())return ed(e.root,e.root,new pe([],{}),r,o);const d=function Op(n,e,t){if(n.isAbsolute)return new td(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new td(u,u===e.root,0)}const r=Ts(n.commands[0])?0:1;return function Pp(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new td(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?nd(d.segmentGroup,d.index,u.commands):Fp(d.segmentGroup,d.index,u.commands);return ed(e.root,d.segmentGroup,m,r,o)}(b,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=xu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Fh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},kh):!1===r?Object.assign({},cd):r,xu(t))return io(this.currentUrlTree,t,o);const u=this.parseUrl(t);return io(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Iu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let b,x,N;d?(b=d.resolve,x=d.reject,N=d.promise):N=new Promise((ge,Ve)=>{b=ge,x=Ve});const z=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ee=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):ee=0,this.setTransition({id:z,targetPageId:ee,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ge=>Promise.reject(ge))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ln(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Lh(n){return"imperative"!==n}let dd=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new Gr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Fu(this.skipLocationChange),replaceUrl:Fu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ri),f.Y36(Mu),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Fu(n){return""===n||!!n}class Cy{}class P0{preload(e,t){return Xe(null)}}let k0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ni(o,r,w=>t.triggerEvent(new Uo(w)),w=>t.triggerEvent(new to(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof Iu),wu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,mn.D)(o).pipe((0,Po.J)(),(0,Ct.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ri),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Cy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Xp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Iu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ca&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ca(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ts=new f.OlP("ROUTER_CONFIGURATION"),Ty=new f.OlP("ROUTER_FORROOT_GUARD"),F0=[ve,{provide:_t,useClass:hr},{provide:ri,useFactory:function Sy(n,e,t,r,o,u,d={},m,w){const b=new ri(null,n,e,t,r,o,Zc(u));return m&&(b.urlHandlingStrategy=m),w&&(b.routeReuseStrategy=w),function U0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(x=>{var N,z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(z=console.groupEnd)||void 0===z||z.call(console)}),b},deps:[_t,Nu,ve,f.zs3,f.Sil,_n,ts,[class Bl{},new f.FiY],[class Ze{},new f.FiY]]},Nu,{provide:Mu,useFactory:function eg(n){return n.routerState.root},deps:[ri]},k0,P0,class by{preload(e,t){return t().pipe(Wr(()=>Xe(null)))}},{provide:ts,useValue:{enableTracing:!1}}];function dD(){return new f.PXZ("Router",ri)}let Ui=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[F0,Ay(t),{provide:Ty,useFactory:V0,deps:[[ri,new f.FiY,new f.tp0]]},{provide:ts,useValue:r||{}},{provide:de,useFactory:L0,deps:[ie,[new f.tBr(Ge),new f.FiY],ts]},{provide:Xp,useFactory:hD,deps:[ri,gl,ts]},{provide:Cy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:P0},{provide:f.PXZ,multi:!0,useFactory:dD},[hd,{provide:f.ip1,multi:!0,useFactory:B0,deps:[hd]},{provide:xy,useFactory:My,deps:[hd]},{provide:f.tb,multi:!0,useExisting:xy}]]}}static forChild(t){return{ngModule:n,providers:[Ay(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ty,8),f.LFG(ri,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function hD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Xp(n,e,t)}function L0(n,e,t={}){return t.useHash?new Te(n,e):new Ke(n,e)}function V0(n){return"guarded"}function Ay(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:_n,multi:!0,useValue:n}]}let hd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(ri),d=this.injector.get(ts);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ts),o=this.injector.get(k0),u=this.injector.get(Xp),d=this.injector.get(ri),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function B0(n){return n.appInitializer.bind(n)}function My(n){return n.bootstrapListener.bind(n)}const xy=new f.OlP("Router Initializer"),j0=new f.OlP("GETS_ALL_PRODUCT_DTO"),Ny=new f.OlP("ADDS_CART_DTO"),ng=new f.OlP("CONTEXT_DTO_STORAGE"),fD=function(n){return[n]};function $0(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",5)(1,"img",6),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().onItemOnpictureclickeded(u)}),f.qZA(),f.TgZ(2,"p",7),f._uU(3),f.qZA(),f.TgZ(4,"p",0),f._uU(5),f.qZA(),f.TgZ(6,"button",8),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().onItemClicked(u)}),f._uU(7,"Add to cart"),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("routerLink","/product-detail/"+t.id)("src",f.VKq(4,fD,t.imageUrl),f.LSH),f.xp6(2),f.Oqu(t.name),f.xp6(2),f.hij("$ ",t.price,"")}}let Oy=(()=>{class n{constructor(t,r,o){this._getsAllProductDto=t,this._addsCartDto=r,this._contextDtoStorage=o,this.product$=this._getsAllProductDto.getAll()}onItemClicked(t){console.log(t),this._addsCartDto.add({name:t.name,imageUrl:t.imageUrl,desc:t.desc||"",price:t.price})}onItemOnpictureclickeded(t){this._contextDtoStorage.next({productId:t.id})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(j0),f.Y36(Ny),f.Y36(ng))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-list"]],decls:10,vars:3,consts:[[1,"text-center"],[1,"container","py-5"],[1,"row"],[1,"card-group"],["class","card ms-5",4,"ngFor","ngForOf"],[1,"card","ms-5"],["alt","...",1,"card-img-top",2,"height","484px",3,"routerLink","src","click"],[1,"text-center",2,"font-weight","bold"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1",0),f._uU(1,"Discover our products!"),f.qZA(),f.TgZ(2,"h5",0),f._uU(3,"Recently added clothes"),f.qZA(),f.TgZ(4,"div",1)(5,"div",2)(6,"div",3),f.YNc(7,$0,8,6,"div",4),f.ALo(8,"async"),f.qZA()()(),f._uU(9," asdsad\n")),2&t&&(f.xp6(7),f.Q6J("ngForOf",f.lcZ(8,1,r.product$)))},directives:[Fn,dd],pipes:[hl],encapsulation:2,changeDetection:0}),n})(),H0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-product-list")},directives:[Oy],encapsulation:2,changeDetection:0}),n})(),AT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui]]}),n})();var G0=O(4986),kr=O(5813);function rg(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function gD(n,e){return n===e}var et,qn=O(2011),q0=(O(7092),O(3942)),we=O(5861),$l=O(9681),ig=O(4859),Lu=O(1877),Ot=O(2090),mD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ka={},It=It||{},Dt=mD||self;function Vh(){}function sg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Vu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var og="closure_uid_"+(1e9*Math.random()>>>0),yD=0;function Py(n,e,t){return n.call.apply(n.bind,arguments)}function Fa(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function fr(n,e,t){return(fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Py:Fa).apply(null,arguments)}function Uh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Hl(){this.s=this.s,this.o=this.o}var MT={};Hl.prototype.s=!1,Hl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function lo(n){return Object.prototype.hasOwnProperty.call(n,og)&&n[og]||(n[og]=++yD)}(this);delete MT[n]}},Hl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bh=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},jh=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function ag(n){return Array.prototype.concat.apply([],arguments)}function $h(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Fy(n){return/^[\s\xa0]*$/.test(n)}var yi,W0=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function mi(n,e){return-1!=n.indexOf(e)}function Ly(n,e){return n<e?-1:n>e?1:0}e:{var Vy=Dt.navigator;if(Vy){var _D=Vy.userAgent;if(_D){yi=_D;break e}}yi=""}function Uy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vD(n){const e={};for(const t in n)e[t]=n[t];return e}var By="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jy(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<By.length;u++)t=By[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $y(n){return $y[" "](n),n}$y[" "]=Vh;var Gy,n,xT=mi(yi,"Opera"),Hh=mi(yi,"Trident")||mi(yi,"MSIE"),ED=mi(yi,"Edge"),Z0=ED||Hh,wD=mi(yi,"Gecko")&&!(mi(yi.toLowerCase(),"webkit")&&!mi(yi,"Edge"))&&!(mi(yi,"Trident")||mi(yi,"MSIE"))&&!mi(yi,"Edge"),RT=mi(yi.toLowerCase(),"webkit")&&!mi(yi,"Edge");function ID(){var n=Dt.document;return n?n.documentMode:void 0}e:{var K0="",Y0=(n=yi,wD?/rv:([^\);]+)(\)|;)/.exec(n):ED?/Edge\/([\d\.]+)/.exec(n):Hh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):RT?/WebKit\/(\S+)/.exec(n):xT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Y0&&(K0=Y0?Y0[1]:""),Hh){var Wo=ID();if(null!=Wo&&Wo>parseFloat(K0)){Gy=String(Wo);break e}}Gy=K0}var qy={};var Q0=Dt.document&&Hh&&(ID()||parseInt(Gy,10))||void 0,zy=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Vh,e),Dt.removeEventListener("test",Vh,e)}catch(t){}return n}();function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ms(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wD){e:{try{$y(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:J0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ms.Z.h.call(this)}}ii.prototype.h=function(){this.defaultPrevented=!0},pr(Ms,ii);var J0={2:"touch",3:"pen",4:"mouse"};Ms.prototype.h=function(){Ms.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gh="closure_listenable_"+(1e6*Math.random()|0),Wy=0;function CD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Wy,this.ca=this.fa=!1}function qh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function cg(n){this.src=n,this.g={},this.h=0}function Zy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Bh(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(qh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gl(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}cg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Gl(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new CD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Uu="closure_lm_"+(1e6*Math.random()|0),zh={};function ql(n,e,t,r,o){if(r&&r.once)return X0(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ql(n,e[u],t,r,o);return null}return t=Qy(t),n&&n[Gh]?n.N(e,t,Vu(r)?!!r.capture:!!r,o):fd(n,e,t,!1,r,o)}function fd(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Vu(o)?!!o.capture:!!o,m=fg(n);if(m||(n[Uu]=m=new cg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function pd(){var e=Yy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zy||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(hg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function X0(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)X0(n,e[u],t,r,o);return null}return t=Qy(t),n&&n[Gh]?n.O(e,t,Vu(r)?!!r.capture:!!r,o):fd(n,e,t,!0,r,o)}function Ky(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ky(n,e[u],t,r,o);else r=Vu(r)?!!r.capture:!!r,t=Qy(t),n&&n[Gh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gl(u=n.g[e],t,r,o))&&(qh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=fg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gl(e,t,r,o)),(t=-1<n?e[n]:null)&&dg(t))}function dg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gh])Zy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fg(e))?(Zy(t,n),0==t.h&&(t.src=null,e[Uu]=null)):qh(n)}}}function hg(n){return n in zh?zh[n]:zh[n]="on"+n}function Yy(n,e){if(n.ca)n=!0;else{e=new Ms(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&dg(n),n=t.call(r,e)}return n}function fg(n){return(n=n[Uu])instanceof cg?n:null}var gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qy(n){return"function"==typeof n?n:(n[gd]||(n[gd]=function(e){return n.handleEvent(e)}),n[gd])}function gr(){Hl.call(this),this.i=new cg(this),this.P=this,this.I=null}function si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var o=e;jy(e=new ii(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Wh(d,r,!0,e)&&o}if(o=Wh(d=e.g=n,r,!0,e)&&o,o=Wh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Wh(d=e.g=t[u],r,!1,e)&&o}function Wh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Zy(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}pr(gr,Hl),gr.prototype[Gh]=!0,gr.prototype.removeEventListener=function(n,e,t,r){Ky(this,n,e,t,r)},gr.prototype.M=function(){if(gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qh(t[r]);delete n.g[e],n.h--}}this.I=null},gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var pg=Dt.JSON.stringify;function bD(){var n=e_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Xy,tE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TD,n=>n.reset());class TD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ns(n){Dt.setTimeout(()=>{throw n},0)}function Jy(n,e){Xy||function NT(){var n=Dt.Promise.resolve(void 0);Xy=function(){n.then(OT)}}(),nE||(Xy(),nE=!0),e_.add(n,e)}var nE=!1,e_=new class eE{constructor(){this.h=this.g=null}add(e,t){const r=tE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function OT(){for(var n;n=bD();){try{n.h.call(n.g)}catch(t){ns(t)}var e=tE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nE=!1}function gg(n,e){gr.call(this),this.h=n||1,this.g=e||Dt,this.j=fr(this.kb,this),this.l=Date.now()}function Zh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function mg(n,e,t){if("function"==typeof n)t&&(n=fr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function rE(n){n.g=mg(()=>{n.g=null,n.i&&(n.i=!1,rE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pr(gg,gr),(et=gg.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),si(this,"tick"),this.da&&(Zh(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){gg.Z.M.call(this),Zh(this),delete this.g};class AD extends Hl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rE(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kh(n){Hl.call(this),this.h=n,this.g={}}pr(Kh,Hl);var t_=[];function iE(n,e,t,r){Array.isArray(t)||(t&&(t_[0]=t.toString()),t=t_);for(var o=0;o<t.length;o++){var u=ql(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function n_(n){Uy(n.g,function(e,t){this.g.hasOwnProperty(t)&&dg(e)},n),n.g={}}function yg(){this.g=!0}function zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zo(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return pg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Kh.prototype.M=function(){Kh.Z.M.call(this),n_(this)},Kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yg.prototype.Aa=function(){this.g=!1},yg.prototype.info=function(){};var La={},oE=null;function _g(){return oE=oE||new gr}function xD(n){ii.call(this,La.Ma,n)}function md(n){const e=_g();si(e,new xD(e,n))}function aE(n,e){ii.call(this,La.STAT_EVENT,n),this.stat=e}function _i(n){const e=_g();si(e,new aE(e,n))}function uE(n,e){ii.call(this,La.Na,n),this.size=e}function Wl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}La.Ma="serverreachability",pr(xD,ii),La.STAT_EVENT="statevent",pr(aE,ii),La.Na="timingevent",pr(uE,ii);var vg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yd(){}function cE(){}yd.prototype.h=null;var r_,Zl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Yh(){ii.call(this,"d")}function wg(){ii.call(this,"c")}function Ig(){}function Kl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Kh(this),this.P=ND,this.W=new gg(n=Z0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new RD}function RD(){this.i=null,this.g="",this.h=!1}pr(Yh,ii),pr(wg,ii),pr(Ig,yd),Ig.prototype.g=function(){return new XMLHttpRequest},Ig.prototype.i=function(){return{}},r_=new Ig;var ND=45e3,Dg={},Qh={};function Cg(n,e,t){n.K=1,n.v=Sg(Ua(e)),n.s=t,n.U=!0,i_(n,null)}function i_(n,e){n.F=Date.now(),Jh(n),n.A=Ua(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),yE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new RD,n.g=E_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new AD(fr(n.Ia,n,n.g),n.O)),iE(n.V,n.g,"readystatechange",n.gb),e=n.H?vD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),md(1),function SD(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var x=b[0];b=b[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+b+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function s_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ko(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=bg(n,t),o==Qh){4==e&&(n.o=4,_i(14),r=!1),zl(n.j,n.m,null,"[Incomplete Response]");break}if(o==Dg){n.o=4,_i(15),zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zl(n.j,n.m,o,null),Xh(n,o)}s_(n)&&o!=Qh&&o!=Dg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qu(e),e.L=!0,_i(11))):(zl(n.j,n.m,t,"[Invalid Chunked Response]"),Bu(n),Yl(n))}function bg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Qh:(t=Number(e.substring(t,r)),isNaN(t)?Dg:(r+=1)+t>e.length?Qh:(e=e.substr(r,t),n.C=r+t,e))}function Jh(n){n.Y=Date.now()+n.P,dE(n,n.P)}function dE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Wl(fr(n.eb,n),e)}function o_(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Yl(n){0==n.l.G||n.I||m_(n.l,n)}function Bu(n){o_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Zh(n.W),n_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Xh(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sf(t.i,n)))if(t.I=n.N,!n.J&&sf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Wl(fr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;cf(t),ec(t)}Gu(t),_i(18)}if(1>=VD(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else zu(t,11)}else if((n.J||t.g==n)&&cf(t),!Fy(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const x=b[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=b[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const z=b[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const ge=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.i;!u.g&&(mi(ge,"spdy")||mi(ge,"quic")||mi(ge,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(d_(u,u.h),u.h=null))}if(r.D){const Ve=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.sa=Ve,Tn(r.F,r.D,Ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=v_(r,r.H?r.la:null,r.W),d.J){h_(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(o_(m),Jh(m)),r.g=d}else rc(r);0<t.l.length&&Ga(t)}else"stop"!=b[0]&&"close"!=b[0]||zu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?zu(t,7):Ha(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}md(4)}catch(b){}}function a_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sg(n)||"string"==typeof n)jh(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(sg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function ef(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(sg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function ju(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ju)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Tg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];$u(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)$u(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function $u(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Kl.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==ja(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const x=ja(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Z0||this.g&&(this.h.h||this.g.ga()||DE(this.g)))){this.I||4!=x||7==e||md(8==e||0>=N?3:2),o_(this);var t=this.g.ba();this.N=t;t:if(s_(this)){var r=DE(this.g);n="";var o=r.length,u=4==ja(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bu(this),Yl(this);var d="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function sE(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fy(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,_i(12),Bu(this),Yl(this);break e}zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xh(this,t)}this.U?(Ko(this,x,d),Z0&&this.i&&3==x&&(iE(this.V,this.W,"tick",this.fb),this.W.start())):(zl(this.j,this.m,d,null),Xh(this,d)),4==x&&Bu(this),this.i&&!this.I&&(4==x?m_(this.l,this):(this.i=!1,Jh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),Bu(this),Yl(this)}}}catch(x){}},et.fb=function(){if(this.g){var n=ja(this.g),e=this.g.ga();this.C<e.length&&(o_(this),Ko(this,n,e),this.i&&4!=n&&Jh(this))}},et.cancel=function(){this.I=!0,Bu(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function MD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(md(3),_i(17)),Bu(this),this.o=2,Yl(this)):dE(this,this.Y-n)},(et=ju.prototype).R=function(){Tg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Tg(this),this.g.concat()},et.get=function(n,e){return $u(this.h,n)?this.h[n]:e},et.set=function(n,e){$u(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var u_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Va(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Va){this.g=void 0!==e?e:n.g,Ag(this,n.j),this.s=n.s,tf(this,n.i),Ba(this,n.m),this.l=n.l,e=n.h;var t=new vd;t.i=e.i,e.g&&(t.g=new ju(e.g),t.h=e.h),l_(this,t),this.o=n.o}else n&&(t=String(n).match(u_))?(this.g=!!e,Ag(this,t[1]||"",!0),this.s=nf(t[2]||""),tf(this,t[3]||"",!0),Ba(this,t[4]),this.l=nf(t[5]||"",!0),l_(this,t[6]||"",!0),this.o=nf(t[7]||"")):(this.g=!!e,this.h=new vd(null,this.g))}function Ua(n){return new Va(n)}function Ag(n,e,t){n.j=t?nf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tf(n,e,t){n.i=t?nf(e,!0):e}function Ba(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function l_(n,e,t){e instanceof vd?(n.h=e,function PT(n,e){e&&!n.j&&(Hu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(gE(this,r),yE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=rf(e,fE)),n.h=new vd(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function Sg(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Va.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rf(e,xs,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rf(e,xs,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(rf(t,"/"==t.charAt(0)?hE:c_,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rf(t,pE)),n.join("")};var xs=/[#\/\?@]/g,c_=/[#\?:]/g,hE=/[#\?]/g,fE=/[#\?@]/g,pE=/#/g;function vd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hu(n){n.g||(n.g=new ju,n.h=0,n.i&&function OD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gE(n,e){Hu(n),e=Ql(n,e),$u(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,$u((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Tg(n)))}function mE(n,e){return Hu(n),e=Ql(n,e),$u(n.g.h,e)}function yE(n,e,t){gE(n,e),0<t.length&&(n.i=null,n.g.set(Ql(n,e),$h(t)),n.h+=t.length)}function Ql(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function vE(n){this.l=n||FD,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=vd.prototype).add=function(n,e){Hu(this),this.i=null,n=Ql(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Hu(this),this.g.forEach(function(t,r){jh(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Hu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Hu(this);var e=[];if("string"==typeof n)mE(this,n)&&(e=ag(e,this.g.get(Ql(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ag(e,n[t])}return e},et.set=function(n,e){return Hu(this),this.i=null,mE(this,n=Ql(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var FD=10;function LD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function VD(n){return n.h?1:n.g?n.g.size:0}function sf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function d_(n,e){n.g?n.g.add(e):n.h=e}function h_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function f_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $h(n.i)}function EE(){}function co(){this.g=new EE}function kT(n,e,t){const r=t||"";try{a_(n,function(o,u){let d=o;Vu(o)&&(d=pg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function of(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Ed(n){this.l=n.$b||null,this.j=n.ib||!1}function af(n,e){gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=p_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vE.prototype.cancel=function(){if(this.i=f_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},EE.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},EE.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},pr(Ed,yd),Ed.prototype.g=function(){return new af(this.l,this.j)},Ed.prototype.i=function(n){return function(){return n}}({}),pr(af,gr);var p_=0;function UD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function wd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jl(n)}function Jl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=af.prototype).open=function(n,e){if(this.readyState!=p_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jl(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wd(this)),this.readyState=p_},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jl(this)),this.g&&(this.readyState=3,Jl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?wd(this):Jl(this),3==this.readyState&&UD(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,wd(this))},et.Ta=function(n){this.g&&(this.response=n,wd(this))},et.ha=function(){this.g&&wd(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(af.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var BD=Dt.JSON.parse;function Ln(n){gr.call(this),this.headers=new ju,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wE,this.K=this.L=!1}pr(Ln,gr);var wE="",jD=/^https?$/i,$D=["POST","PUT"];function GD(n){return"content-type"==n.toLowerCase()}function IE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uf(n),Mg(n)}function uf(n){n.D||(n.D=!0,si(n,"complete"),si(n,"error"))}function Xl(n){if(n.h&&void 0!==It&&(!n.C[1]||4!=ja(n)||2!=n.ba()))if(n.v&&4==ja(n))mg(n.Fa,0,n);else if(si(n,"readystatechange"),4==ja(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(u_)[1]||null;if(!o&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!jD.test(o?o.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var d=2<ja(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",uf(n)}}finally{Mg(n)}}}function Mg(n,e){if(n.g){Id(n);const t=n.g,r=n.C[0]?Vh:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Id(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function ja(n){return n.g?n.g.readyState:0}function DE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Rs(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function g_(n){let e="";return Uy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function $a(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fr(n){this.za=0,this.l=[],this.h=new yg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$a("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$a("baseRetryDelayMs",5e3,n),this.$a=$a("retryDelaySeedMs",1e4,n),this.Ya=$a("forwardChannelMaxRetries",2,n),this.ra=$a("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new vE(n&&n.concurrentRequestLimit),this.Ca=new co,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ha(n){if(rs(n),3==n.G){var e=n.V++,t=Ua(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Yo(n,t),(e=new Kl(n,n.h,e,void 0)).K=2,e.v=Sg(Ua(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=E_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Jh(e)}__(n)}function ec(n){n.g&&(qu(n),n.g.cancel(),n.g=null)}function rs(n){ec(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),cf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function lf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ga(n)}function Ga(n){LD(n.i)||n.m||(n.m=!0,Jy(n.Ha,n),n.C=0)}function tc(n,e){var t;t=e?e.m:n.V++;const r=Ua(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),Yo(n,r),n.o&&n.s&&Rs(r,n.o,n.s),t=new Kl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=nc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),d_(n.i,t),Cg(t,r,e)}function Yo(n,e){n.j&&a_({},function(t,r){Tn(e,r,t)})}function nc(n,e,t){t=Math.min(n.l.length,t);var r=n.j?fr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const x=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{kT(x,d,"req"+b+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function rc(n){n.g||n.u||(n.Y=1,Jy(n.Ga,n),n.A=0)}function Gu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Wl(fr(n.Ga,n),y_(n,n.A)),n.A++,0))}function qu(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function ic(n){n.g=new Kl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ua(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),Yo(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&Rs(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Sg(Ua(e)),t.s=null,t.U=!0,i_(t,n)}function cf(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function m_(n,e){var t=null;if(n.g==e){cf(n),qu(n),n.g=null;var r=2}else{if(!sf(n.i,e))return;t=e.D,h_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;si(r=_g(),new uE(r,t,e,o)),Ga(n)}else rc(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Dd(n,e){return!(VD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Wl(fr(n.Ha,n,e),y_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:zu(n,5);break;case 4:zu(n,10);break;case 3:zu(n,6);break;default:zu(n,2)}}function y_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function zu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=fr(n.jb,n);t||(t=new Va("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||Ag(t,"https"),Sg(t)),function FT(n,e){const t=new yg;if(Dt.Image){const r=new Image;r.onload=Uh(of,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Uh(of,t,r,"TestLoadImage: error",!1,e),r.onabort=Uh(of,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uh(of,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.j&&n.j.va(e),__(n),rs(n)}function __(n){n.G=0,n.I=-1,n.j&&((0!=f_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$h(n.l),n.l.length=0),n.j.ua())}function v_(n,e,t){let r=function _d(n){return n instanceof Va?Ua(n):new Va(n,void 0)}(t);if(""!=r.i)e&&tf(r,e+"."+r.i),Ba(r,r.m);else{const o=Dt.location;r=function PD(n,e,t,r){var o=new Va(null,void 0);return n&&Ag(o,n),e&&tf(o,e),t&&Ba(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Uy(n.aa,function(o,u){Tn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),Yo(n,r),r}function E_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Ba&&!n.qa?new Ed({ib:!0}):n.qa)).L=n.H,e}function w_(){}function df(){if(Hh&&!(10<=Number(Q0)))throw Error("Environmental error: no available transport.")}function is(n,e){gr.call(this),this.g=new Fr(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Fy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cd(this)}function I_(n){Yh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function CE(){wg.call(this),this.status=1}function Cd(n){this.g=n}(et=Ln.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():r_.g(),this.C=function Eg(n){return n.h||(n.h=n.i())}(this.u?this.u:r_),this.g.onreadystatechange=fr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void IE(this,u)}n=t||"";const o=new ju(this.headers);r&&a_(r,function(u,d){o.set(d,u)}),r=function ky(n){e:{var e=GD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=Bh($D,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Id(this),0<this.B&&((this.K=function HD(n){return Hh&&function DD(){return function Hy(n){var e=qy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=W0(String(Gy)).split("."),t=W0("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Ly(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Ly(0==o[2].length,0==u[2].length)||Ly(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fr(this.pa,this)):this.A=mg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){IE(this,u)}},et.pa=function(){void 0!==It&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),Mg(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mg(this,!0)),Ln.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?Xl(this):this.cb())},et.cb=function(){Xl(this)},et.ba=function(){try{return 2<ja(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),BD(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Fr.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Kl(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=vD(u),jy(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=nc(this,o,e),Tn(t=Ua(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),Yo(this,t),this.o&&u&&Rs(t,this.o,u),d_(this.i,o),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),o.$=!0,Cg(o,t,null)):Cg(o,t,e),this.G=2}}else 3==this.G&&(n?tc(this,n):0==this.l.length||LD(this.i)||tc(this))},et.Ga=function(){if(this.u=null,ic(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Wl(fr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),ec(this),ic(this))},et.ab=function(){null!=this.v&&(this.v=null,ec(this),Gu(this),_i(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(et=w_.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},df.prototype.g=function(n,e){return new is(n,e)},pr(is,gr),is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Jy(fr(n.hb,n,e))),_i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=v_(n,null,n.W),Ga(n)},is.prototype.close=function(){Ha(this.g)},is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,lf(this.g,e)}else this.v?((e={}).__data__=pg(n),lf(this.g,e)):lf(this.g,n)},is.prototype.M=function(){this.g.j=null,delete this.j,Ha(this.g),delete this.g,is.Z.M.call(this)},pr(I_,Yh),pr(CE,wg),pr(Cd,w_),Cd.prototype.xa=function(){si(this.g,"a")},Cd.prototype.wa=function(n){si(this.g,new I_(n))},Cd.prototype.va=function(n){si(this.g,new CE(n))},Cd.prototype.ua=function(){si(this.g,"b")},df.prototype.createWebChannel=df.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,vg.NO_ERROR=0,vg.TIMEOUT=8,vg.HTTP_ERROR=6,lE.COMPLETE="complete",cE.EventType=Zl,Zl.OPEN="a",Zl.CLOSE="b",Zl.ERROR="c",Zl.MESSAGE="d",gr.prototype.listen=gr.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.La,Ln.prototype.getLastErrorCode=Ln.prototype.Da,Ln.prototype.getStatus=Ln.prototype.ba,Ln.prototype.getResponseJson=Ln.prototype.Qa,Ln.prototype.getResponseText=Ln.prototype.ga,Ln.prototype.send=Ln.prototype.ea;var bE=ka.createWebChannelTransport=function(){return new df},qD=ka.getStatEventTarget=function(){return _g()},D_=ka.ErrorCode=vg,TE=ka.EventType=lE,zD=ka.Event=La,C_=ka.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},WD=ka.FetchXmlHttpFactory=Ed,xg=ka.WebChannel=cE,LT=ka.XhrIo=Ln;const AE="@firebase/firestore";class mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let Wu="9.8.0";const Zu=new Lu.Yd("@firebase/firestore");function SE(){return Zu.logLevel}function ke(n,...e){if(Zu.logLevel<=Lu.in.DEBUG){const t=e.map(ME);Zu.debug(`Firestore (${Wu}): ${n}`,...t)}}function rr(n,...e){if(Zu.logLevel<=Lu.in.ERROR){const t=e.map(ME);Zu.error(`Firestore (${Wu}): ${n}`,...t)}}function bd(n,...e){if(Zu.logLevel<=Lu.in.WARN){const t=e.map(ME);Zu.warn(`Firestore (${Wu}): ${n}`,...t)}}function ME(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function mt(n,e){n||tt()}function ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mr.UNAUTHENTICATED))}shutdown(){}}class KD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YD{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new zn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,we.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new zn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new xE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new mr(e)}}class QD{constructor(e,t,r){this.type="FirstParty",this.user=mr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class JD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new QD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.p=t.token,new NE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function PE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Bi.A=-1;class Rg{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=PE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Ku(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function kE(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new ir(0,0))}static max(){return new ft(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function b_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ng(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class hf{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kt extends hf{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new kt(t)}static emptyPath(){return new kt([])}}const Og=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends hf{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return Og.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}class ff{constructor(e){this.fields=e,e.sort(Wn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ku(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const T_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(n){if(mt(!!n),"string"==typeof n){let e=0;const t=T_.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(n.seconds),nanos:xn(n.nanos)}}function xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wa(n){return"string"==typeof n?Zn.fromBase64String(n):Zn.fromUint8Array(n)}function Pg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function A_(n){const e=n.mapValue.fields.__previous_value__;return Pg(e)?A_(e):e}function sc(n){const e=za(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class FE{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function Td(n){return null==n}function Ad(n){return 0===n&&1/n==-1/0}function kg(n){return"number"==typeof n&&Number.isInteger(n)&&!Ad(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(kt.fromString(e))}static fromName(e){return new $e(kt.fromString(e).popFirst(5))}static empty(){return new $e(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new kt(e.slice()))}}const Yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fg={nullValue:"NULL_VALUE"};function oc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pg(n)?4:x_(n)?9007199254740991:10:tt()}function ho(n,e){if(n===e)return!0;const t=oc(n);if(t!==oc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sc(n).isEqual(sc(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=za(r.timestampValue),d=za(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Wa(n.bytesValue).isEqual(Wa(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return xn(r.geoPointValue.latitude)===xn(o.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return xn(r.integerValue)===xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=xn(r.doubleValue),d=xn(o.doubleValue);return u===d?Ad(u)===Ad(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ku(n.arrayValue.values||[],e.arrayValue.values||[],ho);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(b_(u)!==b_(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ho(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function ac(n,e){return void 0!==(n.values||[]).find(t=>ho(t,e))}function Ka(n,e){if(n===e)return 0;const t=oc(n),r=oc(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=xn(o.integerValue||o.doubleValue),m=xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return S_(n.timestampValue,e.timestampValue);case 4:return S_(sc(n),sc(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Wa(o),m=Wa(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=At(d[w],m[w]);if(0!==b)return b}return At(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=At(xn(o.latitude),xn(u.latitude));return 0!==d?d:At(xn(o.longitude),xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=Ka(d[w],m[w]);if(b)return b}return At(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Yu.mapValue&&u===Yu.mapValue)return 0;if(o===Yu.mapValue)return 1;if(u===Yu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const N=At(m[x],b[x]);if(0!==N)return N;const z=Ka(d[m[x]],w[b[x]]);if(0!==z)return z}return At(m.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function S_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=za(n),r=za(e),o=At(t.seconds,r.seconds);return 0!==o?o:At(t.nanos,r.nanos)}function uc(n){return Lg(n)}function Lg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=za(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wa(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Lg(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Lg(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Qu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vg(n){return!!n&&"integerValue"in n}function Sd(n){return!!n&&"arrayValue"in n}function M_(n){return!!n&&"nullValue"in n}function eC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ug(n){return!!n&&"mapValue"in n}function pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function x_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tC(n){return"nullValue"in n?Fg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qu(Za.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function yr(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qu(Za.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yu:tt()}function R_(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function LE(n,e){const t=Ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ug(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=Wn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=pf(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Ug(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ug(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){qa(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new oi(pf(this.value))}}function N_(n){const e=[];return qa(n.fields,(t,r)=>{const o=new Wn([t]);if(Ug(r)){const u=N_(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new ff(e)}class vn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new vn(e,0,ft.min(),ft.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,ft.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,ft.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,ft.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Bg(n){return n.fields.find(e=>2===e.kind)}function Ns(n){return n.fields.filter(e=>2!==e.kind)}gf.UNKNOWN_ID=-1;class jg{constructor(e,t){this.fieldPath=e,this.kind=t}}class mf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mf(0,Os.min())}}function O_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ft.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Os(o,$e.empty(),e)}function nC(n){return new Os(n.readTime,n.key,-1)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(ft.min(),$e.empty(),-1)}static max(){return new Os(ft.max(),$e.empty(),-1)}}function rC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}class Vn{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new Vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:cn.RED,this.left=null!=o?o:cn.EMPTY,this.right=null!=u?u:cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new cn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return cn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1,cn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new cn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new Vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vi(n){return n.hasNext()?n.getNext():void 0}class fo{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Ps(n,e=null,t=[],r=[],o=null,u=null,d=null){return new fo(n,e,t,r,o,u,d)}function Ju(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+uc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Td(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uc(r)).join(",")),e.P=t}return e.P}function yf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!zg(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ho(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F_(n.startAt,e.startAt)&&F_(n.endAt,e.endAt)}function $g(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hg(n,e){return n.filters.filter(t=>t instanceof Kn&&t.field.isEqual(e))}function BE(n,e,t){let r=Fg,o=!0;for(const u of Hg(n,e)){let d=Fg,m=!0;switch(u.op){case"<":case"<=":d=tC(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Fg}R_({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];R_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Gg(n,e,t){let r=Yu,o=!0;for(const u of Hg(n,e)){let d=Yu,m=!0;switch(u.op){case">=":case">":d=yr(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Yu}LE({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];LE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Kn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new iC(e,t,r):"array-contains"===t?new $E(e,r):"in"===t?new qg(e,r):"not-in"===t?new oC(e,r):"array-contains-any"===t?new HE(e,r):new Kn(e,t,r)}static V(e,t,r){return"in"===t?new jE(e,r):new sC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ka(t,this.value)):null!==t&&oc(this.value)===oc(t)&&this.v(Ka(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class iC extends Kn{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class jE extends Kn{constructor(e,t){super(e,"in",t),this.keys=P_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sC extends Kn{constructor(e,t){super(e,"not-in",t),this.keys=P_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function P_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class $E extends Kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sd(t)&&ac(t.arrayValue,this.value)}}class qg extends Kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ac(this.value.arrayValue,t)}}class oC extends Kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ac(this.value.arrayValue,t)}}class HE extends Kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ac(this.value.arrayValue,r))}}class Ya{constructor(e,t){this.position=e,this.inclusive=t}}class Xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function zg(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function k_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Ka(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function F_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ho(n.position[t],e.position[t]))return!1;return!0}class Qo{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function L_(n,e,t,r,o,u,d,m){return new Qo(n,e,t,r,o,u,d,m)}function lc(n){return new Qo(n)}function Wg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Zg(n){for(const e of n.filters)if(e.S())return e.field;return null}function V_(n){return null!==n.collectionGroup}function xd(n){const e=ze(n);if(null===e.D){e.D=[];const t=Zg(e),r=Wg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Xu(t)),e.D.push(new Xu(Wn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Xu(Wn.keyField(),u))}}}return e.D}function ks(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=Ps(e.path,e.collectionGroup,xd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of xd(e))t.push(new Xu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ya(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ya(e.startAt.position,e.startAt.inclusive):null;e.C=Ps(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function qE(n,e,t){return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _f(n,e){return yf(ks(n),ks(e))&&n.limitType===e.limitType}function zE(n){return`${Ju(ks(n))}|lt:${n.limitType}`}function U_(n){return`Query(target=${function UE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uc(r.value)}`;var r}).join(", ")}]`),Td(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>uc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>uc(t)).join(",")),`Target(${e})`}(ks(n))}; limitType=${n.limitType})`}function B_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=k_(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,xd(t),r)||t.endAt&&!function(o,u,d){const m=k_(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,xd(t),r)));var t,r}function WE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZE(n){return(e,t)=>{let r=!1;for(const o of xd(n)){const u=aC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function aC(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Ka(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function KE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function YE(n){return{integerValue:""+n}}function QE(n,e){return kg(e)?YE(e):KE(n,e)}class Kg{constructor(){this._=void 0}}function uC(n,e,t){return n instanceof cc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof el?j_(n,e):n instanceof tl?$_(n,e):function(r,o){const u=JE(r,o),d=H_(u)+H_(r.k);return Vg(u)&&Vg(r.k)?YE(d):KE(r.M,d)}(n,e)}function lC(n,e,t){return n instanceof el?j_(n,e):n instanceof tl?$_(n,e):t}function JE(n,e){return n instanceof dc?Vg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class cc extends Kg{}class el extends Kg{constructor(e){super(),this.elements=e}}function j_(n,e){const t=G_(e);for(const r of n.elements)t.some(o=>ho(o,r))||t.push(r);return{arrayValue:{values:t}}}class tl extends Kg{constructor(e){super(),this.elements=e}}function $_(n,e){let t=G_(e);for(const r of n.elements)t=t.filter(o=>!ho(o,r));return{arrayValue:{values:t}}}class dc extends Kg{constructor(e,t){super(),this.M=e,this.k=t}}function H_(n){return xn(n.integerValue||n.doubleValue)}function G_(n){return Sd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rd{constructor(e,t){this.field=e,this.transform=t}}class ew{constructor(e,t){this.version=e,this.transformResults=t}}class hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qg{}function Nd(n,e,t){n instanceof Od?function(r,o,u){const d=r.value.clone(),m=nw(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Pd?function(r,o,u){if(!Yg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=nw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(pt(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tw(n,e,t){var o;n instanceof Od?function(r,o,u){if(!Yg(r.precondition,o))return;const d=r.value.clone(),m=rw(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(z_(o),d).setHasLocalMutations()}(n,e,t):n instanceof Pd?function(r,o,u){if(!Yg(r.precondition,o))return;const d=rw(r.fieldTransforms,u,o),m=o.data;m.setAll(pt(r)),m.setAll(d),o.convertToFoundDocument(z_(o),m).setHasLocalMutations()}(n,e,t):Yg(n.precondition,o=e)&&o.convertToNoDocument(ft.min())}function q_(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=JE(r.transform,o||null);null!=u&&(null==t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function cC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ku(t,r,(o,u)=>function XE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof el&&r instanceof el||t instanceof tl&&r instanceof tl?Ku(t.elements,r.elements,ho):t instanceof dc&&r instanceof dc?ho(t.k,r.k):t instanceof cc&&r instanceof cc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function z_(n){return n.isFoundDocument()?n.version:ft.min()}class Od extends Qg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Pd extends Qg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function pt(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nw(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,lC(d,m,t[o]))}return r}function rw(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,uC(u,d,e))}return r}class vf extends Qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class kd extends Qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class dC{constructor(e){this.count=e}}var Rn,Ft;function Nn(n){switch(n){default:return tt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function hC(n){if(void 0===n)return rr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Rn.OK:return ue.OK;case Rn.CANCELLED:return ue.CANCELLED;case Rn.UNKNOWN:return ue.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return ue.INTERNAL;case Rn.UNAVAILABLE:return ue.UNAVAILABLE;case Rn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Rn.NOT_FOUND:return ue.NOT_FOUND;case Rn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Rn.ABORTED:return ue.ABORTED;case Rn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Rn.DATA_LOSS:return ue.DATA_LOSS;default:return tt()}}(Ft=Rn||(Rn={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Ng(this.inner)}size(){return this.innerSize}}const fC=new Vn($e.comparator);function Fs(){return fC}const iw=new Vn($e.comparator);function Jg(...n){let e=iw;for(const t of n)e=e.insert(t.key,t);return e}function Fd(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const sw=new Vn($e.comparator),pC=new dn($e.comparator);function Xt(...n){let e=pC;for(const t of n)e=e.add(t);return e}const gC=new dn(At);function nl(){return gC}class Ef{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,wf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ef(ft.min(),r,nl(),Fs(),Xt())}}class wf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new wf(Zn.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class Xg{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class If{constructor(e,t){this.targetId=e,this.$=t}}class W_{constructor(e,t,r=Zn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Z_{constructor(){this.B=0,this.L=Ld(),this.U=Zn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Xt(),t=Xt(),r=Xt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new wf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ld()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ow{constructor(e){this.nt=e,this.st=new Map,this.it=Fs(),this.rt=aw(),this.ot=new dn(At)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if($g(u))if(0===r){const d=new $e(u.path);this.ct(t,d,vn.newNoDocument(d,ft.min()))}else mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&$g(m.target)){const w=new $e(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,vn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Xt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.wt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Ef(e,t,this.ot,this.it,r);return this.it=Fs(),this.rt=aw(),this.ot=new dn(At),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Z_,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new dn(At),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Z_),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function aw(){return new Vn($e.comparator)}function Ld(){return new Vn($e.comparator)}const Df={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yC{constructor(e,t){this.databaseId=e,this.N=t}}function Cf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(n,e){return n.N?e.toBase64():e.toUint8Array()}function uw(n,e){return Cf(n,e.toTimestamp())}function _r(n){return mt(!!n),ft.fromTimestamp(function(e){const t=za(e);return new ir(t.seconds,t.nanos)}(n))}function Y_(n,e){return(t=n,new kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Q_(n){const e=kt.fromString(n);return mt(gw(e)),e}function bf(n,e){return Y_(n.databaseId,e.path)}function Jo(n,e){const t=Q_(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(vC(t))}function lw(n,e){return Y_(n.databaseId,e)}function _C(n){const e=Q_(n);return 4===e.length?kt.emptyPath():vC(e)}function em(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vC(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function J_(n,e,t){return{name:bf(n,e),fields:t.value.mapValue.fields}}function Tf(n,e,t){const r=Jo(n,e.name),o=_r(e.updateTime),u=new oi({mapValue:{fields:e.fields}}),d=vn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Vd(n,e){let t;if(e instanceof Od)t={update:J_(n,e.key,e.value)};else if(e instanceof vf)t={delete:bf(n,e.key)};else if(e instanceof Pd)t={update:J_(n,e.key,e.data),updateMask:pw(e.fieldMask)};else{if(!(e instanceof kd))return tt();t={verify:bf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof cc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof el)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof tl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof dc)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:uw(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function hc(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?hn.updateTime(_r(o.updateTime)):void 0!==o.exists?hn.exists(o.exists):hn.none():hn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(mt("REQUEST_TIME"===d.setToServerValue),m=new cc):"appendMissingElements"in d?m=new el(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new tl(d.removeAllFromArray.values||[]):"increment"in d?m=new dc(u,d.increment):tt();const w=Wn.fromServerFormat(d.fieldPath);return new Rd(w,m)}(n,o)):[];var o;if(e.update){const o=Jo(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ff((e.updateMask.fieldPaths||[]).map(b=>Wn.fromServerFormat(b)));return new Pd(o,u,d,t,r)}return new Od(o,u,t,r)}if(e.delete){const o=Jo(n,e.delete);return new vf(o,t)}if(e.verify){const o=Jo(n,e.verify);return new kd(o,t)}return tt()}function cw(n,e){return{documents:[lw(n,e.path)]}}function dw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=lw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(x=>function(N){if("=="===N.op){if(eC(N.value))return{unaryFilter:{field:po(N.field),op:"IS_NAN"}};if(M_(N.value))return{unaryFilter:{field:po(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(eC(N.value))return{unaryFilter:{field:po(N.field),op:"IS_NOT_NAN"}};if(M_(N.value))return{unaryFilter:{field:po(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(N.field),op:bC(N.op),value:N.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:po((x=b).field),direction:CC(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.N||Td(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function hw(n){let e=_C(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=X_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Xu(Ud((N=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Td(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Ya((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Ya(x.values||[],!x.before)}(t.endAt)),L_(e,o,d,u,m,"F",w,b)}function X_(n){return n?void 0!==n.unaryFilter?[TC(n)]:void 0!==n.fieldFilter?[fw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>X_(e)).reduce((e,t)=>e.concat(t)):tt():[]}function CC(n){return Df[n]}function bC(n){return mC[n]}function po(n){return{fieldPath:n.canonicalString()}}function Ud(n){return Wn.fromServerFormat(n.fieldPath)}function fw(n){return Kn.create(Ud(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function TC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ud(n.unaryFilter.field);return Kn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ud(n.unaryFilter.field);return Kn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ud(n.unaryFilter.field);return Kn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ud(n.unaryFilter.field);return Kn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function pw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tm(e)),e=AC(n.get(t),e);return tm(e)}function AC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function tm(n){return n+"\x01\x01"}function Xo(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new kt(r)}const ev=["userId","batchId"];function Af(n,e){return[n,ai(e)]}function mw(n,e,t){return[n,ai(e),t]}const SC={},MC=["prefixPath","collectionGroup","readTime","documentId"],tv=["prefixPath","collectionGroup","documentId"],xC=["collectionGroup","readTime","prefixPath","documentId"],yw=["canonicalId","targetId"],RC=["targetId","path"],NC=["path","targetId"],OC=["collectionId","parent"],PC=["indexId","uid"],kC=["uid","sequenceNumber"],FC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LC=["indexId","uid","orderedDocumentKey"],VC=["userId","collectionPath","documentId"],_w=["userId","collectionPath","largestBatchId"],vw=["userId","collectionGroup","largestBatchId"],Ew=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UC=[...Ew,"documentOverlays"],nv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BC=[...nv,"indexConfiguration","indexState","indexEntries"],ww="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Iw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Bd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=ov(r.target.error);this.At.reject(new Sf(e,o))}}static open(e,t,r,o){try{return new Bd(t,e.transaction(o,r))}catch(u){throw new Sf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iv(t)}}class Ls{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ls.Vt((0,Ot.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),pc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ot.hl)())return!1;if(Ls.St())return!0;const e=(0,Ot.z$)(),t=Ls.Vt(e),r=0<t&&t<10,o=Ls.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,we.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Sf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Sf(e,m))},u.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Bd.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),le.reject(x))).toPromise();return b.catch(()=>{}),yield w.Rt,b}catch(w){const b="FirebaseError"!==w.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),u.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rv{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return pc(this.Ft.delete())}}class Sf extends xe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fc(n){return"IndexedDbTransactionError"===n.name}class iv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pc(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),pc(this.store.add(e))}get(e){return pc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),pc(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),pc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new le((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=u=>{const d=ov(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new le((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new rv(m),b=t(m.primaryKey,m.value,w);if(b instanceof le){const x=b.catch(N=>(w.done(),le.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pc(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ov(r.target.error);t(o)}})}let sv=!1;function ov(n){const e=Ls.Vt((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sv||(sv=!0,setTimeout(()=>{throw r},0)),r}}return n}class av extends Iw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ar(n,e){const t=ze(n);return Ls.xt(t.Ht,e)}class nm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Nd(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&tw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&tw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(ft.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Ku(this.mutations,e.mutations,(t,r)=>cC(t,r))&&Ku(this.baseMutations,e.baseMutations,(t,r)=>cC(t,r))}}class Dw{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=sw;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Dw(e,t,r,o)}}class uv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class go{constructor(e,t,r,o,u=ft.min(),d=ft.min(),m=Zn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cw{constructor(e){this.Jt=e}}function $d(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hd(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Hd(e.version)}}var o,u;return r}function rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(n){const e=new ir(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function Gd(n,e){const t=(e.baseMutations||[]).map(u=>hc(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>hc(n.Jt,u)),o=ir.fromMillis(e.localWriteTimeMs);return new nm(e.batchId,o,t,r)}function Mf(n){const e=rl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rl(n.lastLimboFreeSnapshotVersion):ft.min();let r;var o;return void 0!==n.query.documents?(mt(1===(o=n.query).documents.length),r=ks(lc(_C(o.documents[0])))):r=ks(hw(n.query)),new go(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Zn.fromBase64String(n.resumeToken))}function bw(n,e){const t=Hd(e.snapshotVersion),r=Hd(e.lastLimboFreeSnapshotVersion);let o;o=$g(e.target)?cw(n.Jt,e.target):dw(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ju(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function lv(n){const e=hw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qE(e,e.limit,"L"):e}function im(n,e){return new uv(e.largestBatchId,hc(n.Jt,e.overlayMutation))}function cv(n,e){const t=e.path.lastSegment();return[n,ai(e.path.popLast()),t]}class dv{getBundleMetadata(e,t){return xf(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:rl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return xf(e).put({bundleId:(r=t).id,createTime:Hd(_r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return qd(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:lv(o.bundledQuery),readTime:rl(o.readTime)};var o})}saveNamedQuery(e,t){return qd(e).put({name:(r=t).name,readTime:Hd(_r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xf(n){return Ar(n,"bundles")}function qd(n){return Ar(n,"namedQueries")}class hv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new hv(e,t.uid||"")}getOverlay(e,t){return zd(e).get(cv(this.userId,t)).next(r=>r?im(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new uv(t,d);o.push(this.Xt(e,m))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ai(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(zd(e).Qt("collectionPathOverlayIndex",m))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Fd(),u=ai(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zd(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=im(this.M,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Fd();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zd(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,b,x)=>{const N=im(this.M,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return zd(e).put(function(r,o,u){const[d,m,w]=cv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function zd(n){return Ar(n,"documentOverlays")}class il{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ad(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?x_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function jC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Tw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=jC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}il.fe=new il;class fv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Tw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Tw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class $C{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class BT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Rf{constructor(){this.De=new fv,this.Ce=new $C(this.De),this.xe=new BT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class gc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,r)}}function Vs(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pv(n.arrayValue,e.arrayValue),0!==t?t:(t=pv(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function pv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Wd{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Bg(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ns(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class jT{constructor(){this.qe=new sm}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Os.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class sm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new dn(kt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new dn(kt.comparator)).toArray()}}const om=new Uint8Array(0);class $T{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new sm,this.Ge=new Qa(r=>Ju(r),(r,o)=>yf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ai(o)};return gv(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[kE(t),""],!1,!0);return gv(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Xo(d.parent))}return r})}addFieldIndex(e,t){const r=Nf(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Nf(e),o=Zd(e),u=am(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=am(e);let o=!0;const u=new Map;return le.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Xt();const m=[];return le.forEach(u,(w,b)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Gt=>`${Gt.fieldPath}:${Gt.kind}`).join(",")}`} to execute ${Ju(t)}`);const N=function(Gt,St){const $t=Bg(St);if(void 0===$t)return null;for(const nn of Hg(Gt,$t.fieldPath))switch(nn.op){case"array-contains-any":return nn.value.arrayValue.values||[];case"array-contains":return[nn.value]}return null}(b,w),z=function(Gt,St){const $t=new Map;for(const nn of Ns(St))for(const Hi of Hg(Gt,nn.fieldPath))switch(Hi.op){case"==":case"in":$t.set(nn.fieldPath.canonicalString(),Hi.value);break;case"not-in":case"!=":return $t.set(nn.fieldPath.canonicalString(),Hi.value),Array.from($t.values())}return null}(b,w),ee=function(Gt,St){const $t=[];let nn=!0;for(const Hi of Ns(St)){const S0=0===Hi.kind?BE(Gt,Hi.fieldPath,Gt.startAt):Gg(Gt,Hi.fieldPath,Gt.startAt);$t.push(S0.value),nn&&(nn=S0.inclusive)}return new Ya($t,nn)}(b,w),ge=function(Gt,St){const $t=[];let nn=!0;for(const Hi of Ns(St)){const S0=0===Hi.kind?Gg(Gt,Hi.fieldPath,Gt.endAt):BE(Gt,Hi.fieldPath,Gt.endAt);$t.push(S0.value),nn&&(nn=S0.inclusive)}return new Ya($t,nn)}(b,w),Ve=this.We(w,b,ee),nt=this.We(w,b,ge),Bt=this.ze(w,b,z),jt=this.He(w.indexId,N,Ve,ee.inclusive,nt,ge.inclusive,Bt);return le.forEach(jt,Gt=>r.Gt(Gt,t.limit).next(St=>{St.forEach($t=>{const nn=$e.fromSegments($t.documentKey);d.has(nn)||(d=d.add(nn),m.push(nn))})}))}).next(()=>m)}return le.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const z=t?this.Je(t[N/b]):om,ee=this.Ye(e,z,r[N%b],o),ge=this.Xe(e,z,u[N%b],d),Ve=m.map(nt=>this.Ye(e,z,nt,!0));x.push(...this.createRange(ee,ge,Ve))}return x}Ye(e,t,r,o){const u=new gc(e,$e.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new gc(e,$e.empty(),t,r);return o?u.ke():u}je(e,t){const r=new Wd(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return le.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new dn(Wn.comparator),w=!1;for(const b of d.filters){const x=b;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:m=m.add(x.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Rf;for(const o of Ns(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);il.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Rf;return il.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Rf;return il.fe.Zt(Qu(this.databaseId,t),r.Ne(function(o){const u=Ns(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Rf);let u=0;for(const d of Ns(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&Sd(m))o=this.nn(o,d,m);else{const b=w.Ne(d.kind);il.fe.Zt(m,b)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Rf;w.seed(m.Se()),il.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Kn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Nf(e),o=Zd(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return le.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(b,x){const N=x?new mf(x.sequenceNumber,new Os(rl(x.readTime),new $e(Xo(x.documentKey)),x.largestBatchId)):mf.empty(),z=b.fields.map(([ee,ge])=>new jg(Wn.fromServerFormat(ee),ge));return new gf(b.indexId,b.collectionGroup,z,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Nf(e),u=Zd(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>le.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Hd((z=r).readTime),documentKey:ai(z.documentKey.path),largestBatchId:z.largestBatchId});var z})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?le.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),le.forEach(m,w=>this.on(e,o,w).next(b=>{const x=this.un(u,w);return b.isEqual(x)?le.resolve():this.an(e,u,w,b,x)}))))})}cn(e,t,r,o){return am(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return am(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=am(e);let u=new dn(Vs);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new gc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new dn(Vs);const o=this.Ze(t,e);if(null==o)return r;const u=Bg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Sd(d))for(const m of d.arrayValue.values||[])r=r.add(new gc(t.indexId,e.key,this.Je(m),o))}else r=r.add(new gc(t.indexId,e.key,om,o));return r}an(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,x,N){const z=m.getIterator(),ee=w.getIterator();let ge=vi(z),Ve=vi(ee);for(;ge||Ve;){let nt=!1,Bt=!1;if(ge&&Ve){const jt=b(ge,Ve);jt<0?Bt=!0:jt>0&&(nt=!0)}else null!=ge?Bt=!0:nt=!0;nt?(x(Ve),Ve=vi(ee)):Bt?(N(ge),ge=vi(z)):(ge=vi(z),Ve=vi(ee))}}(o,u,Vs,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),le.waitFor(d)}rn(e){let t=1;return Zd(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Vs(d,m)).filter((d,m,w)=>!m||0!==Vs(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Vs(d,e),w=Vs(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,om,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,om,[]]));return u}getMinOffset(e,t){let r;return le.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||rC(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Os.min()})).next(()=>r)}}function gv(n){return Ar(n,"collectionParents")}function am(n){return Ar(n,"indexEntries")}function Nf(n){return Ar(n,"indexConfiguration")}function Zd(n){return Ar(n,"indexState")}const Aw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ei{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,z)=>(m++,z.delete()));u.push(w.next(()=>{mt(1===m)}));const b=[];for(const x of t.mutations){const N=mw(e,x.key.path,t.batchId);u.push(o.delete(N)),b.push(x.key)}return le.waitFor(u).next(()=>b)}function um(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);class mv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new mv(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Kd(e),d=sl(e);return d.add({}).next(m=>{mt("number"==typeof m);const w=new nm(m,t,r,o),b=function(z,ee,ge){const Ve=ge.baseMutations.map(Bt=>Vd(z.Jt,Bt)),nt=ge.mutations.map(Bt=>Vd(z.Jt,Bt));return{userId:ee,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Ve,mutations:nt}}(this.M,this.userId,w),x=[];let N=new dn((z,ee)=>At(z.canonicalString(),ee.canonicalString()));for(const z of o){const ee=mw(this.userId,z.key.path,m);N=N.add(z.key.path.popLast()),x.push(d.put(b)),x.push(u.put(ee,SC))}return N.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),le.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return sl(e).get(t).next(r=>r?(mt(r.userId===this.userId),Gd(this.M,r)):null)}fn(e,t){return this.ln[t]?le.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return sl(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(mt(m.batchId>=r),u=Gd(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Gd(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Af(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Kd(e).Wt({range:o},(d,m,w)=>{const[b,x,N]=d,z=Xo(x);if(b===this.userId&&t.path.isEqual(z))return sl(e).get(N).next(ee=>{if(!ee)throw tt();mt(ee.userId===this.userId),u.push(Gd(this.M,ee))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(At);const o=[];return t.forEach(u=>{const d=Af(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Kd(e).Wt({range:m},(b,x,N)=>{const[z,ee,ge]=b,Ve=Xo(ee);z===this.userId&&u.path.isEqual(Ve)?r=r.add(ge):N.done()});o.push(w)}),le.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Af(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new dn(At);return Kd(e).Wt({range:d},(w,b,x)=>{const[N,z,ee]=w,ge=Xo(z);N===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(m=m.add(ee)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(sl(e).get(u).next(d=>{if(null===d)throw tt();mt(d.userId===this.userId),r.push(Gd(this.M,d))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Sw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Kd(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Xo(u[1]);o.push(w)}else m.done()}).next(()=>{mt(0===o.length)})})}containsKey(e,t){return Mw(e,this.userId,t)}wn(e){return xw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mw(n,e,t){const r=Af(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Kd(n).Wt({range:u,jt:!0},(m,w,b)=>{const[x,N,z]=m;x===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function sl(n){return Ar(n,"mutations")}function Kd(n){return Ar(n,"documentMutations")}function xw(n){return Ar(n,"mutationQueues")}class mc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new mc(0)}static yn(){return new mc(-1)}}class Of{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new mc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>ft.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yc(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return yc(e).Wt((d,m)=>{const w=Mf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>le.waitFor(u)).next(()=>o)}forEachTarget(e,t){return yc(e).Wt((r,o)=>{const u=Mf(o);t(u)})}pn(e){return yv(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}In(e,t){return yv(e).put("targetGlobalKey",t)}Tn(e,t){return yc(e).put(bw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ju(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yc(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const b=Mf(m);yf(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ja(e);return t.forEach(d=>{const m=ai(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ja(e);return le.forEach(t,u=>{const d=ai(u.path);return le.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ja(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ja(e);let u=Xt();return o.Wt({range:r,jt:!0},(d,m,w)=>{const b=Xo(d[1]),x=new $e(b);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=ai(t.path),o=IDBKeyRange.bound([r],[kE(r)],!1,!0);let u=0;return Ja(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return yc(e).get(t).next(r=>r?Mf(r):null)}}function yc(n){return Ar(n,"targets")}function yv(n){return Ar(n,"targetGlobal")}function Ja(n){return Ar(n,"targetDocuments")}function ol(n){return lm.apply(this,arguments)}function lm(){return lm=(0,we.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==ww)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),lm.apply(this,arguments)}function _v([n,e],[t,r]){const o=At(n,t);return 0===o?At(e,r):o}class HC{constructor(e){this.An=e,this.buffer=new dn(_v),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_v(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,we.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){fc(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ol(o)}yield t.Sn(e)}))}}class GC{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Bi.A);const r=new HC(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Aw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Aw):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),SE()<=Lu.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class qC{constructor(e,t){this.db=e,this.garbageCollector=new GC(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return cm(e,r)}removeReference(e,t,r){return cm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cm(e,t)}On(e,t){return function(r,o){let u=!1;return xw(r).zt(d=>Mw(r,d,o).next(m=>(m&&(u=!0),le.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,ft.min()),Ja(e).delete([0,ai(d.path)])))});o.push(w)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cm(e,t)}Mn(e,t){const r=Ja(e);let o,u=Bi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(u!==Bi.A&&t(new $e(Xo(o)),u),u=b,o=w):u=Bi.A}).next(()=>{u!==Bi.A&&t(new $e(Xo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cm(n,e){return Ja(n).put((r=n.currentSequenceNumber,{targetId:0,path:ai(e.path),sequenceNumber:r}));var r}class Nw{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pf{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ui(e).put(r)}removeEntry(e,t,r){return ui(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],rm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return ui(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kf(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return ui(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kf(t))},(o,u)=>{r={document:this.$n(t,u),size:um(u)}}).next(()=>r)}getEntries(e,t){let r=Fs();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Fs(),o=new Vn($e.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,um(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return le.resolve();let o=new dn(Yd);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(kf(o.first()),kf(o.last())),d=o.getIterator();let m=d.getNext();return ui(e).Wt({index:"documentKeyIndex",range:u},(w,b,x)=>{const N=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Yd(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?x.Ut(kf(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ui(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Fs();for(const w of d){const b=this.$n($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Fs();const d=hm(t,r),m=hm(t,Os.max());return ui(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,x)=>{const N=this.$n($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new zC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dm(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Fn(e,t){return dm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function jd(n,e){let t;if(e.document)t=Tf(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=rl(e.noDocument.readTime);t=vn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=$e.fromSegments(e.unknownDocument.path),o=rl(e.unknownDocument.version);t=vn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new ir(r[0],r[1]);return ft.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return vn.newInvalidDocument(e)}}class zC extends Nw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Qa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new dn((u,d)=>At(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=$d(this.Kn.M,d);o=o.add(u.path.popLast()),r+=um(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=$d(this.Kn.M,d.convertToNoDocument(ft.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function dm(n){return Ar(n,"remoteDocumentGlobal")}function ui(n){return Ar(n,"remoteDocumentsV14")}function kf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hm(n,e){const t=e.documentKey.path.toArray();return[n,rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Yd(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=At(t[u],r[u]),o)return o;return o=At(t.length,r.length),o||(o=At(t[t.length-2],r[r.length-2]),o||At(t[t.length-1],r[r.length-1]))}class WC{constructor(e){this.M=e}kt(e,t,r,o){const u=new Bd("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ev,{unique:!0}),m.createObjectStore("documentMutations"),Ow(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=le.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ow(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ev,{unique:!0});const x=w.store("mutations"),N=b.map(z=>x.put(z));return le.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:VC});w.createIndex("collectionPathOverlayIndex",_w,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",vw,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:MC});w.createIndex("documentKeyIndex",tv),w.createIndex("collectionGroupIndex",xC)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:PC}).createIndex("sequenceNumberIndex",kC,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:FC}).createIndex("documentKeyIndex",LC,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=um(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>le.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>le.forEach(m,w=>{mt(w.userId===u.userId);const b=Gd(this.M,w);return Sw(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new kt(d),b=[0,ai(w)];u.push(t.get(b).next(x=>x?le.resolve():t.put({targetId:0,path:ai(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:OC});const r=t.store("collectionParents"),o=new sm,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ai(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new kt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],b)=>{const x=Xo(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Mf(o),d=bw(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new $e(kt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>le.waitFor(o))}}function Ow(n){n.createObjectStore("targetDocuments",{keyPath:RC}).createIndex("documentTargetsIndex",NC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yw,{unique:!0}),n.createObjectStore("targetGlobal")}const vv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qd{constructor(e,t,r,o,u,d,m,w,b,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=b,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=z=>Promise.resolve(),!Qd.vt())throw new xe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qC(this,o),this.hs=t+"main",this.M=new Cw(w),this.ls=new Ls(this.hs,this.ts,new WC(this.M)),this.fs=new Of(this.referenceDelegate,this.M),this.ds=new Pf(this.M),this._s=new dv,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,vv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Bi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(fc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return al(e).get("owner").next(t=>le.resolve(this.Ps(t)))}Vs(e){return fm(e).delete(this.clientId)}vs(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ar(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return le.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?le.resolve(!0):al(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,vv);return!1}}return!(!this.networkEnabled||!this.inForeground)||fm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new av(t,Bi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>fm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return mv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $T(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return hv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?BC:13===d?nv:12===d?UC:11===d?Ew:void tt();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new av(w,this.es?this.es.next():Bi.A),"readwrite-primary"===t?this.Es(m).next(b=>!!b||this.As(m)).next(b=>{if(!b)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(ue.FAILED_PRECONDITION,ww);return r(m)}).next(b=>this.bs(m).next(()=>b)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return al(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ue.FAILED_PRECONDITION,vv)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return al(e).put("owner",t)}static vt(){return Ls.vt()}Rs(e){const t=al(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function al(n){return Ar(n,"owner")}function fm(n){return Ar(n,"clientMetadata")}function Ev(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Pw{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):V_(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let o=Jg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Jg();return this.indexManager.getCollectionParents(e,o).next(d=>le.forEach(d,m=>{const w=(b=t,x=m.child(o),new Qo(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.zs(e,w,r).next(b=>{b.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let b=o.get(w);null==b&&(b=vn.newInvalidDocument(w),o=o.insert(w,b)),tw(m,b,d.localWriteTime),b.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{B_(t,d)||(o=o.remove(u))}),o))}}class pm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Xt(),o=Xt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pm(e,t.fromCache,r,o)}}class gm{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return le.resolve(null)}ei(e,t,r,o){return function GE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(ft.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(SE()<=Lu.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),U_(t)),this.ri(e,d,t,O_(o,-1)))})}si(e,t){let r=new dn(ZE(e));return t.forEach((o,u)=>{B_(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return SE()<=Lu.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",U_(t)),this.Zs.Qs(e,t,Os.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class kw{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Vn(At),this.ai=new Qa(u=>Ju(u),yf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Pw(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Fw(n,e,t,r){return new kw(n,e,t,r)}function Lw(n,e){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,we.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Xt();for(const b of o){d.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}return t.fi.Ks(r,w).next(b=>({di:b,removedBatchIds:d,addedBatchIds:m}))})})}),Vw.apply(this,arguments)}function wv(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const x=w.batch,N=x.keys();let z=le.resolve();return N.forEach(ee=>{z=z.next(()=>b.getEntry(m,ee)).next(ge=>{const Ve=w.docVersions.get(ee);mt(null!==Ve),ge.version.compareTo(Ve)<0&&(x.applyToRemoteDocument(ge,w),ge.isValidDocument()&&(ge.setReadTime(w.commitVersion),b.addEntry(ge)))})}),z.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function mm(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Uw(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((b,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(u,b.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,x)));let z=N.withSequenceNumber(u.currentSequenceNumber);var ee,ge,Ve;e.targetMismatches.has(x)?z=z.withResumeToken(Zn.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):b.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(b.resumeToken,r)),o=o.insert(x,z),ge=z,Ve=b,(0===(ee=N).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,z))});let w=Fs();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(ym(u,d,e.documentUpdates).next(b=>{w=b})),!r.isEqual(ft.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return le.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function ym(n,e,t){let r=Xt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Fs();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(ft.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function Iv(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Jd(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,le.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new go(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Xd(n,e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,we.Z)(function*(n,e,t){const r=ze(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!fc(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Dv.apply(this,arguments)}function _m(n,e,t){const r=ze(n);let o=ft.min(),u=Xt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const x=ze(m),N=x.ai.get(b);return void 0!==N?le.resolve(x.ui.get(N)):x.fs.getTargetData(w,b)}(r,d,ks(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:ft.min(),t?u:Xt())).next(m=>(bv(r,WE(e),m),{documents:m,_i:u})))}function Cv(n,e){const t=ze(n),r=ze(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function vm(n,e){const t=ze(n),r=t.ci.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,O_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(bv(t,e,o),o))}function bv(n,e,t){let r=ft.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Em(){return Em=(0,we.Z)(function*(n,e,t,r){const o=ze(n);let u=Xt(),d=Fs();for(const b of t){const x=e.wi(b.metadata.name);b.document&&(u=u.add(x));const N=e.mi(b);N.setReadTime(e.gi(b.metadata.readTime)),d=d.insert(x,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield Jd(o,(b=r,ks(lc(kt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>ym(b,m,d).next(x=>(m.apply(b),x)).next(x=>o.fs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.fs.addMatchingKeys(b,u,w.targetId)).next(()=>o.fi.Gs(b,x)).next(()=>x)))}),Em.apply(this,arguments)}function Bw(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,we.Z)(function*(n,e,t=Xt()){const r=yield Jd(n,ks(lv(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=_r(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Zn.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),Tv.apply(this,arguments)}class jw{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return le.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:_r(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:lv(r.bundledQuery),readTime:_r(r.readTime)}),le.resolve();var r}}class $w{constructor(){this.overlays=new Vn($e.comparator),this.Ii=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=Fd(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Vn((b,x)=>b-x);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=u.get(b.largestBatchId);null===x&&(x=Fd(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=Fd(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,x)=>m.set(b,x)),!(m.size()>=o)););return le.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new uv(t,r));let u=this.Ii.get(t);void 0===u&&(u=Xt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Av{constructor(){this.Ti=new dn(vr.Ei),this.Ai=new dn(vr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new vr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new vr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new kt([])),r=new vr(t,e),o=new vr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new kt([])),r=new vr(t,e),o=new vr(t,e+1);let u=Xt();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new vr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||At(e.Ci,t.Ci)}static Ri(e,t){return At(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class KC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new dn(vr.Ei)}checkEmpty(e){return le.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new nm(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new vr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return le.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vr(t,0),o=new vr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(At);return t.forEach(o=>{const u=new vr(o,0),d=new vr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),le.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new vr(new $e(u),0);let m=new dn(At);return this.Ni.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.Ci)),!0)},d),le.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return le.forEach(t.mutations,o=>{const u=new vr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new vr(t,0),o=this.Ni.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class wi{constructor(e){this.$i=e,this.docs=new Vn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Fs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))}),le.resolve(r)}getAllFromCollection(e,t,r){let o=Fs();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||rC(nC(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Bi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eh(this)}getSize(e){return le.resolve(this.size)}}class eh extends Nw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class YC{constructor(e){this.persistence=e,this.Li=new Qa(t=>Ju(t),yf),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Av,this.targetCount=0,this.Ki=mc.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),le.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tn(t),le.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.qi.containsKey(t))}}class QC{constructor(e,t){this.Gi={},this.overlays={},this.es=new Bi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new YC(this),this.indexManager=new jT,this.ds=new wi(r=>this.referenceDelegate.Qi(r)),this.M=new Cw(t),this._s=new jw(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $w,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new KC(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new HT(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return le.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class HT extends Iw{constructor(e){super(),this.currentSequenceNumber=e}}class _c{constructor(e){this.persistence=e,this.Hi=new Av,this.Ji=null}static Yi(e){return new _c(e)}get Xi(){if(this.Ji)return this.Ji;throw tt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xi,r=>{const o=$e.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,ft.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return le.or([()=>le.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Hw(n,e){return`firestore_clients_${n}_${e}`}function wm(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sv(n,e){return`firestore_targets_${n}_${e}`}class Ff{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new Ff(e,t,o.state,u):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Lf(e,r.state,o):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=nl();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=kg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Im(e,u):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vf{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vf(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Dm{constructor(){this.activeTargetIds=nl()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cm{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Vn(At),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Hw(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Dm),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(Hw(e.persistenceKey,o));if(u){const d=Im.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Sv(this.persistenceKey,e));if(r){const o=Lf.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Bi.A;if(null!=u)try{const m=JSON.parse(u);mt("number"==typeof m),d=m}catch(m){rr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Bi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new Ff(this.currentUser,e,t,r),u=wm(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=wm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=Sv(this.persistenceKey,e),u=new Lf(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Im.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Ff.tr(new mr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Lf.tr(o,t)}pr(e){return Vf.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=nl();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Uf{constructor(){this.Ur=new Dm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Dm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mv{Kr(e){}shutdown(){}}class JC{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Gw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class XC{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class qw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);ke("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw bd("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${Gw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new LT;m.listenOnce(TE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case D_.NO_ERROR:const b=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case D_.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),d(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case D_.HTTP_ERROR:const x=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const z=function(ee){const ge=ee.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(ge)>=0?ge:ue.UNKNOWN}(N.status);d(new xe(z,N.message))}else d(new xe(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bE(),d=qD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new WD({})),this.lo(m.initMessageHeaders,t,r),(0,Ot.uI)()||(0,Ot.b$)()||(0,Ot.d)()||(0,Ot.w1)()||(0,Ot.Mn)()||(0,Ot.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let x=!1,N=!1;const z=new XC({Jr:ge=>{N?ke("Connection","Not sending because WebChannel is closed:",ge):(x||(ke("Connection","Opening WebChannel transport."),b.open(),x=!0),ke("Connection","WebChannel sending:",ge),b.send(ge))},Yr:()=>b.close()}),ee=(ge,Ve,nt)=>{ge.listen(Ve,Bt=>{try{nt(Bt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return ee(b,xg.EventType.OPEN,()=>{N||ke("Connection","WebChannel transport opened.")}),ee(b,xg.EventType.CLOSE,()=>{N||(N=!0,ke("Connection","WebChannel transport closed"),z.ro())}),ee(b,xg.EventType.ERROR,ge=>{N||(N=!0,bd("Connection","WebChannel transport errored:",ge),z.ro(new xe(ue.UNAVAILABLE,"The operation could not be completed")))}),ee(b,xg.EventType.MESSAGE,ge=>{var Ve;if(!N){const nt=ge.data[0];mt(!!nt);const Bt=nt,jt=Bt.error||(null===(Ve=Bt[0])||void 0===Ve?void 0:Ve.error);if(jt){ke("Connection","WebChannel received error:",jt);const Gt=jt.status;let St=function(nn){const Hi=Rn[nn];if(void 0!==Hi)return hC(Hi)}(Gt),$t=jt.message;void 0===St&&(St=ue.INTERNAL,$t="Unknown error status: "+Gt+" with message "+jt.message),N=!0,z.ro(new xe(St,$t)),b.close()}else ke("Connection","WebChannel received:",nt),z.oo(nt)}}),ee(d,zD.STAT_EVENT,ge=>{ge.stat===C_.PROXY?ke("Connection","Detected buffering proxy"):ge.stat===C_.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.io()},0),z}}function Bf(){return"undefined"!=typeof window?window:null}function jf(){return"undefined"!=typeof document?document:null}function $f(n){return new yC(n,!0)}class Hf{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class bm{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Hf(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,we.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GT extends bm{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function wC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.N?(mt(void 0===b||"string"==typeof b),Zn.fromBase64String(b||"")):(mt(void 0===b||b instanceof Uint8Array),Zn.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?ue.UNKNOWN:hC(w.code);return new xe(b,w.message||"")}(d);t=new W_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Jo(n,r.document.name),u=_r(r.document.updateTime),d=new oi({mapValue:{fields:r.document.fields}}),m=vn.newFoundDocument(o,u,d);t=new Xg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Jo(n,r.document),u=r.readTime?_r(r.readTime):ft.min(),d=vn.newNoDocument(o,u);t=new Xg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Jo(n,r.document);t=new Xg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new dC(r.count||0);t=new If(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return ft.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ft.min():u.readTime?_r(u.readTime):ft.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=em(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=$g(m)?{documents:cw(o,m)}:{query:dw(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=K_(o,u.resumeToken):u.snapshotVersion.compareTo(ft.min())>0&&(d.readTime=Cf(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function DC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=em(this.M),t.removeTarget=e,this.Lo(t)}}class eb extends bm{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function IC(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let u=_r(r.updateTime?r.updateTime:o);return u.isEqual(ft.min())&&(u=_r(o)),new ew(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.tu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=em(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vd(this.M,r))};this.Lo(t)}}class tb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class zw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(rr(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Ww{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,we.Z)(function*(){var w;Xa(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,we.Z)(function*(b){const x=ze(b);x.wu.add(4),yield vc(x),x.yu.set("Unknown"),x.wu.delete(4),yield Gf(x)}),function(b){return w.apply(this,arguments)})(d))}))}),this.yu=new zw(r,o)}}function Gf(n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,we.Z)(function*(n){if(Xa(n))for(const e of n.mu)yield e(!0)}),Tm.apply(this,arguments)}function vc(n){return xv.apply(this,arguments)}function xv(){return xv=(0,we.Z)(function*(n){for(const e of n.mu)yield e(!1)}),xv.apply(this,arguments)}function Am(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Mm(t)?Sm(t):Zf(t).Mo()&&Rv(t,e))}function th(n,e){const t=ze(n),r=Zf(t);t._u.delete(e),r.Mo()&&Nv(t,e),0===t._u.size&&(r.Mo()?r.$o():Xa(t)&&t.yu.set("Unknown"))}function Rv(n,e){n.pu.Z(e.targetId),Zf(n).Ho(e)}function Nv(n,e){n.pu.Z(e),Zf(n).Jo(e)}function Sm(n){n.pu=new ow({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Zf(n).start(),n.yu.au()}function Mm(n){return Xa(n)&&!Zf(n).ko()&&n._u.size>0}function Xa(n){return 0===ze(n).wu.size}function Zw(n){n.pu=void 0}function nb(n){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,we.Z)(function*(n){n._u.forEach((e,t)=>{Rv(n,e)})}),Kw.apply(this,arguments)}function Yw(n,e){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,we.Z)(function*(n,e){Zw(n),Mm(n)?(n.yu.lu(e),Sm(n)):n.yu.set("Unknown")}),Qw.apply(this,arguments)}function qT(n,e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,we.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof W_&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ov(n,r)}else if(e instanceof Xg?n.pu.ut(e):e instanceof If?n.pu._t(e):n.pu.ht(e),!t.isEqual(ft.min()))try{const r=yield mm(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o._u.get(w);b&&o._u.set(w,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(Zn.EMPTY_BYTE_STRING,w.snapshotVersion)),Nv(o,m);const b=new go(w.target,m,1,w.sequenceNumber);Rv(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Ov(n,r)}var r}),Jw.apply(this,arguments)}function Ov(n,e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,we.Z)(function*(n,e,t){if(!fc(e))throw e;n.wu.add(1),yield vc(n),n.yu.set("Offline"),t||(t=()=>mm(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Gf(n)}))}),Xw.apply(this,arguments)}function rb(n,e){return e().catch(t=>Ov(n,t,e))}function qf(n){return eI.apply(this,arguments)}function eI(){return eI=(0,we.Z)(function*(n){const e=ze(n),t=Ec(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;xm(e);)try{const o=yield Iv(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,zT(e,o)}catch(o){yield Ov(e,o)}Pv(e)&&Rm(e)}),eI.apply(this,arguments)}function xm(n){return Xa(n)&&n.du.length<10}function zT(n,e){n.du.push(e);const t=Ec(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Pv(n){return Xa(n)&&!Ec(n).ko()&&n.du.length>0}function Rm(n){Ec(n).start()}function tI(n){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,we.Z)(function*(n){Ec(n).nu()}),Nm.apply(this,arguments)}function WT(n){return zf.apply(this,arguments)}function zf(){return zf=(0,we.Z)(function*(n){const e=Ec(n);for(const t of n.du)e.Zo(t.mutations)}),zf.apply(this,arguments)}function nI(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,we.Z)(function*(n,e,t){const r=n.du.shift(),o=Dw.from(r,e,t);yield rb(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield qf(n)}),Om.apply(this,arguments)}function rI(n,e){return iI.apply(this,arguments)}function iI(){return iI=(0,we.Z)(function*(n,e){var t;e&&Ec(n).Xo&&(yield(t=(0,we.Z)(function*(r,o){if(Nn(u=o.code)&&u!==ue.ABORTED){const d=r.du.shift();Ec(r).Fo(),yield rb(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield qf(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Pv(n)&&Rm(n)}),iI.apply(this,arguments)}function kv(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,we.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Xa(t);t.wu.add(3),yield vc(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Gf(t)}),Fv.apply(this,arguments)}function Wf(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,we.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield Gf(t)):e||(t.wu.add(2),yield vc(t),t.yu.set("Unknown"))}),Lv.apply(this,arguments)}function Zf(n){return n.Iu||(n.Iu=function(e,t,r){const o=ze(e);return o.iu(),new GT(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:nb.bind(null,n),eo:Yw.bind(null,n),zo:qT.bind(null,n)}),n.mu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Fo(),Mm(n)?Sm(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Zw(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Ec(n){return n.Tu||(n.Tu=function(e,t,r){const o=ze(e);return o.iu(),new eb(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:tI.bind(null,n),eo:rI.bind(null,n),eu:WT.bind(null,n),tu:nI.bind(null,n)}),n.mu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Tu.Fo(),yield qf(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class sI{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new sI(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(n,e){if(rr("AsyncQueue",`${e}: ${n}`),fc(n))return new xe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class rh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Jg(),this.sortedSet=new Vn(this.comparator)}static emptySet(e){return new rh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new rh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oI{constructor(){this.Eu=new Vn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kf{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Kf(e,t,rh.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class ib{constructor(){this.Ru=void 0,this.listeners=[]}}class Vv{constructor(){this.queries=new Qa(e=>zE(e),_f),this.onlineState="Unknown",this.bu=new Set}}function Uv(n,e){return ss.apply(this,arguments)}function ss(){return ss=(0,we.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new ib),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=nh(d,`Initialization of query '${U_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Qf(t)}),ss.apply(this,arguments)}function Bv(n,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,we.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Yf.apply(this,arguments)}function sb(n,e){const t=ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&Qf(t)}function ob(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Qf(n){n.bu.forEach(e=>{e.next()})}class Pm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Kf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Kf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class aI{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class uI{constructor(e){this.M=e}wi(e){return Jo(this.M,e)}mi(e){return e.metadata.exists?Tf(this.M,e.document,!1):vn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return _r(e)}}class lI{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jv(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new uI(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Xt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function ZC(n,e,t,r){return Em.apply(this,arguments)}(e.localStore,new uI(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Bw(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cI{constructor(e){this.key=e}}class dI{constructor(e){this.key=e}}class km{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Xt(),this.mutatedKeys=Xt(),this.Gu=ZE(e),this.Qu=new rh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new oI,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const z=o.get(x),ee=B_(this.query,N)?N:null,ge=!!z&&this.mutatedKeys.has(z.key),Ve=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let nt=!1;z&&ee?z.data.isEqual(ee.data)?ge!==Ve&&(r.track({type:3,doc:ee}),nt=!0):this.Hu(z,ee)||(r.track({type:2,doc:ee}),nt=!0,(w&&this.Gu(ee,w)>0||b&&this.Gu(ee,b)<0)&&(m=!0)):!z&&ee?(r.track({type:0,doc:ee}),nt=!0):z&&!ee&&(r.track({type:1,doc:z}),nt=!0,(w||b)&&(m=!0)),nt&&(ee?(d=d.add(ee),u=Ve?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,x)=>function(N,z){const ee=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return ee(N)-ee(z)}(b.type,x.type)||this.Gu(b.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Kf(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new dI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new cI(r))}),t}ta(e){this.Uu=e._i,this.Ku=Xt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Kf.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class mo{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ab{constructor(e){this.key=e,this.na=!1}}class ZT{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Qa(m=>zE(m),_f),this.ra=new Map,this.oa=new Set,this.ua=new Vn($e.comparator),this.aa=new Map,this.ca=new Av,this.ha={},this.la=new Map,this.fa=mc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ub(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,we.Z)(function*(n,e){const t=DI(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield Jd(t.localStore,ks(e));t.isPrimaryClient&&Am(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield $v(t,e,r,"current"===m)}return o}),Fm.apply(this,arguments)}function $v(n,e,t,r){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,we.Z)(function*(n,e,t,r){n._a=(x,N,z)=>{return(ee=(0,we.Z)(function*(ge,Ve,nt,Bt){let jt=Ve.view.Wu(nt);jt.ii&&(jt=yield _m(ge.localStore,Ve.query,!1).then(({documents:$t})=>Ve.view.Wu($t,jt)));const Gt=Bt&&Bt.targetChanges.get(Ve.targetId),St=Ve.view.applyChanges(jt,ge.isPrimaryClient,Gt);return Qv(ge,Ve.targetId,St.Xu),St.snapshot}),function(ge,Ve,nt,Bt){return ee.apply(this,arguments)})(n,x,N,z);var ee};const o=yield _m(n.localStore,e,!0),u=new km(e,o._i),d=u.Wu(o.documents),m=wf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);Qv(n,t,w.Xu);const b=new mo(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),Hv.apply(this,arguments)}function hI(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,we.Z)(function*(n,e){const t=ze(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!_f(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),th(t.remoteStore,r.targetId),Xf(t,r.targetId)}).catch(ol))):(Xf(t,r.targetId),yield Xd(t.localStore,r.targetId,!0))}),Gv.apply(this,arguments)}function Lm(){return Lm=(0,we.Z)(function*(n,e,t){const r=Hm(n);try{const o=yield function(u,d){const m=ze(u),w=ir.now(),b=d.reduce((N,z)=>N.add(z.key),Xt());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,b).next(z=>{x=z;const ee=[];for(const ge of d){const Ve=q_(ge,x.get(ge.key));null!=Ve&&ee.push(new Pd(ge.key,Ve,N_(Ve.value.mapValue),hn.exists(!0)))}return m.Bs.addMutationBatch(N,w,ee,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Vn(At)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield ul(r,o.changes),yield qf(r.remoteStore)}catch(o){const u=nh(o,"Failed to persist write");t.reject(u)}}),Lm.apply(this,arguments)}function qv(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,we.Z)(function*(n,e){const t=ze(n);try{const r=yield Uw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?mt(d.na):o.removedDocuments.size>0&&(mt(d.na),d.na=!1))}),yield ul(t,r,e)}catch(r){yield ol(r)}}),zv.apply(this,arguments)}function fI(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=ze(u);m.onlineState=d;let w=!1;m.queries.forEach((b,x)=>{for(const N of x.listeners)N.Pu(d)&&(w=!0)}),w&&Qf(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pI(n,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,we.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Vn($e.comparator);d=d.insert(u,vn.newNoDocument(u,ft.min()));const m=Xt().add(u),w=new Ef(ft.min(),new Map,new dn(At),d,m);yield qv(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),Jv(r)}else yield Xd(r.localStore,e,!1).then(()=>Xf(r,e,t)).catch(ol)}),Jf.apply(this,arguments)}function Wv(n,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,we.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield wv(t.localStore,e);mI(t,r,null),Kv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ul(t,o)}catch(o){yield ol(o)}}),Vm.apply(this,arguments)}function lb(n,e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,we.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,d){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.Bs.lookupMutationBatch(w,d).next(x=>(mt(null!==x),b=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,b))})}(r.localStore,e);mI(r,e,t),Kv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ul(r,o)}catch(o){yield ol(o)}}),Um.apply(this,arguments)}function Zv(){return Zv=(0,we.Z)(function*(n,e){const t=ze(n);Xa(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=nh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Zv.apply(this,arguments)}function Kv(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function mI(n,e,t){const r=ze(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Xf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Yv(n,r)})}function Yv(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(th(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Jv(n))}function Qv(n,e,t){for(const r of t)r instanceof cI?(n.ca.addReference(r.key,e),cb(n,r)):r instanceof dI?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Yv(n,r.key)):tt()}function cb(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),Jv(n))}function Jv(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(kt.fromString(e)),r=n.fa.next();n.aa.set(r,new ab(t)),n.ua=n.ua.insert(t,r),Am(n.remoteStore,new go(ks(lc(t.path)),r,2,Bi.A))}}function ul(n,e,t){return yI.apply(this,arguments)}function yI(){return yI=(0,we.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),o.push(b);const x=pm.Ys(w.targetId,b);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,we.Z)(function*(w,b){const x=ze(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>le.forEach(b,z=>le.forEach(z.Hs,ee=>x.persistence.referenceDelegate.addReference(N,z.targetId,ee)).next(()=>le.forEach(z.Js,ee=>x.persistence.referenceDelegate.removeReference(N,z.targetId,ee)))))}catch(N){if(!fc(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const z=N.targetId;if(!N.fromCache){const ee=x.ui.get(z),Ve=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);x.ui=x.ui.insert(z,Ve)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),yI.apply(this,arguments)}function YT(n,e){return _I.apply(this,arguments)}function _I(){return _I=(0,we.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Lw(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new xe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ul(t,r.di)}var o}),_I.apply(this,arguments)}function QT(n,e){const t=ze(n),r=t.aa.get(e);if(r&&r.na)return Xt().add(r.key);{let o=Xt();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function db(n,e){return ih.apply(this,arguments)}function ih(){return ih=(0,we.Z)(function*(n,e){const t=ze(n),r=yield _m(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&Qv(t,e.targetId,o.Xu),o}),ih.apply(this,arguments)}function hb(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,we.Z)(function*(n,e){const t=ze(n);return vm(t.localStore,e).then(r=>ul(t,r))}),Xv.apply(this,arguments)}function vI(n,e,t,r){return eu.apply(this,arguments)}function eu(){return eu=(0,we.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(d,m){const w=ze(d),b=ze(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.fn(x,m).next(N=>N?w.fi.Ks(x,N):le.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield qf(o.remoteStore):"acknowledged"===t||"rejected"===t?(mI(o,e,r||null),Kv(o,e),m=e,ze(ze(o.localStore).Bs)._n(m)):tt(),yield ul(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),eu.apply(this,arguments)}function ep(){return ep=(0,we.Z)(function*(n,e){const t=ze(n);if(DI(t),Hm(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Bm(t,r.toArray());t.da=!0,yield Wf(t.remoteStore,!0);for(const u of o)Am(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Xf(t,d),Xd(t.localStore,d,!0))),th(t.remoteStore,d)}),yield o,yield Bm(t,r),function(u){const d=ze(u);d.aa.forEach((m,w)=>{th(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Vn($e.comparator)}(t),t.da=!1,yield Wf(t.remoteStore,!1)}}),ep.apply(this,arguments)}function Bm(n,e,t){return e0.apply(this,arguments)}function e0(){return e0=(0,we.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield Jd(r.localStore,ks(w[0]));for(const b of w){const x=r.ia.get(b),N=yield db(r,x);N.snapshot&&u.push(N.snapshot)}}else{const b=yield Cv(r.localStore,d);m=yield Jd(r.localStore,b),yield $v(r,jm(b),d,!1)}o.push(m)}return r.sa.zo(u),o}),e0.apply(this,arguments)}function jm(n){return L_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t0(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function $m(n,e,t,r){return wI.apply(this,arguments)}function wI(){return wI=(0,we.Z)(function*(n,e,t,r){const o=ze(n);if(o.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield vm(o.localStore,WE(u[0])),m=Ef.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ul(o,d,m);break}case"rejected":yield Xd(o.localStore,e,!0),Xf(o,e,r);break;default:tt()}}),wI.apply(this,arguments)}function JT(n,e,t){return II.apply(this,arguments)}function II(){return II=(0,we.Z)(function*(n,e,t){const r=DI(n);if(r.da){for(const o of e){if(r.ra.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield Cv(r.localStore,o),d=yield Jd(r.localStore,u);yield $v(r,jm(u),d.targetId,!1),Am(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield Xd(r.localStore,o,!1).then(()=>{th(r.remoteStore,o),Xf(r,o)}).catch(ol))}}),II.apply(this,arguments)}function DI(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pI.bind(null,e),e.sa.zo=sb.bind(null,e.eventManager),e.sa.wa=ob.bind(null,e.eventManager),e}function Hm(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lb.bind(null,e),e}class CI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.M=$f(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Fw(this.persistence,new gm,e.initialUser,this.M)}ya(e){return new QC(_c.Yi,this.M)}ga(e){return new Uf}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bI extends CI{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Hm(r.Ta.syncEngine),yield qf(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Fw(this.persistence,new gm,e.initialUser,this.M)}pa(e){return new Rw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new Qd(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Bf(),jf(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Uf}}class pb extends bI{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Cm&&(r.sharedClientState.syncEngine={$r:vI.bind(null,o),Br:$m.bind(null,o),Lr:JT.bind(null,o),Fs:t0.bind(null,o),Fr:hb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,we.Z)(function*(d){yield function EI(n,e){return ep.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=Bf();if(!Cm.vt(t))throw new xe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ev(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gm{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>fI(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=YT.bind(null,r.syncEngine),yield Wf(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Vv}createDatastore(e){const t=$f(e.databaseInfo.databaseId),r=new qw(e.databaseInfo);return new tb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>fI(this.syncEngine,m,0),d=JC.vt()?new JC:new Mv,new Ww(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,b){const x=new ZT(r,o,u,d,m,w);return b&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=ze(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield vc(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function n0(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gb{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new zn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,we.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new aI(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,we.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,d){const m=ze(u),w=em(m.M)+"/documents",b={documents:d.map(ee=>bf(m.M,ee))},x=yield m._o("BatchGetDocuments",w,b),N=new Map;x.forEach(ee=>{const ge=function EC(n,e){return"found"in e?function(t,r){mt(!!r.found);const o=Jo(t,r.found.name),u=_r(r.found.updateTime),d=new oi({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const o=Jo(t,r.missing),u=_r(r.readTime);return vn.newNoDocument(o,u)}(n,e):tt()}(m.M,ee);N.set(ge.key.toString(),ge)});const z=[];return d.forEach(ee=>{const ge=N.get(ee.toString());mt(!!ge),z.push(ge)}),z}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new kd(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const d=ze(o),m=em(d.M)+"/documents",w={writes:u.map(b=>Vd(d.M,b))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hn.updateTime(t):hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new xe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(t)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TI{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Hf(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,we.Z)(function*(){const t=new mb(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Td(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Nn(t)}return!1}}class r0{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=mr.UNAUTHENTICATED,this.clientId=Rg.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,we.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=nh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function yb(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield Lw(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),qm.apply(this,arguments)}function zm(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield o0(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>kv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>kv(e.remoteStore,u)),n.onlineComponents=e}),s0.apply(this,arguments)}function o0(n){return AI.apply(this,arguments)}function AI(){return AI=(0,we.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield yb(n,new CI)),n.offlineComponents}),AI.apply(this,arguments)}function a0(n){return SI.apply(this,arguments)}function SI(){return SI=(0,we.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield zm(n,new Gm)),n.onlineComponents}),SI.apply(this,arguments)}function MI(n){return o0(n).then(e=>e.persistence)}function u0(n){return o0(n).then(e=>e.localStore)}function _b(n){return a0(n).then(e=>e.remoteStore)}function xI(n){return a0(n).then(e=>e.syncEngine)}function np(n){return RI.apply(this,arguments)}function RI(){return RI=(0,we.Z)(function*(n){const e=yield a0(n),t=e.eventManager;return t.onListen=ub.bind(null,e.syncEngine),t.onUnlisten=hI.bind(null,e.syncEngine),t}),RI.apply(this,arguments)}function Eb(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,m,w){const b=new tp({next:N=>{u.enqueueAndForget(()=>Bv(o,x));const z=N.docs.has(d);!z&&N.fromCache?w.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new Pm(lc(d.path),b,{includeMetadataChanges:!0,ku:!0});return Uv(o,x)}(yield np(n),n.asyncQueue,e,t,r)})),r.promise}function wb(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,m,w){const b=new tp({next:N=>{u.enqueueAndForget(()=>Bv(o,x)),N.fromCache&&"server"===m.source?w.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new Pm(d,b,{includeMetadataChanges:!0,ku:!0});return Uv(o,x)}(yield np(n),n.asyncQueue,e,t,r)})),r.promise}const c=new Map;function p(n,e,t){if(!t)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _(n,e,t,r){if(!0===e&&!0===r)throw new xe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function E(n){if(!$e.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I(n){if($e.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function A(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function S(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=A(n);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function k(n,e){if(e<=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class V{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V({}),this._settingsFrozen=!1,e instanceof Za?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new RE;switch(t.type){case"gapi":const r=t.client;return mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new JD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=c.get(e);t&&(ke("ComponentProvider","Removing Datastore"),c.delete(e),t.terminate())}(this),Promise.resolve()}}class be{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new We(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new be(this.firestore,e,this._key)}}class Pe{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pe(this.firestore,e,this._query)}}class We extends Pe{constructor(e,t,r){super(e,t,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new be(this.firestore,null,new $e(e))}withConverter(e){return new We(this.firestore,e,this._path)}}function Se(n,e,...t){if(n=(0,Ot.m9)(n),p("collection","path",e),n instanceof K){const r=kt.fromString(e,...t);return I(r),new We(n,null,r)}{if(!(n instanceof be||n instanceof We))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return I(r),new We(n.firestore,null,r)}}function xt(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=Rg.R()),p("doc","path",e),n instanceof K){const r=kt.fromString(e,...t);return E(r),new be(n,null,new $e(r))}{if(!(n instanceof be||n instanceof We))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return E(r),new be(n.firestore,n instanceof We?n.converter:null,new $e(r))}}function Kt(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof be||n instanceof We)&&(e instanceof be||e instanceof We)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ji(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof Pe&&e instanceof Pe&&n.firestore===e.firestore&&_f(n._query,e._query)&&n.converter===e.converter}class wc{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Hf(this,"async_queue_retry"),this.Qa=()=>{const t=jf();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=jf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=jf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new zn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,we.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!fc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,rr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=sI.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&tt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function rp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class l0{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fn extends K{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new wc,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wm(this),this._firestoreClient.terminate()}}function Un(n){return n._firestoreClient||Wm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Wm(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new FE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new r0(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nA(n,e,t){const r=new zn;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield yb(n,t),yield zm(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function rA(n){if(n._initialized||n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(Zn.fromBase64String(e))}catch(t){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ip{constructor(e){this._methodName=e}}class PI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const qM=/^__.*__$/;class zM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Od(e,this.data,t,this.fieldTransforms)}}class iA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class kI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new kI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return VI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(sA(this.ec)&&qM.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class WM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||$f(e)}lc(e,t,r,o=!1){return new kI({ec:e,methodName:t,hc:r,path:Wn.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function sp(n){const e=n._freezeSettings(),t=$f(n._databaseId);return new WM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);bb("Data must be an object, but it was:",d,r);const m=uA(r,d);let w,b;if(u.merge)w=new ff(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const z=Tb(e,N,t);if(!d.contains(z))throw new xe(ue.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);cA(x,z)||x.push(z)}w=new ff(x),b=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=d.fieldTransforms;return new zM(new oi(m),w,b)}class h0 extends ip{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof h0}}function oA(n,e,t){return new kI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Ib extends ip{_toFieldTransform(e){return new Rd(e.path,new cc)}isEqual(e){return e instanceof Ib}}class ZM extends ip{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=oA(this,e,!0),r=this.fc.map(u=>op(u,t)),o=new el(r);return new Rd(e.path,o)}isEqual(e){return this===e}}class KM extends ip{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=oA(this,e,!0),r=this.fc.map(u=>op(u,t)),o=new tl(r);return new Rd(e.path,o)}isEqual(e){return this===e}}class YM extends ip{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new dc(e.M,QE(e.M,this.dc));return new Rd(e.path,t)}isEqual(e){return this===e}}function Db(n,e,t,r){const o=n.lc(1,e,t);bb("Data must be an object, but it was:",o,r);const u=[],d=oi.empty();qa(r,(w,b)=>{const x=LI(e,w,t);b=(0,Ot.m9)(b);const N=o.oc(x);if(b instanceof h0)u.push(x);else{const z=op(b,N);null!=z&&(u.push(x),d.set(x,z))}});const m=new ff(u);return new iA(d,m,o.fieldTransforms)}function Cb(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[Tb(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)m.push(Tb(e,u[z])),w.push(u[z+1]);const b=[],x=oi.empty();for(let z=m.length-1;z>=0;--z)if(!cA(b,m[z])){const ee=m[z];let ge=w[z];ge=(0,Ot.m9)(ge);const Ve=d.oc(ee);if(ge instanceof h0)b.push(ee);else{const nt=op(ge,Ve);null!=nt&&(b.push(ee),x.set(ee,nt))}}const N=new ff(b);return new iA(x,N,d.fieldTransforms)}function aA(n,e,t,r=!1){return op(t,n.lc(r?4:3,e))}function op(n,e){if(lA(n=(0,Ot.m9)(n)))return bb("Unsupported field value:",e,n),uA(n,e);if(n instanceof ip)return function(t,r){if(!sA(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=op(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return QE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ir.fromDate(t);return{timestampValue:Cf(r.M,o)}}if(t instanceof ir){const o=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cf(r.M,o)}}if(t instanceof PI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:K_(r.M,t._byteString)};if(t instanceof be){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Y_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${A(t)}`)}(n,e)}function uA(n,e){const t={};return Ng(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(n,(r,o)=>{const u=op(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function lA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof PI||n instanceof ll||n instanceof be||n instanceof ip)}function bb(n,e,t){if(!lA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=A(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Tb(n,e,t){if((e=(0,Ot.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return LI(n,e);throw VI("Field path arguments must be of type string or ",n,!1,void 0,t)}const QM=new RegExp("[~\\*/\\[\\]]");function LI(n,e,t){if(e.search(QM)>=0)throw VI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch(r){throw VI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ue.INVALID_ARGUMENT,m+n+w)}function cA(n,e){return n.some(t=>t.isEqual(e))}class f0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JM extends f0{data(){return super.data()}}function UI(n,e){return"string"==typeof e?LI(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}class ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends f0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new p0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class p0 extends Dc{data(e={}){return super.data(e)}}class sh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ap(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new p0(this._firestore,this._userDataWriter,r.key,r,new ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new p0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new p0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:XM(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function dA(n,e){return n instanceof Dc&&e instanceof Dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sh&&e instanceof sh&&n._firestore===e._firestore&&ji(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g0{}function oh(n,...e){for(const t of e)n=t._apply(n);return n}class ex extends g0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=sp(e.firestore),r=function(o,u,d,m,w,b,x){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){_A(x,b);const ee=[];for(const ge of x)ee.push(yA(m,o,ge));N={arrayValue:{values:ee}}}else N=yA(m,o,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||_A(x,b),N=aA(d,"where",x,"in"===b||"not-in"===b);const z=Kn.create(w,b,N);return function(ee,ge){if(ge.S()){const nt=Zg(ee);if(null!==nt&&!nt.isEqual(ge.field))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${ge.field.toString()}'`);const Bt=Wg(ee);null!==Bt&&vA(0,ge.field,Bt)}const Ve=function(nt,Bt){for(const jt of nt.filters)if(Bt.indexOf(jt.op)>=0)return jt.op;return null}(ee,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Ve)throw new xe(ue.INVALID_ARGUMENT,Ve===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Ve.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Pe(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Qo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class nx extends g0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Xu(o,u);return function(m,w){if(null===Wg(m)){const b=Zg(m);null!==b&&vA(0,b,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new Pe(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Qo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fA extends g0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Pe(e.firestore,e.converter,qE(e._query,this.yc,this.Ic))}}class pA extends g0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=mA(e,this.type,this.Tc,this.Ec);return new Pe(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class gA extends g0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=mA(e,this.type,this.Tc,this.Ec);return new Pe(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function mA(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof f0)return function(o,u,d,m,w){if(!m)throw new xe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const x of xd(o))if(x.field.isKeyField())b.push(Qu(u,m.key));else{const N=m.data.field(x.field);if(Pg(N))throw new xe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const z=x.field.canonicalString();throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ya(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=sp(n.firestore);return function(u,d,m,w,b,x){const N=u.explicitOrderBy;if(b.length>N.length)throw new xe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let ee=0;ee<b.length;ee++){const ge=b[ee];if(N[ee].field.isKeyField()){if("string"!=typeof ge)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ge}`);if(!V_(u)&&-1!==ge.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ge}' contains a slash.`);const Ve=u.path.child(kt.fromString(ge));if(!$e.isDocumentKey(Ve))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const nt=new $e(Ve);z.push(Qu(d,nt))}else{const Ve=aA(m,w,ge);z.push(Ve)}}return new Ya(z,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function yA(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&-1!==t.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!$e.isDocumentKey(r))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qu(n,new $e(r))}if(t instanceof be)return Qu(n,t._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${A(t)}.`)}function _A(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vA(n,e,t){if(!t.isEqual(e))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cx={maxAttempts:5};class Ab{convertValue(e,t="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return qa(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new PI(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=A_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=za(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);mt(gw(r));const o=new Za(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||rr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function BI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dx extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}}class EA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sp(e)}set(e,t,r){this._verifyNotCommitted();const o=ah(e,this._firestore),u=BI(o.converter,t,r),d=FI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,hn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ah(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Ic?Cb(this._dataReader,"WriteBatch.update",u._key,t,r,o):Db(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ah(e,this._firestore);return this._mutations=this._mutations.concat(new vf(t._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ah(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class up extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}}function wA(n,e,t){n=S(n,be);const r=S(n.firestore,fn),o=BI(n.converter,e,t);return Zm(r,[FI(sp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,hn.none())])}function IA(n,e,t,...r){n=S(n,be);const o=S(n.firestore,fn),u=sp(o);let d;return d="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Ic?Cb(u,"updateDoc",n._key,e,t,r):Db(u,"updateDoc",n._key,e),Zm(o,[d.toMutation(n._key,hn.exists(!0))])}function DA(n,...e){var t,r,o;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||rp(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(rp(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,x;if(n instanceof be)b=S(n.firestore,fn),x=lc(n._key.path),w={next:N=>{e[d]&&e[d](Sb(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=S(n,Pe);b=S(N.firestore,fn),x=N._query;const z=new up(b);w={next:ee=>{e[d]&&e[d](new sh(b,z,N,ee))},error:e[d+1],complete:e[d+2]},hA(n._query)}return function(N,z,ee,ge){const Ve=new tp(ge),nt=new Pm(z,Ve,ee);return N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Uv(yield np(N),nt)})),()=>{Ve.Aa(),N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Bv(yield np(N),nt)}))}}(Un(b),x,m,w)}function Zm(n,e){return function(t,r){const o=new zn;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function KT(n,e,t){return Lm.apply(this,arguments)}(yield xI(t),r,o)})),o.promise}(Un(n),e)}function Sb(n,e,t){const r=t.docs.get(e._key),o=new up(n);return new Dc(n,o,e._key,r,new ap(t.hasPendingWrites,t.fromCache),e.converter)}class wx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sp(e)}get(e){const t=ah(e,this._firestore),r=new dx(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new f0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new f0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=ah(e,this._firestore),u=BI(o.converter,t,r),d=FI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=ah(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Ic?Cb(this._dataReader,"Transaction.update",u._key,t,r,o):Db(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=ah(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ah(e,this._firestore),r=new up(this._firestore);return super.get(e).then(o=>new Dc(this._firestore,r,t._key,o._document,new ap(!1,!1),t.converter))}}function Mb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bA(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function TA(){if(!function XD(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wu=$l.SDK_VERSION,(0,$l._registerComponent)(new ig.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new fn(o,new YD(t.getProvider("auth-internal")),new OE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,$l.registerVersion)(AE,"3.4.9",n),(0,$l.registerVersion)(AE,"3.4.9","esm2017")}();class m0{constructor(e){this._delegate=e}static fromBase64String(e){return TA(),new m0(ll.fromBase64String(e))}static fromUint8Array(e){return bA(),new m0(ll.fromUint8Array(e))}toBase64(){return TA(),this._delegate.toBase64()}toUint8Array(){return bA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xb(n){return function xx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Rx{enableIndexedDbPersistence(e,t){return function d0(n,e){rA(n=S(n,fn));const t=Un(n),r=n._freezeSettings(),o=new Gm;return nA(t,o,new bI(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VM(n){rA(n=S(n,fn));const e=Un(n),t=n._freezeSettings(),r=new Gm;return nA(e,r,new pb(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UM(n){if(n._initialized&&!n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Ls.vt())return Promise.resolve();const o=r+"main";yield Ls.delete(o)}),function(r){return t.apply(this,arguments)})(Ev(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ye(n,e,t,r={}){var o;const u=(n=S(n,K))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=mr.MOCK_USER;else{d=(0,Ot.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mr(w)}n._authCredentials=new KD(new xE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function jM(n){return function XT(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield MI(n),t=yield _b(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.wu.delete(0),Gf(o)}(t)}))}(Un(n=S(n,fn)))}(this._delegate)}disableNetwork(){return function $M(n){return function vb(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield MI(n),t=yield _b(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=ze(o);u.wu.add(0),yield vc(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Un(n=S(n,fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BM(n){return function(e){const t=new zn;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function gI(n,e){return Zv.apply(this,arguments)}(yield xI(e),t)})),t.promise}(Un(n=S(n,fn)))}(this._delegate)}onSnapshotsInSync(e){return function Ex(n,e){return function i(n,e){const t=new tp(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield np(n),o=t,ze(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield np(n),o=t,void ze(r).bu.delete(o);var r,o}))}}(Un(n=S(n,fn)),rp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,Se(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,xt(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function ct(n,e){if(n=S(n,K),p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pe(n,null,(t=e,new Qo(kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ix(n,e,t){n=S(n,fn);const r=Object.assign(Object.assign({},cx),t);return function(o){if(o.maxAttempts<1)throw new xe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function s(n,e,t){const r=new zn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const o=yield(u=n,a0(u).then(d=>d.datastore));var u;new TI(n.asyncQueue,o,t,e,r).run()})),r.promise}(Un(n),o=>e(new wx(n,o)),r)}(this._delegate,t=>e(new SA(this,t)))}batch(){return Un(this._delegate),new MA(new EA(this._delegate,e=>Zm(this._delegate,e)))}loadBundle(e){return function HM(n,e){const t=Un(n=S(n,fn)),r=new l0;return function a(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return n0(w,b);if(w instanceof ArrayBuffer)return n0(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new gb(w,d);var w}(t,$f(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function fb(n,e,t){const r=ze(n);var o;(o=(0,we.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(z,ee){const ge=ze(z),Ve=_r(ee.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",nt=>ge._s.getBundleMetadata(nt,ee.id)).then(nt=>!!nt&&nt.createTime.compareTo(Ve)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);m._updateProgress(jv(w));const b=new lI(w,u.localStore,d.M);let x=yield d.ma();for(;x;){const z=yield b.Fu(x);z&&m._updateProgress(z),x=yield d.ma()}const N=yield b.complete();return yield ul(u,N.Lu,void 0),yield function(z,ee){const ge=ze(z);return ge.persistence.runTransaction("Save bundle","readwrite",Ve=>ge._s.saveBundleMetadata(Ve,ee))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return bd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var z}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield xI(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GM(n,e){return function l(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield u0(n),e)}))}(Un(n=S(n,fn)),e).then(t=>t?new Pe(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class jI extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new m0(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class SA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}get(e){const t=cp(e);return this._delegate.get(t).then(r=>new y0(this._firestore,new Dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=cp(e);return r?(Mb("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}}class MA{constructor(e){this._delegate=e}set(e,t,r){const o=cp(e);return r?(Mb("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new p0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=lp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new lp(e,new jI(e),t),o.set(t,u)),u}}lp.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new be(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ea(t,new be(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,Se(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof be&&Kt(this._delegate,e)}set(e,t){t=Mb("DocumentReference.set",t);try{return t?wA(this._delegate,e,t):wA(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IA(this._delegate,e):IA(this._delegate,e,t,...r)}catch(o){throw os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function _x(n){return Zm(S(n.firestore,fn),[new vf(n._key,hn.none())])}(this._delegate)}onSnapshot(...e){const t=xA(e),r=RA(e,o=>new y0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return DA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fx(n){n=S(n,be);const e=S(n.firestore,fn),t=Un(e),r=new up(e);return function eA(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const m=yield function(w,b){const x=ze(w);return x.persistence.runTransaction("read document","readonly",N=>x.fi.Ls(N,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=nh(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield u0(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Dc(e,r,n._key,o,new ap(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function px(n){n=S(n,be);const e=S(n.firestore,fn);return Eb(Un(e),n._key,{source:"server"}).then(t=>Sb(e,n,t))}(this._delegate):function hx(n){n=S(n,be);const e=S(n.firestore,fn);return Eb(Un(e),n._key).then(t=>Sb(e,n,t))}(this._delegate),t.then(r=>new y0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?lp.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function xA(n){for(const e of n)if("object"==typeof e&&!xb(e))return e;return{}}function RA(n,e){var t,r;let o;return o=xb(n[0])?n[0]:xb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class y0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dA(this._delegate,e._delegate)}}class _0 extends y0{data(e){const t=this._delegate.data(e);return function ZD(n,e){n||tt()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}where(e,t,r){try{return new as(this.firestore,oh(this._delegate,function tx(n,e,t){const r=e,o=UI("where",n);return new ex(o,r,t)}(e,t,r)))}catch(o){throw os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,oh(this._delegate,function rx(n,e="asc"){const t=e,r=UI("orderBy",n);return new nx(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,oh(this._delegate,function ix(n){return k("limit",n),new fA("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,oh(this._delegate,function sx(n){return k("limitToLast",n),new fA("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,oh(this._delegate,function ox(...n){return new pA("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,oh(this._delegate,function ax(...n){return new pA("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,oh(this._delegate,function ux(...n){return new gA("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,oh(this._delegate,function lx(...n){return new gA("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return ji(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mx(n){n=S(n,Pe);const e=S(n.firestore,fn),t=Un(e),r=new up(e);return function tA(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const m=yield _m(o,u,!0),w=new km(u,m._i),b=w.Wu(m.documents),x=w.applyChanges(b,!1);d.resolve(x.snapshot)}catch(m){const w=nh(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield u0(n),e,t);var r})),t.promise}(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function yx(n){n=S(n,Pe);const e=S(n.firestore,fn),t=Un(e),r=new up(e);return wb(t,n._query,{source:"server"}).then(o=>new sh(e,r,n,o))}(this._delegate):function gx(n){n=S(n,Pe);const e=S(n.firestore,fn),t=Un(e),r=new up(e);return hA(n._query),wb(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate),t.then(r=>new Rb(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xA(e),r=RA(e,o=>new Rb(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return DA(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?lp.getInstance(this.firestore,e):null))}}class Ox{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ox(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _0(this._firestore,r))})}isEqual(e){return dA(this._delegate,e._delegate)}}class Km extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?xt(this._delegate):xt(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function vx(n,e){const t=S(n.firestore,fn),r=xt(n),o=BI(n.converter,e);return Zm(t,[FI(sp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return Kt(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?lp.getInstance(this.firestore,e):null))}}function cp(n){return S(n,be)}class Nb{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new Nb(Wn.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cx(){return new Ib("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dp(e)}static delete(){const e=function Dx(){return new h0("deleteField")}();return e._methodName="FieldValue.delete",new dp(e)}static arrayUnion(...e){const t=function bx(...n){return new ZM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dp(t)}static arrayRemove(...e){const t=function Tx(...n){return new KM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dp(t)}static increment(e){const t=function Ax(n){return new YM("increment",n)}(e);return t._methodName="FieldValue.increment",new dp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Px={Firestore:AA,GeoPoint:PI,Timestamp:ir,Blob:m0,Transaction:SA,WriteBatch:MA,DocumentReference:ea,DocumentSnapshot:y0,Query:as,QueryDocumentSnapshot:_0,QuerySnapshot:Rb,CollectionReference:Km,FieldPath:Nb,FieldValue:dp,setLogLevel:function Nx(n){!function VT(n){Zu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Fx(n){(function kx(n,e){n.INTERNAL.registerComponent(new ig.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Px)))})(n,(e,t)=>new AA(e,t,new Rx)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(q0.Z);var Lx=O(6451),$I=O(5363),Vx=O(6063);class NA extends Gr.x{constructor(e=1/0,t=1/0,r=Vx.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Ux=O(3099);function OA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Ux.B)({connector:()=>new NA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function PA(n,e){return(0,vu.m)(e)?bn(()=>n,e):bn(()=>n)}var Ob=O(9468);O(5867);const FA=new Map,Gx={activated:!1,tokenObservers:[]},qx={initialized:!1,enabled:!1};function li(n){return FA.get(n)||Gx}function tu(n,e){FA.set(n,e)}function GI(){return qx}class Yx{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function Qx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VA(n){if(!li(n).activated)throw us.create("use-before-activation",{appName:n.name})}function Lb(n,e){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw us.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw us.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw us.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}}),Vb.apply(this,arguments)}function nR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const v0="firebase-app-check-store";let WI=null;function BA(){return WI||(WI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(us.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(v0,{keyPath:"compositeKey"})}}catch(t){e(us.create("storage-open",{originalErrorMessage:t.message}))}}),WI)}function Ub(){return Ub=(0,we.Z)(function*(n,e){const r=(yield BA()).transaction(v0,"readwrite"),u=r.objectStore(v0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;m(us.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),Ub.apply(this,arguments)}const E0=new Lu.Yd("@firebase/app-check");function GA(n,e){return(0,Ot.hl)()?function oR(n,e){return function jA(n,e){return Ub.apply(this,arguments)}(function HA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{E0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function qA(){return GI().enabled}function zA(){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,we.Z)(function*(){const n=GI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Hb.apply(this,arguments)}const hR={error:"UNKNOWN_ERROR"};function fR(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function ZI(n){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,we.Z)(function*(n,e=!1){const t=n.app;VA(t);const r=li(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&KI(w)&&(o=w)}if(!e&&o&&KI(o))return{token:o.token};let m,d=!1;if(qA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Lb(nR(t,yield zA()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const w=yield r.exchangeTokenPromise;return yield GA(t,w),tu(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?E0.warn(w.message):E0.error(w),u=w}return o?(m={token:o.token},tu(t,Object.assign(Object.assign({},r),{token:o})),yield GA(t,o)):m=gR(u),d&&ZA(t,m),m}),Gb.apply(this,arguments)}function zb(n,e){const t=li(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),tu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function WA(n){const{app:e}=n,t=li(e);let r=t.tokenRefresher;r||(r=function pR(n){const{app:e}=n;return new Yx((0,we.Z)(function*(){let r;if(r=li(e).token?yield ZI(n,!0):yield ZI(n),r.error)throw r.error}),()=>!0,()=>{const t=li(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),tu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ZA(n,e){const t=li(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function KI(n){return n.expireTimeMillis-Date.now()>0}function gR(n){return{token:fR(hR),error:n}}class mR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=li(this.app);for(const t of e)zb(this.app,t.next);return Promise.resolve()}}const nS="app-check-internal";!function xR(){(0,$l._registerComponent)(new ig.wA("app-check",n=>function yR(n,e){return new mR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nS).initialize()})),(0,$l._registerComponent)(new ig.wA(nS,n=>function _R(n){return{getToken:e=>ZI(n,e),addTokenListener:e=>function qb(n,e,t,r){const{app:o}=n,u=li(o),d={next:t,error:r,type:e};if(tu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&KI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),WA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>WA(n))}(n,"INTERNAL",e),removeTokenListener:e=>zb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$l.registerVersion)("@firebase/app-check","0.5.8")}();class Yb{constructor(){return(0,kr.vb)("app-check")}}"undefined"!=typeof window&&window;var kR=O(127);const iS=new f.OlP("angularfire2.auth.use-emulator"),sS=new f.OlP("angularfire2.auth.settings"),oS=new f.OlP("angularfire2.auth.tenant-id"),aS=new f.OlP("angularfire2.auth.langugage-code"),uS=new f.OlP("angularfire2.auth.use-device-language"),lS=new f.OlP("angularfire.auth.persistence"),cS=(n,e,t,r,o,u,d,m)=>(0,qn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,x]of Object.entries(d))w.settings[b]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let dS=(()=>{class n{constructor(t,r,o,u,d,m,w,b,x,N,z,ee){const ge=new Gr.x,Ve=Xe(void 0).pipe((0,$I.Q)(d.outsideAngular),bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,Ct.U)(()=>(0,qn.on)(t,u,r)),(0,Ct.U)(nt=>cS(nt,u,m,b,x,N,w,z)),OA({bufferSize:1,refCount:!1}));if(Io(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{Ve.pipe(Vo()).subscribe();const Bt=Ve.pipe(bn(St=>St.getRedirectResult().then($t=>$t,()=>null)),kr.iC,OA({bufferSize:1,refCount:!1})),jt=Ve.pipe(bn(St=>new Mn.y($t=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(nn=>$t.next(nn),nn=>$t.error(nn),()=>$t.complete()))})))),Gt=Ve.pipe(bn(St=>new Mn.y($t=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(nn=>$t.next(nn),nn=>$t.error(nn),()=>$t.complete()))}))));this.authState=Bt.pipe(PA(jt),(0,Ob.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular)),this.user=Bt.pipe(PA(Gt),(0,Ob.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular)),this.idToken=this.user.pipe(bn(St=>St?(0,mn.D)(St.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(bn(St=>St?(0,mn.D)(St.getIdTokenResult()):Xe(null))),this.credential=(0,Lx.T)(Bt,ge,this.authState.pipe(zr(St=>!St))).pipe((0,Ct.U)(St=>(null==St?void 0:St.user)?St:null),(0,Ob.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular))}return(0,qn.pX)(this,Ve,u,{spy:{apply:(nt,Bt,jt)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&jt.then(Gt=>ge.next(Gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qn.Dh),f.LFG(qn.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(iS,8),f.LFG(sS,8),f.LFG(oS,8),f.LFG(aS,8),f.LFG(uS,8),f.LFG(lS,8),f.LFG(Yb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hS(n,e){return function LR(n,e=G0.z){return new Mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Jb(n,e){return hS(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function QI(n,e){return Jb(n,e).pipe(Fi(void 0),rg(),(0,Ct.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function fS(n,e,t){return QI(n,t).pipe(Li((r,o)=>function UR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function BR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Xb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Xb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Xb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function pD(n,e=pi.y){return n=null!=n?n:gD,(0,er.e)((t,r)=>{let o,u=!0;t.subscribe((0,Cn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Ct.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Xb(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function pS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Fi(void 0),rg(),zr(([r,o])=>o.length>0||!r),(0,Ct.U)(([r,o])=>o),kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pS(e);return fS(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return Jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(kr.iC)}add(e){return this.ref.add(e)}doc(e){return new mS(this.ref.doc(e),this.afs)}}class mS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=vS(r,t);return new gS(o,u,this.afs)}snapshotChanges(){return function VR(n,e){return hS(n,e).pipe(Fi(void 0),rg(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(kr.iC)}}class jR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zr(t=>t.length>0),kr.iC):QI(this.query,this.afs.schedulers.outsideAngular).pipe(kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pS(e);return fS(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return Jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),kr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(kr.iC)}}const yS=new f.OlP("angularfire2.enableFirestorePersistence"),_S=new f.OlP("angularfire2.firestore.persistenceSettings"),$R=new f.OlP("angularfire2.firestore.settings"),HR=new f.OlP("angularfire2.firestore.use-emulator");function vS(n,e=(t=>t)){return{query:e(n),ref:n}}let JI=(()=>{class n{constructor(t,r,o,u,d,m,w,b,x,N,z,ee,ge,Ve,nt,Bt,jt){this.schedulers=w;const Gt=(0,qn.on)(t,m,r),St=x;N&&cS(Gt,m,z,ge,Ve,nt,ee,Bt),[this.firestore,this.persistenceEnabled$]=(0,qn.cc)(`${Gt.name}.firestore`,"AngularFirestore",Gt.name,()=>{const $t=m.runOutsideAngular(()=>Gt.firestore());if(u&&$t.settings(u),St&&$t.useEmulator(...St),o&&!Io(d)){const nn=()=>{try{return(0,mn.D)($t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Hi){return"undefined"!=typeof console&&console.warn(Hi),Xe(!1)}};return[$t,m.runOutsideAngular(nn)]}return[$t,Xe(!1)]},[u,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=vS(o,r),m=this.schedulers.ngZone.run(()=>u);return new gS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new jR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new mS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qn.Dh),f.LFG(qn.xv,8),f.LFG(yS,8),f.LFG($R,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(_S,8),f.LFG(HR,8),f.LFG(dS,8),f.LFG(iS,8),f.LFG(sS,8),f.LFG(oS,8),f.LFG(aS,8),f.LFG(uS,8),f.LFG(lS,8),f.LFG(Yb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eT=(()=>{class n{constructor(){kR.Z.registerVersion("angularfire",kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yS,useValue:!0},{provide:_S,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[JI]}),n})();const ES=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(o=>((o,u,d)=>void 0===o.find(m=>u[m]!==d[m]))(t,o,e))};let tT=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("products-list").valueChanges({idField:"id"}).pipe((0,Ct.U)(r=>ES(r,t)))}getOne(t){return console.log(t),this._client.doc("products-list/"+t).valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(JI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wS=new f.OlP("GETS_ONE_PRODUCT_DTO");let IS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tT,{provide:j0,useExisting:tT},{provide:wS,useExisting:tT}],imports:[[eT]]}),n})();const DS=new f.OlP("GETS_ALL_CART_DTO");let XI=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("carts").valueChanges({idField:"id"}).pipe((0,Ct.U)(r=>ES(r,t)))}add(t){console.log(t),this._client.collection("carts").add(t)}remove(t){this._client.doc("carts/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(JI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const CS=new f.OlP("REMOVES_CART_DTO");let bS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[XI,{provide:DS,useExisting:XI},{provide:Ny,useExisting:XI},{provide:CS,useExisting:XI}],imports:[[eT]]}),n})(),GR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:H0}]),AT,IS,bS]]}),n})(),TS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),hp=(()=>{class n extends TS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const cl=new f.OlP("NgValueAccessor"),WR={provide:cl,useExisting:(0,f.Gpc)(()=>w0),multi:!0},KR=new f.OlP("CompositionEventMode");let w0=(()=>{class n extends TS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ZR(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(KR,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([WR]),f.qOj]}),n})();const $i=new f.OlP("NgValidators"),lh=new f.OlP("NgAsyncValidators");function LS(n){return null!=n}function VS(n){const e=(0,f.QGY)(n)?(0,mn.D)(n):n;return(0,f.CqO)(e),e}function US(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function BS(n,e){return e.map(t=>t(n))}function jS(n){return n.map(e=>function QR(n){return!n.validate}(e)?e:t=>e.validate(t))}function nT(n){return null!=n?function $S(n){if(!n)return null;const e=n.filter(LS);return 0==e.length?null:function(t){return US(BS(t,e))}}(jS(n)):null}function rT(n){return null!=n?function HS(n){if(!n)return null;const e=n.filter(LS);return 0==e.length?null:function(t){return function qR(...n){const e=(0,Ea.jO)(n),{args:t,keys:r}=en(n),o=new Mn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,b=d;for(let x=0;x<d;x++){let N=!1;(0,Fo.Xf)(t[x]).subscribe((0,Cn.x)(u,z=>{N||(N=!0,b--),m[x]=z},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?Sl(r,m):m),u.complete())}))}});return e?o.pipe(qc(e)):o}(BS(t,e).map(VS)).pipe((0,Ct.U)(US))}}(jS(n)):null}function GS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qS(n){return n._rawValidators}function zS(n){return n._rawAsyncValidators}function iT(n){return n?Array.isArray(n)?n:[n]:[]}function tD(n,e){return Array.isArray(n)?n.includes(e):n===e}function WS(n,e){const t=iT(e);return iT(n).forEach(o=>{tD(t,o)||t.push(o)}),t}function ZS(n,e){return iT(e).filter(t=>!tD(n,t))}class KS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ch extends KS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ls extends KS{get formDirective(){return null}get path(){return null}}class YS{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let sT=(()=>{class n extends YS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ch,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),oT=(()=>{class n extends YS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ls,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function I0(n,e){lT(n,e),e.valueAccessor.writeValue(n.value),function sN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&JS(n,e)})}(n,e),function aN(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&JS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lT(n,e){const t=qS(n);null!==e.validator?n.setValidators(GS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=zS(n);null!==e.asyncValidator?n.setAsyncValidators(GS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();sD(e._rawValidators,o),sD(e._rawAsyncValidators,o)}function oD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=qS(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=zS(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return sD(e._rawValidators,r),sD(e._rawAsyncValidators,r),t}function JS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const D0="VALID",aD="INVALID",Ym="PENDING",C0="DISABLED";function pT(n){return(uD(n)?n.validators:n)||null}function nM(n){return Array.isArray(n)?nT(n):n||null}function gT(n,e){return(uD(e)?e.asyncValidators:n)||null}function rM(n){return Array.isArray(n)?rT(n):n||null}function uD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const iM=n=>n instanceof dh,mT=n=>n instanceof b0;function sM(n){return iM(n)?n.value:n.getRawValue()}function oM(n,e){const t=mT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function aM(n,e){mT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class yT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nM(this._rawValidators),this._composedAsyncValidatorFn=rM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===D0}get invalid(){return this.status===aD}get pending(){return this.status==Ym}get disabled(){return this.status===C0}get enabled(){return this.status!==C0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rM(e)}addValidators(e){this.setValidators(WS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZS(e,this._rawAsyncValidators))}hasValidator(e){return tD(this._rawValidators,e)}hasAsyncValidator(e){return tD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ym,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===D0||this.status===Ym)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C0:D0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ym,this._hasOwnPendingAsyncValidator=!0;const t=VS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function dN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=mT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof fN)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?C0:this.errors?aD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ym)?Ym:this._anyControlsHaveStatus(aD)?aD:D0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dh extends yT{constructor(e=null,t,r){super(pT(t),gT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class b0 extends yT{constructor(e,t,r){super(pT(t),gT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){aM(this,e),Object.keys(e).forEach(r=>{oM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=sM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class fN extends yT{constructor(e,t,r){super(pT(t),gT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){aM(this,e),e.forEach((r,o)=>{oM(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>sM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let vT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const ET=new f.OlP("NgModelWithFormControlWarning"),IN={provide:ls,useExisting:(0,f.Gpc)(()=>A0)};let A0=(()=>{class n extends ls{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return I0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){iD(t.control||null,t,!1),hT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function tM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(iD(r||null,t),iM(o)&&(I0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function XS(n,e){lT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function uN(n,e){return oD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lT(this.form,this),this._oldForm&&oD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($i,10),f.Y36(lh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([IN]),f.qOj,f.TTD]}),n})();const bN={provide:ch,useExisting:(0,f.Gpc)(()=>lD)};let lD=(()=>{class n extends ch{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function dT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===w0?t=u:function cN(n){return Object.getPrototypeOf(n.constructor)===hp}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function cT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function rD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ls,13),f.Y36($i,10),f.Y36(lh,10),f.Y36(cl,10),f.Y36(ET,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([bN]),f.qOj,f.TTD]}),n})(),jN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[fM]]}),n})(),MM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ET,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[jN]}),n})();function $N(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",4)(1,"ul",16)(2,"li",17),f._uU(3),f.qZA(),f.TgZ(4,"li",17),f._uU(5),f.qZA(),f.TgZ(6,"li",17)(7,"form",18)(8,"button",19),f.NdJ("click",function(){return f.CHM(t),f.oxw().onEditAmountPlus()}),f.O4$(),f.TgZ(9,"svg",20),f._UZ(10,"path",21),f.qZA()(),f.kcU(),f._UZ(11,"input",22),f.TgZ(12,"button",19),f.NdJ("click",function(){return f.CHM(t),f.oxw().onEditAmountMinus()}),f.O4$(),f.TgZ(13,"svg",23),f._UZ(14,"path",24),f.qZA()()()(),f.kcU(),f.TgZ(15,"li",25),f._uU(16),f.qZA(),f.TgZ(17,"button",26),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().clickConfirm(u.id)}),f.qZA()()()}if(2&n){const t=e.$implicit,r=f.oxw();f.xp6(3),f.Oqu(t.name),f.xp6(2),f.hij("",t.price," $"),f.xp6(2),f.Q6J("formGroup",r.editAmount),f.xp6(9),f.hij("",t.price," $")}}let HN=(()=>{class n{constructor(t,r){this._getsAllCartDto=t,this._removesCartDto=r,this.cartList$=this._getsAllCartDto.getAll(),this.editAmount=new b0({number:new dh})}removeItem(t){console.log(t),this._removesCartDto.remove(t)}clickConfirm(t){confirm("Are you sure to delete this product?")&&(console.log(t),this._removesCartDto.remove(t))}onEditAmountPlus(){}onEditAmountMinus(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(DS),f.Y36(CS))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-cart-list"]],decls:44,vars:3,consts:[[1,"mb-3","ps-2"],["href","/home",1,"text-reset","text-decoration-none","fw-light"],["href","/cart",1,"text-reset","text-decoration-none","fw-light"],[1,"container"],[1,""],[1,"row","justify-content-md-center"],[1,"col-md-2","list-group-item"],[1,"border","border-2","rounded","break-line"],["class"," ",4,"ngFor","ngForOf"],[1,"mt-3","pt-3",2,"width","18rem"],[1,"p-2","mt-2"],[1,"card-title","mb-2","pb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-subtitle","text-muted","align-middle"],[1,"d-flex","justify-content-between"],[1,"mt-4","btn","btn-click"],[1,"d-flex","row","justify-content-md-center","align-items-center"],[1,"list-group-item","col-sm-2"],[1,"d-flex","align-items-center",3,"formGroup"],["type","submit","value","Submit",1,"btn","btn-light","btn-plus-minus",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-dash"],["d","M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"],["type","text","formControlName","number","placeholder","1",2,"width","30px"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],[1,"list-group-item","col-2"],[1,"col-2","btn-close",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"a",1),f._uU(2,"HOME"),f.qZA(),f._uU(3," / "),f.TgZ(4,"a",2),f._uU(5,"Shopping cart"),f.qZA()(),f.TgZ(6,"div",3)(7,"div",4)(8,"ul",5)(9,"li",6),f._uU(10," Product "),f.qZA(),f.TgZ(11,"li",6),f._uU(12," Price "),f.qZA(),f.TgZ(13,"li",6),f._uU(14," Quantity "),f.qZA(),f.TgZ(15,"li",6),f._uU(16," Total "),f.qZA()(),f._UZ(17,"hr",7),f.qZA(),f.YNc(18,$N,18,4,"div",8),f.ALo(19,"async"),f.TgZ(20,"div",9)(21,"div",10)(22,"h4",11),f._uU(23,"Cart Totals"),f.qZA(),f.TgZ(24,"div",12)(25,"div")(26,"h6",13),f._uU(27,"Subtotal"),f.qZA()(),f.TgZ(28,"div"),f._uU(29,"cena $"),f.qZA()(),f._UZ(30,"hr",7),f.TgZ(31,"div",14)(32,"h6",13),f._uU(33,"Shipping free"),f.qZA(),f.TgZ(34,"div"),f._uU(35,"cena $"),f.qZA()(),f._UZ(36,"hr",7),f.TgZ(37,"div",14)(38,"h6",13),f._uU(39,"Total"),f.qZA(),f.TgZ(40,"div"),f._uU(41,"cena $"),f.qZA()(),f.TgZ(42,"button",15),f._uU(43," PROCEED TO CHECKOUT "),f.qZA()()()()),2&t&&(f.xp6(18),f.Q6J("ngForOf",f.lcZ(19,1,r.cartList$)))},directives:[Fn,vT,oT,A0,w0,sT,lD],pipes:[hl],encapsulation:2,changeDetection:0}),n})(),GN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-cart-page"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-cart-list")},directives:[HN],encapsulation:2,changeDetection:0}),n})(),qN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui,MM]]}),n})(),zN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:GN}]),qN,bS]]}),n})(),WN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-checkout-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"CheckoutPage"),f.qZA())},encapsulation:2,changeDetection:0}),n})(),ZN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:WN}])]]}),n})();const xM=new f.OlP("ADDS_CHECKOUT_DTO");let KN=(()=>{class n{constructor(t){this._addsCheckoutDto=t,this.addCheckout=new b0({fullName:new dh,address:new dh,town:new dh,phone:new dh,email:new dh})}onProductsClicked(t){var r,o,u,d,m;this._addsCheckoutDto.add({fullName:null===(r=t.get("fullName"))||void 0===r?void 0:r.value,address:null===(o=t.get("address"))||void 0===o?void 0:o.value,town:null===(u=t.get("town"))||void 0===u?void 0:u.value,phone:null===(d=t.get("phone"))||void 0===d?void 0:d.value,email:null===(m=t.get("email"))||void 0===m?void 0:m.value}),t.reset()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-checkout"]],decls:26,vars:1,consts:[[3,"formGroup"],[2,"color","red"],["type","text","formControlName","fullName","placeholder",""],["type","text","formControlName","address","placeholder","House number and street name"],["type","text","formControlName","town","placeholder",""],["type","text","formControlName","phone","placeholder",""],["type","text","formControlName","email","placeholder",""],["type","submit","value","Submit",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h2"),f._uU(1,"Billing details"),f.qZA(),f.TgZ(2,"form",0)(3,"p"),f._uU(4,"Full Name "),f.TgZ(5,"span",1),f._uU(6,"*"),f.qZA()(),f._UZ(7,"input",2),f.TgZ(8,"p"),f._uU(9,"Street adress "),f.TgZ(10,"span",1),f._uU(11,"*"),f.qZA()(),f._UZ(12,"input",3),f.TgZ(13,"p"),f._uU(14,"Town/City"),f.qZA(),f._UZ(15,"input",4),f.TgZ(16,"p"),f._uU(17,"Phone"),f.qZA(),f._UZ(18,"input",5),f.TgZ(19,"p"),f._uU(20,"Email adress "),f.TgZ(21,"span",1),f._uU(22,"*"),f.qZA()(),f._UZ(23,"input",6),f.TgZ(24,"button",7),f.NdJ("click",function(){return r.onProductsClicked(r.addCheckout)}),f._uU(25," PLACE ORDER "),f.qZA()()),2&t&&(f.xp6(2),f.Q6J("formGroup",r.addCheckout))},directives:[vT,oT,A0,w0,sT,lD],encapsulation:2,changeDetection:0}),n})(),YN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-checkout-summary"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-checkout")},directives:[KN],encapsulation:2,changeDetection:0}),n})(),QN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,MM]]}),n})(),TT=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("checkouts").add(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(JI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const JN=new f.OlP("GETS_ALL_CHECKOUT_DTO");let XN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[TT,{provide:JN,useExisting:TT},{provide:xM,useExisting:TT}],imports:[[eT]]}),n})(),eO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:YN}]),XN,QN]]}),n})(),tO=(()=>{class n{constructor(t,r){this._getsOneProductDto=t,this._contextDtoStoragePort=r,this.product$=this._contextDtoStoragePort.asObservable().pipe(bn(o=>this._getsOneProductDto.getOne(o.productId)))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(wS),f.Y36(ng))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-detail"]],decls:3,vars:5,template:function(t,r){1&t&&(f._uU(0),f.ALo(1,"json"),f.ALo(2,"async")),2&t&&f.hij("",f.lcZ(1,1,f.lcZ(2,3,r.product$)),"\n")},pipes:[Rc,hl],encapsulation:2,changeDetection:0}),n})(),nO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-product-detail-page"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-product-detail")},directives:[tO],encapsulation:2,changeDetection:0}),n})(),rO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr]]}),n})(),RM=(()=>{class n{constructor(t){this._contextDtoStorage=t}resolve(t,r){return console.log(t.params.productId),this._contextDtoStorage.next({productId:t.params.productId}),Xe(!0)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ng))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),iO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[RM],imports:[[]]}),n})(),sO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:":productId",component:nO,resolve:[RM]}]),rO,IS,iO]]}),n})(),oO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"ContactPage"),f.qZA())},encapsulation:2,changeDetection:0}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:oO}])]]}),n})(),uO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about-us-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"AboutUsPage"),f.qZA())},encapsulation:2,changeDetection:0}),n})(),lO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Nr,Ui.forChild([{path:"",component:uO}])]]}),n})();const cO=[{path:"home",loadChildren:()=>GR},{path:"cart",loadChildren:()=>zN},{path:"checkout",loadChildren:()=>ZN},{path:"checkout-summary",loadChildren:()=>eO},{path:"product-detail",loadChildren:()=>sO},{path:"contact",loadChildren:()=>aO},{path:"about-us",loadChildren:()=>lO}];let dO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Ui.forRoot(cO)],Ui]}),n})(),hO=(()=>{class n{constructor(){this.title="hackathon"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:23,vars:0,consts:[[1,"navbar","navbar-expand-lg","p-2","mb-2",2,"background-color","#c0b8b8","color","black"],["href","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarToggleExternalContent","aria-controls","navbarToggleExternalContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarToggleExternalContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","/home",1,"nav-link","active","link-light"],["href","/about-us",1,"nav-link","link-light"],["href","/contact",1,"nav-link","link-light"],[1,"row","d-flex","justify-content-end"],["href","/cart",1,"nav-link","link-light"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-basket2"],["d","M4 10a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0v-2zm3 0a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0v-2zm3 0a1 1 0 1 1 2 0v2a1 1 0 0 1-2 0v-2z"],["d","M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-.623l-1.844 6.456a.75.75 0 0 1-.722.544H3.69a.75.75 0 0 1-.722-.544L1.123 8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM2.163 8l1.714 6h8.246l1.714-6H2.163z"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"a",1),f._uU(2," Kapibara "),f.qZA(),f.TgZ(3,"button",2),f._UZ(4,"span",3),f.qZA(),f.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),f._uU(9,"Home"),f.qZA()(),f.TgZ(10,"li",6)(11,"a",8),f._uU(12,"O nas"),f.qZA()(),f.TgZ(13,"li",6)(14,"a",9),f._uU(15,"Kontakt"),f.qZA()(),f.TgZ(16,"div",10)(17,"li",6)(18,"a",11),f.O4$(),f.TgZ(19,"svg",12),f._UZ(20,"path",13)(21,"path",14),f.qZA()()()()()()(),f.kcU(),f._UZ(22,"router-outlet"))},directives:[Ll],styles:[""]}),n})();const NM_firebase={projectId:"hackathon-team",appId:"1:183321359963:web:5fa6f8ccfc65f54745b17e",storageBucket:"hackathon-team.appspot.com",apiKey:"AIzaSyDW5VwweGCo2Bk1PYSCkiGworhKWB3s6ZU",authDomain:"hackathon-team.firebaseapp.com",messagingSenderId:"183321359963"};let OM=(()=>{class n extends NA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[OM,{provide:ng,useExisting:OM}],imports:[[]]}),n})(),pO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[hO]}),n.\u0275inj=f.cJS({providers:[],imports:[[ma,dO,qn.hO.initializeApp(NM_firebase),fO]]}),n})();(0,f.G48)(),pu().bootstrapModule(pO).catch(n=>console.error(n))},5867:(Je,Ee,O)=>{O.d(Ee,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=O(9681);(0,f.registerVersion)("firebase","9.8.1","app")},127:(Je,Ee,O)=>{O.d(Ee,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Je,Ee,O)=>{O.r(Ee);var f=O(5861),Q=O(3942),P=O(2090),oe=O(9681),ne=O(655),fe=O(1877),ae=O(4859);const Ne=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new fe.Yd("@firebase/auth");function Ke(y,...h){Ge.logLevel<=fe.in.ERROR&&Ge.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function Te(y,...h){throw Be(y,...h)}function ve(y,...h){return Be(y,...h)}function Ie(y,h,g){const v=Object.assign(Object.assign({},Ue()),{[h]:g});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Te(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const g=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return de.create(y,...h)}function B(y,h,...g){if(!y)throw Be(h,...g)}function _e(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ke(h),new Error(h)}function W(y,h){y||_e(h)}const re=new Map;function J(y){W(y instanceof Function,"Expected a class definition");let h=re.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,re.set(y,h),h)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function st(){return"http:"===Lt()||"https:"===Lt()}function Lt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Wt{constructor(h,g){this.shortDelay=h,this.longDelay=g,W(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(y,h){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Yt{static initialize(h,g,v){this.fetchImpl=h,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new Wt(3e4,6e4);function Ht(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Mt(y,h,g,v){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(y,h,g,v,T={}){return Lr(y,T,(0,f.Z)(function*(){let R={},q={};v&&("GET"===h?q=v:R={body:JSON.stringify(v)});const he=(0,P.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Yt.fetch()(cs(y,y.config.apiHost,g,he),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Lr(y,h,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},qt),h);try{const T=new Vr(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw Di(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const he=R.ok?q.errorMessage:q.error.message,[Fe,Ze]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Di(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Fe)throw Di(y,"email-already-in-use",q);const ht=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,ht,Ze);Te(y,ht)}}catch(T){if(T instanceof P.ZR)throw T;Te(y,"network-request-failed")}})).apply(this,arguments)}function wr(y,h,g,v){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(y,h,g,v,T={}){const R=yield Mt(y,h,g,v,T);return"mfaPendingCredential"in R&&Te(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function cs(y,h,g,v){const T=`${h}${g}?${v}`;return y.config.emulator?En(y.config,T):`${y.config.apiScheme}://${T}`}class Vr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Di(y,h,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=ve(y,h,v);return T.customData._tokenResponse=g,T}function Ur(){return(Ur=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function pn(y,h){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Us(y,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Bn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function yo(){return(yo=(0,f.Z)(function*(y,h=!1){const g=(0,P.m9)(y),v=yield g.getIdToken(h),T=rt(v);B(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Bn(Vt(T.auth_time)),issuedAtTime:Bn(Vt(T.iat)),expirationTime:Bn(Vt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function rt(y){const[h,g,v]=y.split(".");if(void 0===h||void 0===g||void 0===v)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(Ke("Failed to decode base64 JWT payload"),null)}catch(T){return Ke("Caught error parsing JWT payload as JSON",T),null}}function or(y,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Nt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Nt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Bs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class ar{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(y){return L.apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(y){var h;const g=y.auth,v=yield y.getIdToken(),T=yield or(y,Us(g,{idToken:v}));B(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?$(R.providerUserInfo):[],he=De(y.providerData,q),ht=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==he?void 0:he.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:he,metadata:new ar(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(y,ot)})).apply(this,arguments)}function G(){return(G=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield ur(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function De(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function $(y){return y.map(h=>{var{providerId:g}=h,v=(0,ne._T)(h,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Re(){return(Re=(0,f.Z)(function*(y,h){const g=yield Lr(y,{},(0,f.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=cs(y,T,"/v1/token",`key=${R}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(q,{method:"POST",headers:he,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){B(h.idToken,"internal-error"),B(void 0!==h.idToken,"internal-error"),B(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function gt(y){const h=rt(y);return B(h,"internal-error"),B(void 0!==h.exp,"internal-error"),B(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var v=this;return(0,f.Z)(function*(){return B(!v.accessToken||v.refreshToken,h,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function Y(y,h){return Re.apply(this,arguments)}(h,g);v.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(h,g,v){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,q=new Qe;return v&&(B("string"==typeof v,"internal-error",{appName:h}),q.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:h}),q.accessToken=T),R&&(B("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return _e("not implemented")}}function ut(y,h){B("string"==typeof y||void 0===y,"internal-error",{appName:h})}class vt{constructor(h){var{uid:g,auth:v,stsTokenManager:T}=h,R=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ar(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const v=yield or(g,g.stsTokenManager.getToken(g.auth,h));return B(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(h){return function ci(y){return yo.apply(this,arguments)}(this,h)}reload(){return function H(y){return G.apply(this,arguments)}(this)}_assign(h){this!==h&&(B(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new vt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield ur(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield or(h,function dt(y,h){return Ur.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var v,T,R,q,he,Fe,Ze,ht;const ot=null!==(v=g.displayName)&&void 0!==v?v:void 0,_n=null!==(T=g.email)&&void 0!==T?T:void 0,ni=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Bl=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Iy=null!==(he=g.tenantId)&&void 0!==he?he:void 0,zo=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,ud=null!==(Ze=g.createdAt)&&void 0!==Ze?Ze:void 0,ld=null!==(ht=g.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:kh,emailVerified:cd,isAnonymous:ri,providerData:Fh,stsTokenManager:Lh}=g;B(kh&&Lh,h,"internal-error");const dd=Qe.fromJSON(this.name,Lh);B("string"==typeof kh,h,"internal-error"),ut(ot,h.name),ut(_n,h.name),B("boolean"==typeof cd,h,"internal-error"),B("boolean"==typeof ri,h,"internal-error"),ut(ni,h.name),ut(Bl,h.name),ut(Iy,h.name),ut(zo,h.name),ut(ud,h.name),ut(ld,h.name);const jl=new vt({uid:kh,auth:h,email:_n,emailVerified:cd,displayName:ot,isAnonymous:ri,photoURL:Bl,phoneNumber:ni,tenantId:Iy,stsTokenManager:dd,createdAt:ud,lastLoginAt:ld});return Fh&&Array.isArray(Fh)&&(jl.providerData=Fh.map(Fu=>Object.assign({},Fu))),zo&&(jl._redirectEventId=zo),jl}static _fromIdTokenResponse(h,g,v=!1){return(0,f.Z)(function*(){const T=new Qe;T.updateFromServerResponse(g);const R=new vt({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield ur(R),R})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,f.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function On(y,h,g){return`firebase:${y}:${h}:${g}`}class Ir{constructor(h,g,v){this.persistence=h,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=On(this.userKey,T.apiKey,R),this.fullPersistenceKey=On("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?vt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Ir(J(yt),h,v);const T=(yield Promise.all(g.map(function(){var Ze=(0,f.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=T[0]||J(yt);const q=On(v,h.config.apiKey,h.name);let he=null;for(const Ze of g)try{const ht=yield Ze._get(q);if(ht){const ot=vt._fromJSON(h,ht);Ze!==R&&(he=ot),R=Ze;break}}catch(ht){}const Fe=T.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],he&&(yield R._set(q,he.toJSON())),yield Promise.all(g.map(function(){var Ze=(0,f.Z)(function*(ht){if(ht!==R)try{yield ht._remove(q)}catch(ot){}});return function(ht){return Ze.apply(this,arguments)}}())),new Ir(R,h,v)):new Ir(R,h,v)})()}}function nu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Pn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ta(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(qi(h))return"Blackberry";if(kn(h))return"Webos";if(ru(h))return"Safari";if((h.includes("chrome/")||na(h))&&!h.includes("edge/"))return"Chrome";if(Dr(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ta(y=(0,P.z$)()){return/firefox\//i.test(y)}function ru(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function na(y=(0,P.z$)()){return/crios\//i.test(y)}function Pn(y=(0,P.z$)()){return/iemobile/i.test(y)}function Dr(y=(0,P.z$)()){return/android/i.test(y)}function qi(y=(0,P.z$)()){return/blackberry/i.test(y)}function kn(y=(0,P.z$)()){return/webos/i.test(y)}function Sr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function ds(y=(0,P.z$)()){return Sr(y)||Dr(y)||kn(y)||qi(y)||/windows phone/i.test(y)||Pn(y)}function _o(y,h=[]){let g;switch(y){case"Browser":g=nu((0,P.z$)());break;case"Worker":g=`${nu((0,P.z$)())}-${y}`;break;default:g=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class Mr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const v=R=>new Promise((q,he)=>{try{q(h(R))}catch(Fe){he(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const v=[];try{for(const T of g.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(q){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(h,g,v){this.app=h,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zt(this),this.idTokenSubscription=new Zt(this),this.beforeStateQueue=new Mr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,g){var v=this;return g&&(this._popupRedirectResolver=J(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Ir.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,q=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const he=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Ze=yield g.tryRedirectSignIn(h);(!he||he===Fe)&&(null==Ze?void 0:Ze.user)&&(R=Ze.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(he){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(he))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield ur(h)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&B(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(h,g=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&B(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(J(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,g,v){return this.registerStateListener(this.authStateSubscription,h,g,v)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,v){return this.registerStateListener(this.idTokenSubscription,h,g,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=h&&J(h)||g._popupRedirectResolver;B(v,g,"argument-error"),g.redirectPersistenceManager=yield Ir.create(g,[J(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return B(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,v,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_o(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function it(y){return(0,P.m9)(y)}class Zt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function bi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class di{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _e("not implemented")}_getIdTokenResponse(h){return _e("not implemented")}_linkToIdToken(h,g){return _e("not implemented")}_getReauthenticationResolver(h){return _e("not implemented")}}function In(y,h){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:resetPassword",Ht(y,h))})).apply(this,arguments)}function ia(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function iu(y,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",Ht(y,h))})).apply(this,arguments)}function $s(){return($s=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPassword",Ht(y,h))})).apply(this,arguments)}function ps(y,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:sendOobCode",Ht(y,h))})).apply(this,arguments)}function Qt(y,h){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function sa(y,h){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function Ti(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function bc(y,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(y,h){return ps(y,h)})).apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,h))})).apply(this,arguments)}function Tc(){return(Tc=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,h))})).apply(this,arguments)}class cr extends di{constructor(h,g,v,T=null){super("password",v),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new cr(h,g,"password")}static _fromEmailAndCode(h,g,v=null){return new cr(h,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Fn(y,h){return $s.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Si(y,h){return dl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return ia(h,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function pp(y,h){return Tc.apply(this,arguments)}(h,{idToken:g,email:v._email,oobCode:v._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function gs(y,h){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithIdp",Ht(y,h))})).apply(this,arguments)}class zi extends di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new zi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=g,R=(0,ne._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const q=new zi(v,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return gs(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,gs(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,gs(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,P.xO)(g)}return h}}function hl(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,h))})).apply(this,arguments)}function ms(){return(ms=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,h))})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(y,h){const g=yield wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,h));if(g.temporaryProof)throw Di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const yp={USER_NOT_FOUND:"user-not-found"};function xc(){return(xc=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),yp)})).apply(this,arguments)}class vo extends di{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new vo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new vo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function fl(y,h){return ms.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function mp(y,h){return Mc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function _p(y,h){return xc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||g||T||R?new vo({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class au{constructor(h){var g,v,T,R,q,he;const Fe=(0,P.zd)((0,P.pd)(h)),Ze=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ht=null!==(v=Fe.oobCode)&&void 0!==v?v:null,ot=function Rc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);B(Ze&&ht&&ot,"argument-error"),this.apiKey=Ze,this.operation=ot,this.code=ht,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Fe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(he=Fe.tenantId)&&void 0!==he?he:null}static parseLink(h){const g=function oa(y){const h=(0,P.zd)((0,P.pd)(y)).link,g=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||g||h||y}(h);try{return new au(g)}catch(v){return null}}}let Oc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return cr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=au.parseLink(v);return B(T,"argument-error"),cr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class dr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Hs extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Mi extends Hs{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return B("providerId"in g&&"signInMethod"in g,"argument-error"),zi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return B(h.idToken||h.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Mi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Mi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:he}=h;if(!v&&!T&&!g&&!R||!he)return null;try{return new Mi(he)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(Fe){return null}}}let Eo=(()=>{class y extends Hs{constructor(){super("facebook.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Pc=(()=>{class y extends Hs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),hh=(()=>{class y extends Hs{constructor(){super("github.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Gs extends di{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return gs(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,gs(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,gs(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new Gs(v,R):null}static _create(h,g){return new Gs(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cr extends dr{constructor(h){B(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Cr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Cr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Gs.fromJSON(h);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:v}=h;if(!g||!v)return null;try{return Gs._create(v,g)}catch(T){return null}}}let kc=(()=>{class y extends Hs{constructor(){super("twitter.com")}static credential(g,v){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function br(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signUp",Ht(y,h))})).apply(this,arguments)}class $r{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,v,T=!1){return(0,f.Z)(function*(){const R=yield vt._fromIdTokenResponse(h,v,T),q=pl(v);return new $r({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(h,g,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=pl(v);return new $r({user:h,providerId:T,_tokenResponse:v,operationType:g})})()}}function pl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function gl(){return(gl=(0,f.Z)(function*(y){var h;const g=it(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new $r({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield br(g,{returnSecureToken:!0}),T=yield $r._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Do extends P.ZR{constructor(h,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,g,v,T){return new Do(h,g,v,T)}}function ml(y,h,g,v){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Do._fromErrorAndOperation(y,R,h,v):R})}function xi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Jt(){return(Jt=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);yield zt(!0,g,h);const{providerUserInfo:v}=yield pn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=xi(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function aa(y,h){return qs.apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(y,h,g=!1){const v=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return $r._forOperation(y,"link",v)})).apply(this,arguments)}function zt(y,h,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(y,h,g){yield ur(h);const T=!1===y?"provider-already-linked":"no-such-provider";B(xi(h.providerData).has(g)===y,h.auth,T)})).apply(this,arguments)}function uu(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(y,h,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield or(y,ml(v,T,h,y),g);B(R.idToken,v,"internal-error");const q=rt(R.idToken);B(q,v,"internal-error");const{sub:he}=q;return B(y.uid===he,v,"user-mismatch"),$r._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Te(v,"user-mismatch"),R}})).apply(this,arguments)}function Qn(y,h){return yl.apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(y,h,g=!1){const v="signIn",T=yield ml(y,v,h),R=yield $r._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function un(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y,h){return Qn(it(y),h)})).apply(this,arguments)}function Jn(y,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);return yield zt(!1,g,h.providerId),aa(g,h)})).apply(this,arguments)}function Wi(y,h){return la.apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(y,h){return uu((0,P.m9)(y),h)})).apply(this,arguments)}function hi(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,h))})).apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(y,h){const g=it(y),v=yield hi(g,{token:h,returnSecureToken:!0}),T=yield $r._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class bo{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?lu._fromServerResponse(h,g):Te(h,"internal-error")}}class lu extends bo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new lu(g)}}function ca(y,h,g){var v;B((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function da(){return(da=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};g&&ca(v,T,g),yield sa(v,T)})).apply(this,arguments)}function El(){return(El=(0,f.Z)(function*(y,h,g){yield In((0,P.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(y,h){yield iu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function cu(y,h){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),v=yield In(g,{oobCode:h}),T=v.requestType;switch(B(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,g,"internal-error");default:B(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=bo._fromServerResponse(it(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(y,h){const{data:g}=yield cu((0,P.m9)(y),h);return g.email})).apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(y,h,g){const v=it(y),T=yield br(v,{returnSecureToken:!0,email:h,password:g}),R=yield $r._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};B(g.handleCodeInApp,v,"argument-error"),g&&ca(v,T,g),yield Ti(v,T)})).apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T=Oc.credentialWithLink(h,g||Oe());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),un(v,T)})).apply(this,arguments)}function Zi(y,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:createAuthUri",Ht(y,h))})).apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:st()?Oe():"http://localhost"},{signinMethods:T}=yield Zi((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ca(g.auth,T,h);const{email:R}=yield Qt(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&ca(v.auth,R,g);const{email:q}=yield bc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function ga(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const v=(0,P.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield or(v,ga(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const he=v.providerData.find(({providerId:Fe})=>"password"===Fe);he&&(he.displayName=v.displayName,he.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function Ao(y,h,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(y,h,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const q=yield or(y,ia(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class So{constructor(h,g,v={}){this.isNewUser=h,this.providerId=g,this.profile=v}}class Vc extends So{constructor(h,g,v,T){super(h,g,v),this.username=T}}class Mo extends So{constructor(h,g){super(h,"facebook.com",g)}}class Oi extends Vc{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ph extends So{constructor(h,g){super(h,"google.com",g)}}class jn extends Vc{constructor(h,g,v){super(h,"twitter.com",g,v)}}function Pi(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Lc(y){var h,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new So(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new Mo(R,T);case"github.com":return new Oi(R,T);case"google.com":return new ph(R,T);case"twitter.com":return new jn(R,T,y.screenName||null);case"custom":case"anonymous":return new So(R,null);default:return new So(R,v,T)}}(g)}class Ki{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new Ki("enroll",h)}static _fromMfaPendingCredential(h){return new Ki("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,v;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ki._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Ki._fromIdtoken(h.multiFactorSession.idToken)}return null}}class xo{constructor(h,g,v){this.session=h,this.hints=g,this.signInResolver=v}static _fromError(h,g){const v=it(h),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(he=>bo._fromServerResponse(v,he));B(T.mfaPendingCredential,v,"internal-error");const q=Ki._fromMfaPendingCredential(T.mfaPendingCredential);return new xo(q,R,function(){var he=(0,f.Z)(function*(Fe){const Ze=yield Fe._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const ht=Object.assign(Object.assign({},T),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(g.operationType){case"signIn":const ot=yield $r._fromIdTokenResponse(v,g.operationType,ht);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return B(g.user,v,"internal-error"),$r._forOperation(g.user,g.operationType,ht);default:Te(v,"internal-error")}});return function(Fe){return he.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function mh(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,h))}class jc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>bo._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new jc(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Ki._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var v=this;return(0,f.Z)(function*(){const T=h,R=yield v.getSession(),q=yield or(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),R=yield or(g.user,function gu(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const mu=new WeakMap,Ks="__sak";class $c{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gr=(()=>{class y extends $c{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ip(){const y=(0,P.z$)();return ru(y)||Sr(y)}()&&function Yn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((he,Fe,Ze)=>{this.notifyListeners(he,Ze)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(T);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const he=this.storage.getItem(T);!v&&this.localCache[T]===he||this.notifyListeners(T,he)},q=this.storage.getItem(T);!function ra(){return(0,P.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,f.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Mn=(()=>{class y extends $c{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Hc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const T=g,{eventId:R,eventType:q,data:he}=T.data,Fe=v.handlersMap[q];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ze=Array.from(Fe).map(function(){var ot=(0,f.Z)(function*(_n){return _n(T.origin,he)});return function(_n){return ot.apply(this,arguments)}}()),ht=yield function Tl(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return h.apply(this,arguments)}}()))}(Ze);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:ht})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ki(y="",h=10){let g="";for(let v=0;v<h;v++)g+=Math.floor(10*Math.random());return y+g}class Al{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,v=50){var T=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,he;return new Promise((Fe,Ze)=>{const ht=ki("",20);R.port1.start();const ot=setTimeout(()=>{Ze(new Error("unsupported_event"))},v);he={messageChannel:R,onMessage(_n){const ni=_n;if(ni.data.eventId===ht)switch(ni.data.status){case"ack":clearTimeout(ot),q=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Fe(ni.data.response);break;default:clearTimeout(ot),clearTimeout(q),Ze(new Error("invalid_response"))}}},T.handlers.add(he),R.port1.addEventListener("message",he.onMessage),T.target.postMessage({eventType:h,eventId:ht,data:g},[R.port2])}).finally(()=>{he&&T.removeMessageHandler(he)})})()}}function en(){return window}function pi(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}function _u(){return(_u=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Sl="firebaseLocalStorageDb",Ro="firebaseLocalStorage",No="fbase_key";class vs{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Xn(y,h){return y.transaction([Ro],h?"readwrite":"readonly").objectStore(Ro)}function Es(){const y=indexedDB.open(Sl,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ro,{keyPath:No})}catch(T){g(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ro)?h(v):(v.close(),yield function vu(){const y=indexedDB.deleteDatabase(Sl);return new vs(y).toPromise()}(),h(yield Es()))}))})}function Oo(y,h,g){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,h,g){const v=Xn(y,!0).put({[No]:h,value:g});return new vs(v).toPromise()})).apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,h){const g=Xn(y,!1).get(h),v=yield new vs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function ko(y,h){const g=Xn(y,!0).delete(h);return new vs(g).toPromise()}const Is=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Es()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return pi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Hc._getInstance(function qc(){return pi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function Ct(){return _u.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Al(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Gc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Es();return yield Oo(g,Ks,"1"),yield ko(g,Ks),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(R=>Oo(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(R=>function Po(y,h){return Ys.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>ko(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(q=>{const he=Xn(q,!1).getAll();return new vs(he).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:he}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(he)&&(g.notifyListeners(q,he),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function er(y,h){return Mt(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,h))}function bn(){return(bn=(0,f.Z)(function*(y){return(yield Mt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fi(y){return new Promise((h,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ve("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function Js(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Yi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Wr=1e12;class yn{constructor(h){this.auth=h,this.counter=Wr,this._widgets=new Map}render(h,g){const v=this.counter;return this._widgets.set(v,new wu(h,this.auth.name,g||{})),this.counter++,v}reset(h){var g;const v=h||Wr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Wr))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(h||Wr))||void 0===v||v.execute(),""})()}}class wu{constructor(h,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;B(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Da(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const an=Yi("rcb"),Dp=new Wt(3e4,6e4);class ey{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!en().grecaptcha}load(h,g=""){return B(function Vo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(en().grecaptcha):new Promise((v,T)=>{const R=en().setTimeout(()=>{T(ve(h,"network-request-failed"))},Dp.get());en()[an]=()=>{en().clearTimeout(R),delete en()[an];const he=en().grecaptcha;if(!he)return void T(ve(h,"internal-error"));const Fe=he.render;he.render=(Ze,ht)=>{const ot=Fe(Ze,ht);return this.counter++,ot},this.hostLanguage=g,v(he)},Fi(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:an,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!en().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Or{load(h){return(0,f.Z)(function*(){return new yn(h)})()}clearedOneInstance(){}}const zc="recaptcha",Ds={theme:"light",type:"image"};class Xs{constructor(h,g=Object.assign({},Ds),v){this.parameters=g,this.type=zc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Or:new ey,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=he=>{!he||(h.tokenChangeListeners.delete(q),R(he))};h.tokenChangeListeners.add(q),h.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof h)h(g);else if("string"==typeof h){const v=en()[h];"function"==typeof v&&v(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){B(st()&&!pi(),h.auth,"internal-error"),yield function Iu(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Eu(y){return bn.apply(this,arguments)}(h.auth);B(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ln{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=vo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function eo(){return(eo=(0,f.Z)(function*(y,h,g){const v=it(y),T=yield Uo(v,h,(0,P.m9)(g));return new ln(T,R=>un(v,R))})).apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);yield zt(!1,v,"phone");const T=yield Uo(v.auth,h,(0,P.m9)(g));return new ln(T,R=>Jn(v,R))})).apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T=yield Uo(v.auth,h,(0,P.m9)(g));return new ln(T,R=>Wi(v,R))})).apply(this,arguments)}function Uo(y,h,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y,h,g){var v;const T=yield g.verify();try{let R;if(B("string"==typeof T,y,"argument-error"),B(g.type===zc,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return B("enroll"===q.type,y,"internal-error"),(yield mh(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===q.type,y,"internal-error");const he=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return B(he,y,"missing-multi-factor-info"),(yield er(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield hl(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(y,h){yield aa((0,P.m9)(y),h)})).apply(this,arguments)}let ro=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=it(g)}verifyPhoneNumber(g,v){return Uo(this.auth,g,(0,P.m9)(v))}static credential(g,v){return vo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?vo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Qi(y,h){return h?J(h):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ca extends di{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return gs(h,this._buildIdpRequest())}_linkToIdToken(h,g){return gs(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return gs(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function bt(y){return Qn(y.auth,new Ca(y),y.bypassAuthState)}function Du(y){const{auth:h,user:g}=y;return B(g,h,"internal-error"),uu(g,new Ca(y),y.bypassAuthState)}function Hn(y){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return B(g,h,"internal-error"),aa(g,new Ca(y),y.bypassAuthState)})).apply(this,arguments)}class Cs{constructor(h,g,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:q,error:he,type:Fe}=h;if(he)return void g.reject(he);const Ze={auth:g.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ze))}catch(ht){g.reject(ht)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return bt;case"linkViaPopup":case"linkViaRedirect":return Hn;case"reauthViaPopup":case"reauthViaRedirect":return Du;default:Te(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bp=new Wt(2e3,1e4);function bs(){return(bs=(0,f.Z)(function*(y,h,g){const v=it(y);je(y,h,dr);const T=Qi(v,g);return new Rl(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,dr);const T=Qi(v.auth,g);return new Rl(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,dr);const T=Qi(v.auth,g);return new Rl(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Rl=(()=>{class y extends Cs{constructor(g,v,T,R,q){super(g,v,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return B(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=ki();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,bp.get())};g()}}return y.currentPopupAction=null,y})();const tr=new Map;class ny extends Cs{constructor(h,g,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=tr.get(g.auth._key());if(!v){try{const R=(yield function jo(y,h){return $o.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}tr.set(g.auth._key(),v)}return g.bypassAuthState||tr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,g().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function $o(){return($o=(0,f.Z)(function*(y,h){const g=F(h),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function io(y,h){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(y,h){return M(y)._set(F(h),"true")})).apply(this,arguments)}function C(y,h){tr.set(y._key(),h)}function M(y){return J(y._redirectPersistence)}function F(y){return On("pendingRedirect",y.config.apiKey,y.name)}function pe(){return(pe=(0,f.Z)(function*(y,h,g){const v=it(y);je(y,h,dr);const T=Qi(v,g);return yield io(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,dr);const T=Qi(v.auth,g);yield io(T,v.auth);const R=yield Qr(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,dr);const T=Qi(v.auth,g);yield zt(!1,v,h.providerId),yield io(T,v.auth);const R=yield Qr(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h){return yield it(y)._initializationPromise,Pr(y,h,!1)})).apply(this,arguments)}function Pr(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(y,h,g=!1){const v=it(y),T=Qi(v,h),q=yield new ny(v,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,h)),q})).apply(this,arguments)}function Qr(y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y){const h=ki(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Tu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(g=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Tp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Au(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var v;if(h.error&&!Au(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const v=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nl(h))}saveEventToCache(h){this.cachedEventUids.add(Nl(h)),this.lastProcessedEventTime=Date.now()}}function Nl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Au({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Ap(y){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(y,h={}){return Mt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const so=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ol=/^https?/;function Sp(){return(Sp=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Ap(y);for(const g of h)try{if(Mp(g))return}catch(v){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function Mp(y){const h=Oe(),{protocol:g,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!Ol.test(g))return!1;if(so.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const iy=new Wt(3e4,6e4);function xp(){const y=en().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Su=null;function oo(y){return Su=Su||function _h(y){return new Promise((h,g)=>{var v,T,R;function q(){xp(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{xp(),g(ve(y,"network-request-failed"))},timeout:iy.get()})}if(null===(T=null===(v=en().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=en().gapi)||void 0===R?void 0:R.load)){const he=Yi("iframefcb");return en()[he]=()=>{gapi.load?q():g(ve(y,"network-request-failed"))},Fi(`https://apis.google.com/js/api.js?onload=${he}`).catch(Fe=>g(Fe))}q()}}).catch(h=>{throw Su=null,h})}(y),Su}const ao=new Wt(5e3,15e3),sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oy(y){const h=y.config;B(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?En(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Mu.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,P.xO)(v).slice(1)}`}function Ho(){return Ho=(0,f.Z)(function*(y){const h=yield oo(y),g=en().gapi;return B(g,y,"internal-error"),h.open({where:document.body,url:oy(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sy,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const he=ve(y,"network-request-failed"),Fe=en().setTimeout(()=>{q(he)},ao.get());function Ze(){en().clearTimeout(Fe),R(v)}v.ping(Ze).then(Ze,()=>{q(he)})});return function(R,q){return T.apply(this,arguments)}}()))}),Ho.apply(this,arguments)}const vh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ts(y,h,g,v,T,R){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof dr){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ze]of Object.entries(R||{}))q[Fe]=Ze}if(h instanceof Hs){const Fe=h.getScopes().filter(Ze=>""!==Ze);Fe.length>0&&(q.scopes=Fe.join(","))}y.tenantId&&(q.tid=y.tenantId);const he=q;for(const Fe of Object.keys(he))void 0===he[Fe]&&delete he[Fe];return`${function kl({config:y}){return y.emulator?En(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(he).slice(1)}`}const ed="webStorageSupport";class td extends class M0{constructor(h){this.factorId=h}_process(h,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,v);case"signin":return this._finalizeSignIn(h,g.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new td(h)}_finalizeEnroll(h,g,v){return function Zs(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,h))}(h,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Qs(y,h){return Mt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Op=(()=>{class y{constructor(){}static assertion(g){return td._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Pp="@firebase/auth";class Fp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function As(){return window}function Aa(){return(Aa=(0,f.Z)(function*(y,h,g){var v;const{BuildInfo:T}=As();W(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Dh(h.sessionId),q={};return Sr()?q.ibi=T.packageName:Dr()?q.apn=T.packageName:Te(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,Ts(y,g,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function rd(){return(rd=(0,f.Z)(function*(y){const{BuildInfo:h}=As(),g={};Sr()?g.iosBundleId=h.packageName:Dr()?g.androidPackageName=h.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Ap(y,g)})).apply(this,arguments)}function Up(){return(Up=(0,f.Z)(function*(y,h,g){const{cordova:v}=As();let T=()=>{};try{yield new Promise((R,q)=>{let he=null;function Fe(){var ot;R();const _n=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof _n&&_n(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ze(){he||(he=window.setTimeout(()=>{q(ve(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}h.addPassiveListener(Fe),document.addEventListener("resume",Ze,!1),Dr()&&document.addEventListener("visibilitychange",ht,!1),T=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",ht,!1),he&&window.clearTimeout(he)}})}finally{T()}})).apply(this,arguments)}function Dh(y){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,f.Z)(function*(y){const h=Ch(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ch(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function x0(y){(0,oe._registerComponent)(new ae.wA("auth",(h,{options:g})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((he,Fe)=>{B(R&&!R.includes(":"),"invalid-api-key",{appName:he.name}),B(!(null==q?void 0:q.includes(":")),"argument-error",{appName:he.name});const Ze={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_o(y)},ht=new qe(he,Fe,Ze);return function se(y,h){const g=(null==h?void 0:h.persistence)||[],v=(Array.isArray(g)?g:[g]).map(J);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ht,g),ht})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ae.wA("auth-internal",h=>{const g=it(h.getProvider("auth").getImmediate());return new Fp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Pp,"0.20.1",function nd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Pp,"0.20.1","esm2017")}("Browser");class sd extends Tu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Nu(y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(y){const h=yield Ma()._get(Th(y));return h&&(yield Ma()._remove(Th(y))),h})).apply(this,arguments)}function bh(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Ma(){return J(Gr)}function Th(y){return On("authEvent",y.config.apiKey,y.name)}function Ut(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Pu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function xa(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function $p(y=(0,P.z$)()){return!("file:"!==xa()&&"ionic:"!==xa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function xh(){try{const y=self.localStorage,h=ki();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Mh(y=(0,P.z$)()){return function Tr(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ra(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return nr()&&(0,P.hl)()}return!1}function nr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Na(){return(function my(){return"http:"===xa()||"https:"===xa()}()||(0,P.ru)()||$p())&&!function qo(){return(0,P.b$)()||(0,P.UG)()}()&&xh()&&!nr()}function od(){return $p()&&"undefined"!=typeof document}function Vl(){return(Vl=(0,f.Z)(function*(){return!!od()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Xr={LOCAL:"local",NONE:"none",SESSION:"session"},uo=B,Gp="persistence";function ku(y){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,f.Z)(function*(y){yield y._initializationPromise;const h=zp(),g=On(Gp,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function zp(){var y;try{return(null===(y=function Hp(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const _y=B;class ei{constructor(){this.browserResolver=J(class ly{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mn,this._completeRedirectFn=Pr,this._overrideRedirectResult=C}_openPopup(h,g,v,T){var R=this;return(0,f.Z)(function*(){var q;W(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const he=Ts(h,g,v,Oe(),T);return function Pl(y,h,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let he="";const Fe=Object.assign(Object.assign({},vh),{width:v.toString(),height:T.toString(),top:R,left:q}),Ze=(0,P.z$)().toLowerCase();g&&(he=na(Ze)?"_blank":g),ta(Ze)&&(h=h||"http://localhost",Fe.scrollbars="yes");const ht=Object.entries(Fe).reduce((_n,[ni,Bl])=>`${_n}${ni}=${Bl},`,"");if(function js(y=(0,P.z$)()){var h;return Sr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ze)&&"_self"!==he)return function ay(y,h){const g=document.createElement("a");g.href=y,g.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(h||"",he),new Rp(null);const ot=window.open(h||"",he,ht);B(ot,y,"popup-blocked");try{ot.focus()}catch(_n){}return new Rp(ot)}(h,he,ki())})()}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function wa(y){en().location.href=y}(Ts(h,g,v,Oe(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(W(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const v=yield function Qc(y){return Ho.apply(this,arguments)}(h),T=new Tu(h);return v.register("authEvent",R=>(B(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(ed,{type:ed},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[ed];void 0!==q&&g(!!q),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ry(y){return Sp.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ds()||ru()||Sr()}}),this.cordovaResolver=J(class jp{constructor(){this._redirectPersistence=Mn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pr,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,f.Z)(function*(){const v=h._key();let T=g.eventManagers.get(v);return T||(T=new sd(h),g.eventManagers.set(v,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){!function xu(y){var h,g,v,T,R,q,he,Fe,Ze,ht;const ot=As();B("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(R=null===(T=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Fe=null===(he=null===(q=null==ot?void 0:ot.cordova)||void 0===q?void 0:q.plugins)||void 0===he?void 0:he.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ht=null===(Ze=null==ot?void 0:ot.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function D(){tr.clear()}(),yield R._originValidation(h);const he=function Ru(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:bh(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,v,T);yield function cy(y,h){return Ma()._set(Th(y),h)}(h,he);const Fe=yield function Xi(y,h,g){return Aa.apply(this,arguments)}(h,he,g),Ze=yield function id(y){const{cordova:h}=As();return new Promise(g=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Cc(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function Sa(y,h,g){return Up.apply(this,arguments)}(h,q,Ze)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Vp(y){return rd.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=As(),q=setTimeout((0,f.Z)(function*(){yield Nu(h),g.onEvent(Pu())}),500),he=function(){var ht=(0,f.Z)(function*(ot){clearTimeout(q);const _n=yield Nu(h);let ni=null;_n&&(null==ot?void 0:ot.url)&&(ni=function dy(y,h){var g,v;const T=function Sh(y){const h=Ut(y),g=h.link?decodeURIComponent(h.link):void 0,v=Ut(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ut(T).link||T||v||g||y}(h);if(T.includes("/__/auth/callback")){const R=Ut(T),q=R.firebaseError?function Ah(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,he=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=he?ve(he):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(_n,ot.url)),g.onEvent(ni||Pu())});return function(_n){return ht.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,he);const Fe=T,Ze=`${R.packageName.toLowerCase()}://`;As().handleOpenURL=function(){var ht=(0,f.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ze)&&he({url:ot}),"function"==typeof Fe)try{Fe(ot)}catch(_n){console.error(_n)}});return function(ot){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mn,this._completeRedirectFn=Pr,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,v,T)})()}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,v,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return od()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _y(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function yy(){return Vl.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Wp(y){return y.unwrap()}function ad(y){return Zp(y)}function Zp(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ro.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Pc;break;case"facebook.com":v=Eo;break;case"github.com":v=hh;break;case"twitter.com":v=kc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:he,nonce:Fe}=h;return R||q||T||he?he?g.startsWith("saml.")?Gs._create(g,he):zi._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:T,accessToken:R}):new Mi(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ti(y,h){return h.catch(g=>{throw g instanceof P.ZR&&function Ey(y,h){var g;const v=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Kp(y,function $n(y,h){var g;const v=(0,P.m9)(y),T=h;return B(h.customData.operationType,v,"argument-error"),B(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),xo._fromError(v,T)}(y,h));else if(v){const T=Zp(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:ad(g),additionalUserInfo:Pi(g),user:Ss.getOrCreate(T)}})}function Nh(y,h){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:v=>ti(y,g.confirm(v))}})).apply(this,arguments)}class Kp{constructor(h,g){this.resolver=g,this.auth=function vy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ti(Wp(this.auth),this.resolver.resolveSignIn(h))}}class Ss{constructor(h){this._delegate=h,this.multiFactor=function yu(y){const h=(0,P.m9)(y);return mu.has(h)||mu.set(h,jc._fromUser(h)),mu.get(h)}(h)}static getOrCreate(h){return Ss.USER_MAP.has(h)||Ss.USER_MAP.set(h,new Ss(h)),Ss.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ti(g.auth,Jn(g._delegate,h))})()}linkWithPhoneNumber(h,g){var v=this;return(0,f.Z)(function*(){return Nh(v.auth,function ty(y,h,g){return xl.apply(this,arguments)}(v._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ti(g.auth,function Zc(y,h,g){return Vi.apply(this,arguments)}(g._delegate,h,ei))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield ku(it(g.auth)),function Pt(y,h,g){return function _t(y,h,g){return hr.apply(this,arguments)}(y,h,g)}(g._delegate,h,ei)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ti(g.auth,Wi(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Nh(this.auth,function Zr(y,h,g){return Kr.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ti(this.auth,function gi(y,h,g){return Cu.apply(this,arguments)}(this._delegate,h,ei))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield ku(it(g.auth)),function Le(y,h,g){return function Et(y,h,g){return at.apply(this,arguments)}(y,h,g)}(g._delegate,h,ei)})()}sendEmailVerification(h){return function Il(y,h){return fu.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function fh(y,h){return Jt.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Ep(y,h){return Ao((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function bl(y,h){return Ao((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function no(y,h){return Bo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Cl(y,h){return ya.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Dl(y,h,g){return pu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ss.USER_MAP=new WeakMap;const Ul=B;let Yp=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ul(T,"invalid-api-key",{appName:g.name}),Ul(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?ei:void 0;this._delegate=v.initialize({options:{persistence:wy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ss.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function xr(y,h,g){const v=it(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Ci(h),{host:q,port:he}=function Sn(y){const h=Ci(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:bi(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:bi(q)}}}(h);v.config.emulator={url:`${R}//${q}${null===he?"":`:${he}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:he,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function sn(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Ae(y,h){return Tt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return cu(this._delegate,g)}confirmPasswordReset(g,v){return function vl(y,h,g){return El.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,f.Z)(function*(){return ti(T._delegate,function Hr(y,h,g){return ha.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function _s(y,h){return fi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function fa(y,h){const g=au.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Ul(Na(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Gn(y,h){return Ji.apply(this,arguments)}(g._delegate,ei);return v?ti(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function hy(y,h){it(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:q,complete:he}=Qp(g,v,T);return this._delegate.onAuthStateChanged(R,q,he)}onIdTokenChanged(g,v,T){const{next:R,error:q,complete:he}=Qp(g,v,T);return this._delegate.onIdTokenChanged(R,q,he)}sendSignInLinkToEmail(g,v){return function vp(y,h,g){return du.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function _l(y,h,g){return da.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let T;switch(function qp(y,h){uo(Object.values(Xr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?uo(h!==Xr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?uo(h===Xr.NONE,y,"unsupported-persistence-type"):nr()?uo(h===Xr.NONE||h===Xr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):uo(h===Xr.NONE||xh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Xr.SESSION:T=Mn;break;case Xr.LOCAL:T=(yield J(Is)._isAvailable())?Is:Gr;break;case Xr.NONE:T=yt;break;default:return Te("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ti(this._delegate,function Fc(y){return gl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ti(this._delegate,un(this._delegate,g))}signInWithCustomToken(g){return ti(this._delegate,function Co(y,h){return lt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return ti(this._delegate,function wl(y,h,g){return un((0,P.m9)(y),Oc.credential(h,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return ti(this._delegate,function hu(y,h,g){return Dn.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Nh(this._delegate,function Ml(y,h,g){return eo.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return Ul(Na(),v._delegate,"operation-not-supported-in-this-environment"),ti(v._delegate,function Wc(y,h,g){return bs.apply(this,arguments)}(v._delegate,g,ei))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return Ul(Na(),v._delegate,"operation-not-supported-in-this-environment"),yield ku(v._delegate),function Z(y,h,g){return function te(y,h,g){return pe.apply(this,arguments)}(y,h,g)}(v._delegate,g,ei)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function To(y,h){return Ws.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Xr,y})();function Qp(y,h,g){let v=y;"function"!=typeof y&&({next:v,error:h,complete:g}=y);const T=v;return{next:q=>T(q&&Ss.getOrCreate(q)),error:h,complete:g}}function wy(y,h){const g=function Oa(y,h){const g=zp();if(!g)return[];const v=On(Gp,y,h);switch(g.getItem(v)){case Xr.NONE:return[yt];case Xr.LOCAL:return[Is,Mn];case Xr.SESSION:return[Mn];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(Is)&&g.push(Is),"undefined"!=typeof window)for(const v of[Gr,Mn])g.includes(v)||g.push(v);return g.includes(yt)||g.push(yt),g}class Ph{constructor(){this.providerId="phone",this._delegate=new ro(Wp(Q.Z.auth()))}static credential(h,g){return ro.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ph.PHONE_SIGN_IN_METHOD=ro.PHONE_SIGN_IN_METHOD,Ph.PROVIDER_ID=ro.PROVIDER_ID;const Jp=B;class N0{constructor(h,g,v=Q.Z.app()){var T;Jp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Xs(h,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function es(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Yp(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oc,FacebookAuthProvider:Eo,GithubAuthProvider:hh,GoogleAuthProvider:Pc,OAuthProvider:Mi,SAMLAuthProvider:Cr,PhoneAuthProvider:Ph,PhoneMultiFactorGenerator:Op,RecaptchaVerifier:N0,TwitterAuthProvider:kc,Auth:Yp,AuthCredential:di,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(Q.Z)},8306:(Je,Ee,O)=>{O.d(Ee,{y:()=>j});var f=O(2961),Q=O(727),P=O(8822),oe=O(4671);var ae=O(2416),ie=O(576),ce=O(2806);let j=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const de=new Me;return de.source=this,de.operator=Ue,de}subscribe(Ue,de,Ce){const Ge=function He(Me){return Me&&Me instanceof f.Lv||function X(Me){return Me&&(0,ie.m)(Me.next)&&(0,ie.m)(Me.error)&&(0,ie.m)(Me.complete)}(Me)&&(0,Q.Nn)(Me)}(Ue)?Ue:new f.Hp(Ue,de,Ce);return(0,ce.x)(()=>{const{operator:Ke,source:Te}=this;Ge.add(Ke?Ke.call(Ge,Te):Te?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(de){Ue.error(de)}}forEach(Ue,de){return new(de=U(de))((Ce,Ge)=>{const Ke=new f.Hp({next:Te=>{try{Ue(Te)}catch(ve){Ge(ve),Ke.unsubscribe()}},error:Ge,complete:Ce});this.subscribe(Ke)})}_subscribe(Ue){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return function fe(Me){return 0===Me.length?oe.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((de,Ce)=>Ce(de),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=U(Ue))((de,Ce)=>{let Ge;this.subscribe(Ke=>Ge=Ke,Ke=>Ce(Ke),()=>de(Ge))})}}return Me.create=Ne=>new Me(Ne),Me})();function U(Me){var Ne;return null!==(Ne=null!=Me?Me:ae.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Je,Ee,O)=>{O.d(Ee,{x:()=>ae});var f=O(8306),Q=O(727);const oe=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),fe=O(2806);let ae=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const X=new ie(this,this);return X.operator=U,X}_throwIfClosed(){if(this.closed)throw new oe}next(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(U)}})}error(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:X}=this;for(;X.length;)X.shift().error(U)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:X,isStopped:He,observers:Me}=this;return X||He?Q.Lc:(this.currentObservers=null,Me.push(U),new Q.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,U)}))}_checkFinalizedStatuses(U){const{hasError:X,thrownError:He,isStopped:Me}=this;X?U.error(He):Me&&U.complete()}asObservable(){const U=new f.y;return U.source=this,U}}return ce.create=(j,U)=>new ie(j,U),ce})();class ie extends ae{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===X||X.call(U,j)}error(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===X||X.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,X;return null!==(X=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==X?X:Q.Lc}}},2961:(Je,Ee,O)=>{O.d(Ee,{Hp:()=>Ue,Lv:()=>X});var f=O(576),Q=O(727),P=O(2416),oe=O(7849);function ne(){}const fe=ce("C",void 0,void 0);function ce(Te,ve,Ie){return{kind:Te,value:ve,error:Ie}}var j=O(3410),U=O(2806);class X extends Q.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Q.Nn)(ve)&&ve.add(this)):this.destination=Ke}static create(ve,Ie,je){return new Ue(ve,Ie,je)}next(ve){this.isStopped?Ge(function ie(Te){return ce("N",Te,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ge(function ae(Te){return ce("E",void 0,Te)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ge(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Me(Te,ve){return He.call(Te,ve)}class Ne{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(je){de(je)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(je){de(je)}else de(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){de(Ie)}}}class Ue extends X{constructor(ve,Ie,je){let Be;if(super(),(0,f.m)(ve)||!ve)Be={next:null!=ve?ve:void 0,error:null!=Ie?Ie:void 0,complete:null!=je?je:void 0};else{let B;this&&P.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),Be={next:ve.next&&Me(ve.next,B),error:ve.error&&Me(ve.error,B),complete:ve.complete&&Me(ve.complete,B)}):Be=ve}this.destination=new Ne(Be)}}function de(Te){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Te):(0,oe.h)(Te)}function Ge(Te,ve){const{onStoppedNotification:Ie}=P.v;Ie&&j.z.setTimeout(()=>Ie(Te,ve))}const Ke={closed:!0,next:ne,error:function Ce(Te){throw Te},complete:ne}},727:(Je,Ee,O)=>{O.d(Ee,{Lc:()=>fe,w0:()=>ne,Nn:()=>ae});var f=O(576);const P=(0,O(3888).d)(ce=>function(U){ce(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var oe=O(8737);class ne{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Me of U)Me.remove(this);else U.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Me){j=Me instanceof P?Me.errors:[Me]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Me of He)try{ie(Me)}catch(Ne){j=null!=j?j:[],Ne instanceof P?j=[...j,...Ne.errors]:j.push(Ne)}}if(j)throw new P(j)}}add(j){var U;if(j&&j!==this)if(this.closed)ie(j);else{if(j instanceof ne){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,oe.P)(U,j)}remove(j){const{_finalizers:U}=this;U&&(0,oe.P)(U,j),j instanceof ne&&j._removeParent(this)}}ne.EMPTY=(()=>{const ce=new ne;return ce.closed=!0,ce})();const fe=ne.EMPTY;function ae(ce){return ce instanceof ne||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function ie(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(Je,Ee,O)=>{O.d(Ee,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,Ee,O)=>{O.d(Ee,{E:()=>Q});const Q=new(O(8306).y)(ne=>ne.complete())},8996:(Je,Ee,O)=>{O.d(Ee,{D:()=>ve});var f=O(8421),Q=O(5363),P=O(9468),fe=O(8306),ie=O(2202),ce=O(576),j=O(9672);function X(Ie,je){if(!Ie)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,j.f)(Be,je,()=>{const B=Ie[Symbol.asyncIterator]();(0,j.f)(Be,je,()=>{B.next().then(_e=>{_e.done?Be.complete():Be.next(_e.value)})},0,!0)})})}var He=O(3670),Me=O(8239),Ne=O(1144),Ue=O(6495),de=O(2206),Ce=O(4532),Ge=O(3260);function ve(Ie,je){return je?function Te(Ie,je){if(null!=Ie){if((0,He.c)(Ie))return function oe(Ie,je){return(0,f.Xf)(Ie).pipe((0,P.R)(je),(0,Q.Q)(je))}(Ie,je);if((0,Ne.z)(Ie))return function ae(Ie,je){return new fe.y(Be=>{let B=0;return je.schedule(function(){B===Ie.length?Be.complete():(Be.next(Ie[B++]),Be.closed||this.schedule())})})}(Ie,je);if((0,Me.t)(Ie))return function ne(Ie,je){return(0,f.Xf)(Ie).pipe((0,P.R)(je),(0,Q.Q)(je))}(Ie,je);if((0,de.D)(Ie))return X(Ie,je);if((0,Ue.T)(Ie))return function U(Ie,je){return new fe.y(Be=>{let B;return(0,j.f)(Be,je,()=>{B=Ie[ie.h](),(0,j.f)(Be,je,()=>{let _e,W;try{({value:_e,done:W}=B.next())}catch(re){return void Be.error(re)}W?Be.complete():Be.next(_e)},0,!0)}),()=>(0,ce.m)(null==B?void 0:B.return)&&B.return()})}(Ie,je);if((0,Ge.L)(Ie))return function Ke(Ie,je){return X((0,Ge.Q)(Ie),je)}(Ie,je)}throw(0,Ce.z)(Ie)}(Ie,je):(0,f.Xf)(Ie)}},8421:(Je,Ee,O)=>{O.d(Ee,{Xf:()=>He});var f=O(655),Q=O(1144),P=O(8239),oe=O(8306),ne=O(3670),fe=O(2206),ae=O(4532),ie=O(6495),ce=O(3260),j=O(576),U=O(7849),X=O(8822);function He(Te){if(Te instanceof oe.y)return Te;if(null!=Te){if((0,ne.c)(Te))return function Me(Te){return new oe.y(ve=>{const Ie=Te[X.L]();if((0,j.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,Q.z)(Te))return function Ne(Te){return new oe.y(ve=>{for(let Ie=0;Ie<Te.length&&!ve.closed;Ie++)ve.next(Te[Ie]);ve.complete()})}(Te);if((0,P.t)(Te))return function Ue(Te){return new oe.y(ve=>{Te.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,U.h)})}(Te);if((0,fe.D)(Te))return Ce(Te);if((0,ie.T)(Te))return function de(Te){return new oe.y(ve=>{for(const Ie of Te)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Te);if((0,ce.L)(Te))return function Ge(Te){return Ce((0,ce.Q)(Te))}(Te)}throw(0,ae.z)(Te)}function Ce(Te){return new oe.y(ve=>{(function Ke(Te,ve){var Ie,je,Be,B;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(Te);!(je=yield Ie.next()).done;)if(ve.next(je.value),ve.closed)return}catch(_e){Be={error:_e}}finally{try{je&&!je.done&&(B=Ie.return)&&(yield B.call(Ie))}finally{if(Be)throw Be.error}}ve.complete()})})(Te,ve).catch(Ie=>ve.error(Ie))})}},6451:(Je,Ee,O)=>{O.d(Ee,{T:()=>fe});var f=O(8189),Q=O(8421),P=O(515),oe=O(7669),ne=O(8996);function fe(...ae){const ie=(0,oe.yG)(ae),ce=(0,oe._6)(ae,1/0),j=ae;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,f.J)(ce)((0,ne.D)(j,ie)):P.E}},5403:(Je,Ee,O)=>{O.d(Ee,{x:()=>Q});var f=O(2961);function Q(oe,ne,fe,ae,ie){return new P(oe,ne,fe,ae,ie)}class P extends f.Lv{constructor(ne,fe,ae,ie,ce,j){super(ne),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=fe?function(U){try{fe(U)}catch(X){ne.error(X)}}:super._next,this._error=ie?function(U){try{ie(U)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(U){ne.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Je,Ee,O)=>{O.d(Ee,{U:()=>P});var f=O(4482),Q=O(5403);function P(oe,ne){return(0,f.e)((fe,ae)=>{let ie=0;fe.subscribe((0,Q.x)(ae,ce=>{ae.next(oe.call(ne,ce,ie++))}))})}},8189:(Je,Ee,O)=>{O.d(Ee,{J:()=>P});var f=O(5577),Q=O(4671);function P(oe=1/0){return(0,f.z)(Q.y,oe)}},5577:(Je,Ee,O)=>{O.d(Ee,{z:()=>ie});var f=O(4004),Q=O(8421),P=O(4482),oe=O(9672),ne=O(5403),ae=O(576);function ie(ce,j,U=1/0){return(0,ae.m)(j)?ie((X,He)=>(0,f.U)((Me,Ne)=>j(X,Me,He,Ne))((0,Q.Xf)(ce(X,He))),U):("number"==typeof j&&(U=j),(0,P.e)((X,He)=>function fe(ce,j,U,X,He,Me,Ne,Ue){const de=[];let Ce=0,Ge=0,Ke=!1;const Te=()=>{Ke&&!de.length&&!Ce&&j.complete()},ve=je=>Ce<X?Ie(je):de.push(je),Ie=je=>{Me&&j.next(je),Ce++;let Be=!1;(0,Q.Xf)(U(je,Ge++)).subscribe((0,ne.x)(j,B=>{null==He||He(B),Me?ve(B):j.next(B)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ce--;de.length&&Ce<X;){const B=de.shift();Ne?(0,oe.f)(j,Ne,()=>Ie(B)):Ie(B)}Te()}catch(B){j.error(B)}}))};return ce.subscribe((0,ne.x)(j,ve,()=>{Ke=!0,Te()})),()=>{null==Ue||Ue()}}(X,He,ce,U)))}},5363:(Je,Ee,O)=>{O.d(Ee,{Q:()=>oe});var f=O(9672),Q=O(4482),P=O(5403);function oe(ne,fe=0){return(0,Q.e)((ae,ie)=>{ae.subscribe((0,P.x)(ie,ce=>(0,f.f)(ie,ne,()=>ie.next(ce),fe),()=>(0,f.f)(ie,ne,()=>ie.complete(),fe),ce=>(0,f.f)(ie,ne,()=>ie.error(ce),fe)))})}},3099:(Je,Ee,O)=>{O.d(Ee,{B:()=>fe});var f=O(8996),Q=O(5698),P=O(7579),oe=O(2961),ne=O(4482);function fe(ie={}){const{connector:ce=(()=>new P.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:X=!0}=ie;return He=>{let Me=null,Ne=null,Ue=null,de=0,Ce=!1,Ge=!1;const Ke=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Te=()=>{Ke(),Me=Ue=null,Ce=Ge=!1},ve=()=>{const Ie=Me;Te(),null==Ie||Ie.unsubscribe()};return(0,ne.e)((Ie,je)=>{de++,!Ge&&!Ce&&Ke();const Be=Ue=null!=Ue?Ue:ce();je.add(()=>{de--,0===de&&!Ge&&!Ce&&(Ne=ae(ve,X))}),Be.subscribe(je),Me||(Me=new oe.Hp({next:B=>Be.next(B),error:B=>{Ge=!0,Ke(),Ne=ae(Te,j,B),Be.error(B)},complete:()=>{Ce=!0,Ke(),Ne=ae(Te,U),Be.complete()}}),(0,f.D)(Ie).subscribe(Me))})(He)}}function ae(ie,ce,...j){return!0===ce?(ie(),null):!1===ce?null:ce(...j).pipe((0,Q.q)(1)).subscribe(()=>ie())}},9468:(Je,Ee,O)=>{O.d(Ee,{R:()=>Q});var f=O(4482);function Q(P,oe=0){return(0,f.e)((ne,fe)=>{fe.add(P.schedule(()=>ne.subscribe(fe),oe))})}},5698:(Je,Ee,O)=>{O.d(Ee,{q:()=>oe});var f=O(515),Q=O(4482),P=O(5403);function oe(ne){return ne<=0?()=>f.E:(0,Q.e)((fe,ae)=>{let ie=0;fe.subscribe((0,P.x)(ae,ce=>{++ie<=ne&&(ae.next(ce),ne<=ie&&ae.complete())}))})}},8505:(Je,Ee,O)=>{O.d(Ee,{b:()=>ne});var f=O(576),Q=O(4482),P=O(5403),oe=O(4671);function ne(fe,ae,ie){const ce=(0,f.m)(fe)||ae||ie?{next:fe,error:ae,complete:ie}:fe;return ce?(0,Q.e)((j,U)=>{var X;null===(X=ce.subscribe)||void 0===X||X.call(ce);let He=!0;j.subscribe((0,P.x)(U,Me=>{var Ne;null===(Ne=ce.next)||void 0===Ne||Ne.call(ce,Me),U.next(Me)},()=>{var Me;He=!1,null===(Me=ce.complete)||void 0===Me||Me.call(ce),U.complete()},Me=>{var Ne;He=!1,null===(Ne=ce.error)||void 0===Ne||Ne.call(ce,Me),U.error(Me)},()=>{var Me,Ne;He&&(null===(Me=ce.unsubscribe)||void 0===Me||Me.call(ce)),null===(Ne=ce.finalize)||void 0===Ne||Ne.call(ce)}))}):oe.y}},4408:(Je,Ee,O)=>{O.d(Ee,{o:()=>ne});var f=O(727);class Q extends f.w0{constructor(ae,ie){super()}schedule(ae,ie=0){return this}}const P={setInterval(fe,ae,...ie){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(fe,ae,...ie):setInterval(fe,ae,...ie)},clearInterval(fe){const{delegate:ae}=P;return((null==ae?void 0:ae.clearInterval)||clearInterval)(fe)},delegate:void 0};var oe=O(8737);class ne extends Q{constructor(ae,ie){super(ae,ie),this.scheduler=ae,this.work=ie,this.pending=!1}schedule(ae,ie=0){if(this.closed)return this;this.state=ae;const ce=this.id,j=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(j,ce,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(j,this.id,ie),this}requestAsyncId(ae,ie,ce=0){return P.setInterval(ae.flush.bind(ae,this),ce)}recycleAsyncId(ae,ie,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ie;P.clearInterval(ie)}execute(ae,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ae,ie);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ie){let j,ce=!1;try{this.work(ae)}catch(U){ce=!0,j=U||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ie}=this,{actions:ce}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ce,this),null!=ae&&(this.id=this.recycleAsyncId(ie,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,Ee,O)=>{O.d(Ee,{v:()=>P});var f=O(6063);class Q{constructor(ne,fe=Q.now){this.schedulerActionCtor=ne,this.now=fe}schedule(ne,fe=0,ae){return new this.schedulerActionCtor(this,ne).schedule(ae,fe)}}Q.now=f.l.now;class P extends Q{constructor(ne,fe=Q.now){super(ne,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:fe}=this;if(this._active)return void fe.push(ne);let ae;this._active=!0;do{if(ae=ne.execute(ne.state,ne.delay))break}while(ne=fe.shift());if(this._active=!1,ae){for(;ne=fe.shift();)ne.unsubscribe();throw ae}}}},4986:(Je,Ee,O)=>{O.d(Ee,{z:()=>P});var f=O(4408);const P=new(O(7565).v)(f.o)},6063:(Je,Ee,O)=>{O.d(Ee,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Je,Ee,O)=>{O.d(Ee,{z:()=>f});const f={setTimeout(Q,P,...oe){const{delegate:ne}=f;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(Q,P,...oe):setTimeout(Q,P,...oe)},clearTimeout(Q){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(Je,Ee,O)=>{O.d(Ee,{h:()=>Q});const Q=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,Ee,O)=>{O.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,Ee,O)=>{O.d(Ee,{_6:()=>fe,jO:()=>oe,yG:()=>ne});var f=O(576);function P(ae){return ae[ae.length-1]}function oe(ae){return(0,f.m)(P(ae))?ae.pop():void 0}function ne(ae){return function Q(ae){return ae&&(0,f.m)(ae.schedule)}(P(ae))?ae.pop():void 0}function fe(ae,ie){return"number"==typeof P(ae)?ae.pop():ie}},8737:(Je,Ee,O)=>{function f(Q,P){if(Q){const oe=Q.indexOf(P);0<=oe&&Q.splice(oe,1)}}O.d(Ee,{P:()=>f})},3888:(Je,Ee,O)=>{function f(Q){const oe=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ee,{d:()=>f})},2806:(Je,Ee,O)=>{O.d(Ee,{x:()=>P,O:()=>oe});var f=O(2416);let Q=null;function P(ne){if(f.v.useDeprecatedSynchronousErrorHandling){const fe=!Q;if(fe&&(Q={errorThrown:!1,error:null}),ne(),fe){const{errorThrown:ae,error:ie}=Q;if(Q=null,ae)throw ie}}else ne()}function oe(ne){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(Je,Ee,O)=>{function f(Q,P,oe,ne=0,fe=!1){const ae=P.schedule(function(){oe(),fe?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(ae),!fe)return ae}O.d(Ee,{f:()=>f})},4671:(Je,Ee,O)=>{function f(Q){return Q}O.d(Ee,{y:()=>f})},1144:(Je,Ee,O)=>{O.d(Ee,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(Je,Ee,O)=>{O.d(Ee,{D:()=>Q});var f=O(576);function Q(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Je,Ee,O)=>{function f(Q){return"function"==typeof Q}O.d(Ee,{m:()=>f})},3670:(Je,Ee,O)=>{O.d(Ee,{c:()=>P});var f=O(8822),Q=O(576);function P(oe){return(0,Q.m)(oe[f.L])}},6495:(Je,Ee,O)=>{O.d(Ee,{T:()=>P});var f=O(2202),Q=O(576);function P(oe){return(0,Q.m)(null==oe?void 0:oe[f.h])}},8239:(Je,Ee,O)=>{O.d(Ee,{t:()=>Q});var f=O(576);function Q(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Je,Ee,O)=>{O.d(Ee,{Q:()=>P,L:()=>oe});var f=O(655),Q=O(576);function P(ne){return(0,f.FC)(this,arguments,function*(){const ae=ne.getReader();try{for(;;){const{value:ie,done:ce}=yield(0,f.qq)(ae.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ie)}}finally{ae.releaseLock()}})}function oe(ne){return(0,Q.m)(null==ne?void 0:ne.getReader)}},4482:(Je,Ee,O)=>{O.d(Ee,{A:()=>Q,e:()=>P});var f=O(576);function Q(oe){return(0,f.m)(null==oe?void 0:oe.lift)}function P(oe){return ne=>{if(Q(ne))return ne.lift(function(fe){try{return oe(fe,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,Ee,O)=>{O.d(Ee,{h:()=>P});var f=O(2416),Q=O(3410);function P(oe){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=f.v;if(!ne)throw oe;ne(oe)})}},4532:(Je,Ee,O)=>{function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>f})},655:(Je,Ee,O)=>{function oe(W,re){var J={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&re.indexOf(me)<0&&(J[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(me=Object.getOwnPropertySymbols(W);se<me.length;se++)re.indexOf(me[se])<0&&Object.prototype.propertyIsEnumerable.call(W,me[se])&&(J[me[se]]=W[me[se]])}return J}function ie(W,re,J,me){return new(J||(J=Promise))(function(Oe,st){function Lt(Wt){try{Ye(me.next(Wt))}catch(En){st(En)}}function Rt(Wt){try{Ye(me.throw(Wt))}catch(En){st(En)}}function Ye(Wt){Wt.done?Oe(Wt.value):function se(Oe){return Oe instanceof J?Oe:new J(function(st){st(Oe)})}(Wt.value).then(Lt,Rt)}Ye((me=me.apply(W,re||[])).next())})}function de(W){return this instanceof de?(this.v=W,this):new de(W)}function Ce(W,re,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,me=J.apply(W,re||[]),Oe=[];return se={},st("next"),st("throw"),st("return"),se[Symbol.asyncIterator]=function(){return this},se;function st(Yt){me[Yt]&&(se[Yt]=function(qt){return new Promise(function(Er,Ht){Oe.push([Yt,qt,Er,Ht])>1||Lt(Yt,qt)})})}function Lt(Yt,qt){try{!function Rt(Yt){Yt.value instanceof de?Promise.resolve(Yt.value.v).then(Ye,Wt):En(Oe[0][2],Yt)}(me[Yt](qt))}catch(Er){En(Oe[0][3],Er)}}function Ye(Yt){Lt("next",Yt)}function Wt(Yt){Lt("throw",Yt)}function En(Yt,qt){Yt(qt),Oe.shift(),Oe.length&&Lt(Oe[0][0],Oe[0][1])}}function Ke(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,re=W[Symbol.asyncIterator];return re?re.call(W):(W=function X(W){var re="function"==typeof Symbol&&Symbol.iterator,J=re&&W[re],me=0;if(J)return J.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),J={},me("next"),me("throw"),me("return"),J[Symbol.asyncIterator]=function(){return this},J);function me(Oe){J[Oe]=W[Oe]&&function(st){return new Promise(function(Lt,Rt){!function se(Oe,st,Lt,Rt){Promise.resolve(Rt).then(function(Ye){Oe({value:Ye,done:Lt})},st)}(Lt,Rt,(st=W[Oe](st)).done,st.value)})}}}O.d(Ee,{_T:()=>oe,mG:()=>ie,qq:()=>de,FC:()=>Ce,KL:()=>Ke})},5e3:(Je,Ee,O)=>{O.d(Ee,{deG:()=>Dp,tb:()=>rI,AFp:()=>tI,ip1:()=>Pv,CZH:()=>Rm,hGG:()=>u0,z2F:()=>Jf,sBO:()=>Qv,Sil:()=>rh,_Vd:()=>go,EJc:()=>Lv,SBq:()=>$d,qLn:()=>ad,vpe:()=>ui,tBr:()=>Pr,XFs:()=>dt,OlP:()=>an,zs3:()=>xs,ZZ4:()=>r0,aQg:()=>zm,soG:()=>Wf,YKP:()=>pv,h0i:()=>Vs,PXZ:()=>$v,R0b:()=>ss,FiY:()=>Yr,Lbi:()=>Om,g9A:()=>nI,Qsj:()=>Gd,FYo:()=>rl,JOm:()=>T,tp0:()=>Jr,Rgc:()=>Yd,dDg:()=>lI,q4F:()=>cv,GfV:()=>im,s_b:()=>al,ifc:()=>Vt,eFA:()=>hI,G48:()=>Kv,Gpc:()=>U,X6Q:()=>Zv,_c5:()=>MI,VLi:()=>dI,c2e:()=>kv,zSh:()=>Xh,wAp:()=>pt,vHH:()=>Ne,cg1:()=>q_,kL8:()=>z_,dqk:()=>Nt,sIi:()=>Id,CqO:()=>A_,QGY:()=>Wa,F4k:()=>Pg,RDi:()=>ml,AaK:()=>ie,qOj:()=>Jl,TTD:()=>Mi,_Bn:()=>sv,xp6:()=>Dt,uIk:()=>lf,ekj:()=>Md,Suo:()=>Em,Xpm:()=>ut,lG2:()=>ru,Yz7:()=>qt,cJS:()=>Ht,oAB:()=>Ir,Yjl:()=>na,Y36:()=>ft,_UZ:()=>Wn,qZA:()=>Og,TgZ:()=>kt,EpF:()=>xn,n5z:()=>Eu,LFG:()=>Le,$8M:()=>Js,$Z:()=>b_,NdJ:()=>sc,CRH:()=>Bw,kcU:()=>Jm,O4$:()=>Qm,oxw:()=>$e,ALo:()=>_v,lcZ:()=>Rw,Q6J:()=>qa,VKq:()=>Ei,iGM:()=>bv,CHM:()=>cu,LSH:()=>Ou,YNc:()=>I_,_uU:()=>Ya,Oqu:()=>Xu,hij:()=>zg});var f=O(7579),Q=O(727),P=O(8306),oe=O(6451),ne=O(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=fe({__forward_ref__:fe});function U(i){return i.__forward_ref__=U,i.toString=function(){return ie(this())},i}function X(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Ne extends Error{constructor(s,a){super(function Ue(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new Ne(-201,`No provider for ${Ce(i)} found${a}`)}function Rt(i,s){null==i&&function Ye(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mt(i){return Gi(i,Ii)||Gi(i,Vr)}function Gi(i,s){return i.hasOwnProperty(s)?i[s]:null}function wr(i){return i&&(i.hasOwnProperty(cs)||i.hasOwnProperty(Di))?i[cs]:null}const Ii=fe({\u0275prov:fe}),cs=fe({\u0275inj:fe}),Vr=fe({ngInjectableDef:fe}),Di=fe({ngInjectorDef:fe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Ur;function wn(i){const s=Ur;return Ur=i,s}function Us(i,s,a){const l=Mt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==s?s:void ve(ie(i),"Injector")}function Bn(i){return{toString:i}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=rt||"undefined"!=typeof global&&global||gt||or,ur={},L=[],H=fe({\u0275cmp:fe}),G=fe({\u0275dir:fe}),De=fe({\u0275pipe:fe}),$=fe({\u0275mod:fe}),Y=fe({\u0275fac:fe}),Re=fe({__NG_ELEMENT_ID__:fe});let Qe=0;function ut(i){return Bn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Qe++,l.inputs=ta(i.inputs,a),l.outputs=ta(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(rn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function rn(i){return Pn(i)||function Dr(i){return i[G]||null}(i)}function yt(i){return function qi(i){return i[De]||null}(i)}const On={};function Ir(i){return Bn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(On[i.id]=i.type),s})}function ta(i,s){if(null==i)return ur;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const ru=ut;function na(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Pn(i){return i[H]||null}function kn(i,s){const a=i[$]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function Rr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ti(i){return Array.isArray(i)&&!0===i[1]}function ou(i){return 0!=(8&i.flags)}function bc(i){return 2==(2&i.flags)}function Ai(i){return 1==(1&i.flags)}function Si(i){return null!==i.template}function dl(i){return 0!=(512&i[2])}function dr(i,s){return i.hasOwnProperty(Y)?i[Y]:null}class Hs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Mi(){return Eo}function Eo(i){return i.type.prototype.ngOnChanges&&(i.setInput=hh),Pc}function Pc(){const i=Gs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ur)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function hh(i,s,a,l){const c=Gs(i)||function wo(i,s){return i[Nr]=s}(i,{previous:ur,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];p[E]=new Hs(I&&I.currentValue,s,_===ur),i[l]=s}Mi.ngInherit=!0;const Nr="__ngSimpleChanges__";function Gs(i){return i[Nr]||null}let Do;function ml(i){Do=i}function Jt(i){return!!i.listen}const aa={createRenderer:(i,s)=>function xi(){return void 0!==Do?Do:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function ys(i,s){return zt(s[i])}function Qn(i,s){return zt(s[i.index])}function un(i,s){return i.data[s]}function Jn(i,s){const a=s[i];return Rr(a)?a:a[0]}function zs(i){return 4==(4&i[2])}function Wi(i){return 128==(128&i[2])}function hi(i,s){return null==s?null:i[s]}function Ni(i){i[18]=0}function Co(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:Lc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function da(){return lt.bindingsEnabled}function Ae(){return lt.lFrame.lView}function Tt(){return lt.lFrame.tView}function cu(i){return lt.lFrame.contextLView=i,i[8]}function on(){let i=To();for(;null!==i&&64===i.type;)i=i.parent;return i}function To(){return lt.lFrame.currentTNode}function Hr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function ha(){return lt.lFrame.isParent}function fa(){return lt.isInCheckNoChangesMode}function hu(i){lt.isInCheckNoChangesMode=i}function Dn(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function _s(){return lt.lFrame.bindingIndex++}function Dl(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ga(s)}function ga(i){lt.lFrame.currentDirectiveIndex=i}function Cl(){return lt.lFrame.currentQueryIndex}function ya(i){lt.lFrame.currentQueryIndex=i}function Ep(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function bl(i,s,a){if(a&dt.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&dt.Host||(c=Ep(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=lt.lFrame=_a();return l.currentTNode=s,l.lView=i,!0}function Ao(i){const s=_a(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function _a(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Lc(i):s}function Lc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function So(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Vc=So;function Mo(){const i=So();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function jn(){return lt.lFrame.selectedIndex}function Pi(i){lt.lFrame.selectedIndex=i}function gn(){const i=lt.lFrame;return un(i.tView,i.selectedIndex)}function Qm(){lt.lFrame.currentNamespace="svg"}function Jm(){!function Xm(){lt.lFrame.currentNamespace=null}()}function Bc(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function va(i,s,a){$n(i,s,3,a)}function Ki(i,s,a,l){(3&i[2])===a&&$n(i,s,a,l)}function xo(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function $n(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(mh(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function mh(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class gu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Xe(i,s,a){const l=Jt(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=p,E=a[++c];qr(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Gr(i){return 3===i||4===i||6===i}function qr(i){return 64===i.charCodeAt(0)}function Mn(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Tl(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Tl(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function Hc(i){return-1!==i}function ki(i){return 32767&i}function en(i,s){let a=function Al(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let wa=!0;function pi(i){const s=wa;return wa=i,s}let qc=0;function Cn(i,s){const a=No(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Ro(l.data,i),Ro(s,null),Ro(l.blueprint,null));const c=vs(i,s),p=i.injectorIndex;if(Hc(c)){const _=ki(c),E=en(c,s),I=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|I[_+A]}return s[p+8]=c,p}function Ro(i,s){i.push(0,0,0,0,0,0,0,0,s)}function No(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function vs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Xn(i,s,a){!function Sl(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Re)&&(l=a[Re]),null==l&&(l=a[Re]=qc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Es(i,s,a){if(a&dt.Optional)return i;ve(s,"NodeInjector")}function Oo(i,s,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const c=i[9],p=wn(void 0);try{return c?c.get(s,l,a&dt.Optional):Us(s,l,a&dt.Optional)}finally{wn(p)}}return Es(l,s,a)}function ws(i,s,a,l=dt.Default,c){if(null!==i){const p=function Ia(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Re)?i[Re]:void 0;return"number"==typeof s?s>=0?255&s:Ys:s}(a);if("function"==typeof p){if(!bl(s,i,l))return l&dt.Host?Es(c,a,l):Oo(s,a,l,c);try{const _=p(l);if(null!=_||l&dt.Optional)return _;ve(a)}finally{Vc()}}else if("number"==typeof p){let _=null,E=No(i,s),I=-1,A=l&dt.Host?s[16][6]:null;for((-1===E||l&dt.SkipSelf)&&(I=-1===E?vs(i,s):s[E+8],-1!==I&&er(l,!1)?(_=s[1],E=ki(I),s=en(I,s)):E=-1);-1!==E;){const S=s[1];if(Is(p,E,S.data)){const k=ko(E,s,a,_,l,A);if(k!==Po)return k}I=s[E+8],-1!==I&&er(l,s[1].data[E+8]===A)&&Is(p,E,s)?(_=S,E=ki(I),s=en(I,s)):E=-1}}}return Oo(s,a,l,c)}const Po={};function Ys(){return new Qs(on(),Ae())}function ko(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=Fo(E,_,a,null==l?bc(E)&&wa:l!=_&&0!=(3&E.type),c&dt.Host&&p===E);return null!==S?Lo(s,_,S,E):Po}function Fo(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,I=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let K=l?E:E+S;K<V;K++){const ye=_[K];if(K<I&&a===ye||K>=I&&ye.type===a)return K}if(c){const K=_[I];if(K&&Si(K)&&K.type===a)return I}return null}function Lo(i,s,a,l){let c=i[a];const p=s.data;if(function jc(i){return i instanceof gu}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(p[a]));const E=pi(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?wn(_.injectImpl):null;bl(i,l,dt.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function wp(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=Eo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&wn(I),pi(E),_.resolving=!1,Vc()}}return c}function Is(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function er(i,s){return!(i&dt.Self||i&dt.Host&&s)}class Qs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ws(this._tNode,this._lView,s,l,a)}}function Eu(i){return Bn(()=>{const s=i.prototype.constructor,a=s[Y]||bn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Y]||bn(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function bn(i){return He(i)?()=>{const s=bn(X(i));return s&&s()}:dr(i)}function Js(i){return function vu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(Gr(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(on(),i)}const Yi="__parameters__";function yn(i,s,a){return Bn(()=>{const l=function Wr(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(Yi)?I[Yi]:Object.defineProperty(I,Yi,{value:[]})[Yi];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class an{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Dp=new an("AnalyzeForEntryComponents");function Zr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Zr(l,s)):s!==i&&s.push(l)}return s}function Kr(i,s){i.forEach(a=>Array.isArray(a)?Kr(a,s):s(a))}function Uo(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function to(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Hn(i,s,a){let l=Cs(i,s);return l>=0?i[1|l]=a:(l=~l,function Qi(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function ba(i,s){const a=Cs(i,s);if(a>=0)return i[1|a]}function Cs(i,s){return function Wc(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const jo={},$o="__NG_DI_FLAG__",io="ngTempTokenPath",D=/\n/gm,M="__source",F=fe({provide:String,useValue:fe});let Z;function te(i){const s=Z;return Z=i,s}function pe(i,s=dt.Default){if(void 0===Z)throw new Ne(203,"");return null===Z?Us(i,void 0,s):Z.get(i,s&dt.Optional?null:void 0,s)}function Le(i,s=dt.Default){return(function pn(){return Ur}()||pe)(X(i),s)}const at=Le;function Pt(i){const s=[];for(let a=0;a<i.length;a++){const l=X(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let c,p=dt.Default;for(let _=0;_<l.length;_++){const E=l[_],I=hr(E);"number"==typeof I?-1===I?c=E.token:p|=I:c=E}s.push(Le(c,p))}else s.push(Le(l))}return s}function _t(i,s){return i[$o]=s,i.prototype[$o]=s,i}function hr(i){return i[$o]}const Pr=_t(yn("Inject",i=>({token:i})),-1),Yr=_t(yn("Optional"),8),Jr=_t(yn("SkipSelf"),4);class Xc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Go(i){return i instanceof Xc?i.changingThisBreaksApplicationSecurity:i}const nd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ut=(()=>((Ut=Ut||{})[Ut.NONE=0]="NONE",Ut[Ut.HTML=1]="HTML",Ut[Ut.STYLE=2]="STYLE",Ut[Ut.SCRIPT=3]="SCRIPT",Ut[Ut.URL=4]="URL",Ut[Ut.RESOURCE_URL=5]="RESOURCE_URL",Ut))();function Ou(i){const s=function qo(){const i=Ae();return i&&i[12]}();return s?s.sanitize(Ut.URL,i)||"":function Ts(i,s){const a=function kl(i){return i instanceof Xc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Go(i):function As(i){return(i=String(i)).match(nd)||i.match(Lp)?i:"unsafe:"+i}(de(i))}const xh="__ngContext__";function nr(i,s){i[xh]=s}function od(i){const s=function Na(i){return i[xh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function ei(i){return i.ngOriginalError}function vy(i,...s){i.error(...s)}class ad{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Wp(i){return i&&i.ngErrorLogger||vy}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ei(s);for(;a&&ei(a);)a=ei(a);return a||null}}const wy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function es(i){return i instanceof Function?i():i}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function q(i,s){return undefined(i,s)}function Ze(i){const s=i[3];return Ti(s)?s[3]:s}function _n(i){return Bl(i[13])}function ni(i){return Bl(i[4])}function Bl(i){for(;null!==i&&!Ti(i);)i=i[4];return i}function zo(i,s,a,l,c){if(null!=l){let p,_=!1;Ti(l)?p=l:Rr(l)&&(_=!0,l=l[0]);const E=zt(l);0===i&&null!==a?null==c?Ty(s,a,E):ts(s,a,E,c||null,!0):1===i&&null!==a?ts(s,a,E,c||null,!0):2===i?function xy(i,s,a){const l=Ui(i,s);l&&function dD(i,s,a,l){Jt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function ng(i,s,a,l,c){const p=a[7];p!==zt(a)&&zo(s,i,l,p,c);for(let E=10;E<a.length;E++){const I=a[E];tg(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function cd(i,s,a){if(Jt(i))return i.createElement(s,a);{const l=null!==a?function gl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function O0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Co(c,-1)),a.splice(l,1)}function Dy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&O0(c,l),s>0&&(i[a-1][4]=l[4]);const p=to(i,10+s);!function ri(i,s){tg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Cy(i,s){if(!(256&s[2])){const a=s[11];Jt(a)&&a.destroyNode&&tg(i,s,a,3,null,null),function dd(i){let s=i[13];if(!s)return by(i[1],i);for(;s;){let a=null;if(Rr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Rr(s)&&by(s[1],s),s=s[3];null===s&&(s=i),Rr(s)&&by(s[1],s),a=s&&s[4]}s=a}}(s)}}function by(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function k0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof gu)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function P0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):zt(s[_]),I=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&Jt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ti(s[3])){a!==s[3]&&O0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Xp(i,s,a){return function cD(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return Qn(l,a)}(i,s.parent,a)}function ts(i,s,a,l,c){Jt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Ty(i,s,a){Jt(i)?i.appendChild(s,a):s.appendChild(a)}function F0(i,s,a,l,c){null!==l?ts(i,s,a,l,c):Ty(i,s,a)}function Ui(i,s){return Jt(i)?i.parentNode(s):s.parentNode}let Ay=function V0(i,s,a){return 40&i.type?Qn(i,a):null};function eg(i,s,a,l){const c=Xp(i,l,s),p=s[11],E=function L0(i,s,a){return Ay(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)F0(p,c,a[I],E,!1);else F0(p,c,a,E,!1)}function hd(i,s){if(null!==s){const a=s.type;if(3&a)return Qn(s,i);if(4&a)return My(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return hd(i,l);{const c=i[s.index];return Ti(c)?My(-1,c):zt(c)}}if(32&a)return q(s,i)()||zt(i[s.index]);{const l=B0(i,s);return null!==l?Array.isArray(l)?l[0]:hd(Ze(i[16]),l):hd(i,s.next)}}return null}function B0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function My(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return hd(l,c)}return s[7]}function Ry(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&nr(zt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Ry(i,s,a.child,l,c,p,!1),zo(s,i,c,E,p);else if(32&I){const A=q(a,l);let S;for(;S=A();)zo(s,i,c,S,p);zo(s,i,c,E,p)}else 16&I?Ny(i,s,l,a,c,p):zo(s,i,c,E,p);a=_?a.projectionNext:a.next}}function tg(i,s,a,l,c,p){Ry(a,l,i.firstChild,s,c,p,!1)}function Ny(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)zo(s,i,c,I[A],p);else Ry(i,s,I,_[3],c,p,!0)}function $0(i,s,a){Jt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Oy(i,s,a){Jt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function H0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const G0="ng-template";function kr(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==H0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function rg(i){return 4===i.type&&i.value!==G0}function pD(i,s,a){return s===(4!==i.type||a?i.value:G0)}function gD(i,s,a){let l=4;const c=i.attrs||[],p=function $l(i){for(let s=0;s<i.length;s++)if(Gr(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!pD(i,I,a)||""===I&&1===s.length){if(qn(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!kr(i.attrs,A,a)){if(qn(l))return!1;_=!0}continue}const k=ST(8&l?"class":I,c,rg(i),a);if(-1===k){if(qn(l))return!1;_=!0;continue}if(""!==A){let V;V=k>p?"":c[k+1].toLowerCase();const K=8&l?V:null;if(K&&-1!==H0(K,A,0)||2&l&&A!==V){if(qn(l))return!1;_=!0}}}}else{if(!_&&!qn(l)&&!qn(I))return!1;if(_&&qn(I))continue;_=!1,l=I|1&l}}return qn(l)||_}function qn(i){return 0==(1&i)}function ST(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function ig(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function q0(i,s,a=!1){for(let l=0;l<s.length;l++)if(gD(i,s[l],a))return!0;return!1}function Ot(i,s){return i?":not("+s.trim()+")":s}function mD(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!qn(_)&&(s+=Ot(p,c),c=""),l=_,p=p||!qn(l);a++}return""!==c&&(s+=Ot(p,c)),s}const It={};function Dt(i){Vh(Tt(),Ae(),jn()+i,fa())}function Vh(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&va(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Ki(s,p,0,a)}Pi(a)}function Vu(i,s){return i<<17|s<<2}function lo(i){return i>>17&32767}function Py(i){return 2|i}function Fa(i){return(131068&i)>>2}function fr(i,s){return-131069&i|s<<2}function pr(i){return 1|i}function qh(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];ya(c),_.contentQueries(2,s[p],p)}}}function Gl(i,s,a,l,c,p,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ni(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function Uu(i,s,a,l,c){let p=i.data[s];if(null===p)p=function zh(i,s,a,l,c){const p=To(),_=ha(),I=i.data[s]=function bD(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function Il(){return lt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Ws(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Hr(p,!0),p}function ql(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function fd(i,s,a){Ao(s);try{const l=i.viewQuery;null!==l&&Kl(1,l,a);const c=i.template;null!==c&&Ky(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&qh(i,s),i.staticViewQueries&&Kl(2,i.viewQuery,a);const p=i.components;null!==p&&function Zy(i,s){for(let a=0;a<s.length;a++)vg(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Mo()}}function pd(i,s,a,l){const c=s[2];if(256==(256&c))return;Ao(s);const p=fa();try{Ni(s),function pa(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ky(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&va(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Ki(s,A,0,null),xo(s,0)}if(function _i(i){for(let s=_n(i);null!==s;s=ni(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Co(p,1),c[2]|=1024}}}(s),function aE(i){for(let s=_n(i);null!==s;s=ni(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Wi(l)&&pd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&qh(i,s),!p)if(_){const A=i.contentCheckHooks;null!==A&&va(s,A)}else{const A=i.contentHooks;null!==A&&Ki(s,A,1),xo(s,1)}!function CD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Pi(~c);else{const p=c,_=a[++l],E=a[++l];Dl(_,p),E(2,s[p])}}}finally{Pi(-1)}}(i,s);const E=i.components;null!==E&&function cg(i,s){for(let a=0;a<s.length;a++)uE(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Kl(2,I,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&va(s,A)}else{const A=i.viewHooks;null!==A&&Ki(s,A,2),xo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Co(s[3],-1))}finally{Mo()}}function X0(i,s,a,l){const c=s[10],p=!fa(),_=zs(s);try{p&&!_&&c.begin&&c.begin(),_&&fd(i,s,l),pd(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function Ky(i,s,a,l,c){const p=jn(),_=2&l;try{Pi(-1),_&&s.length>20&&Vh(i,s,20,fa()),a(l,c)}finally{Pi(p)}}function hg(i,s,a){!da()||(function AD(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Cn(a,s),nr(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const I=i.data[E],A=Si(I);A&&MD(s,a,I);const S=Lo(s,i,E,a);nr(S,s),null!==_&&oE(0,E-c,S,I,0,_),A&&(Jn(a.index,s)[8]=S)}}(i,s,a,Qn(a,s)),128==(128&a.flags)&&function Kh(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function pu(){return lt.lFrame.currentDirectiveIndex}();try{Pi(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];ga(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&t_(A,S)}}finally{Pi(-1),ga(E)}}(i,s,a))}function Yy(i,s,a=Qn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function fg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=gd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function gd(i,s,a,l,c,p,_,E,I,A){const S=20+l,k=S+c,V=function Qy(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:It);return a}(S,k),K="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function pg(i,s,a,l){const c=Dg(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Qh(i).push(l,c.length-1))}function eE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Zh(i,s,a,l){let c=!1;if(da()){const p=function iE(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];q0(a,_.selectors,!1)&&(c||(c=[]),Xn(Cn(a,s),i,_.type),Si(_)?(n_(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,sE(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=ql(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=Mn(a.mergedAttrs,k.hostAttrs),zl(i,a,s,A,k),SD(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function tE(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===p||rg(s)?null:_g(k,p);_.push(V),E=eE(k,A,E),I=eE(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function yg(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Ne(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Mn(a.mergedAttrs,a.attrs),c}function mg(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function rE(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function t_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function n_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function SD(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Si(s)&&(a[""]=i)}}function sE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function zl(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=dr(c.type)),_=new gu(p,Si(c),null);i.blueprint[l]=_,a[l]=_,mg(i,s,0,l,ql(i,a,c.hostVars,It),c)}function MD(i,s,a){const l=Qn(s,i),c=fg(a),p=i[10],_=yd(i,Gl(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Zo(i,s,a,l,c,p){const _=Qn(i,s);!function La(i,s,a,l,c,p,_){if(null==p)Jt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?de(p):_(p,l||"",c);Jt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function oE(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function _g(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function md(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function uE(i,s){const a=Jn(s,i);if(Wi(a)){const l=a[1];80&a[2]?pd(l,a,l.template,a[8]):a[5]>0&&Wl(a)}}function Wl(i){for(let l=_n(i);null!==l;l=ni(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];pd(_,p,_.template,p[8])}else p[5]>0&&Wl(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Jn(a[l],i);Wi(c)&&c[5]>0&&Wl(c)}}function vg(i,s){const a=Jn(s,i),l=a[1];(function lE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),fd(l,a,a[8])}function yd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Eg(i){for(;i;){i[2]|=64;const s=Ze(i);if(dl(i)&&!s)return i;i=s}return null}function Yh(i,s,a){const l=s[10];l.begin&&l.begin();try{pd(i,s,i.template,a)}catch(c){throw i_(s,c),c}finally{l.end&&l.end()}}function wg(i){!function Zl(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=od(a),c=l[1];X0(c,l,c.template,a)}}(i[8])}function Kl(i,s,a){ya(0),s(i,a)}const ND=(()=>Promise.resolve(null))();function Dg(i){return i[7]||(i[7]=[])}function Qh(i){return i.cleanup||(i.cleanup=[])}function i_(i,s){const a=i[9],l=a?a.get(ad,null):null;l&&l.handleError(s)}function s_(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function Ko(i,s,a){const l=ys(s,i);!function ld(i,s,a){Jt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function bg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=ce(c,E):2==p&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Yl=new an("INJECTOR",-1);class Bu{get(s,a=jo){if(a===jo){const l=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw l.name="NullInjectorError",l}return a}}const Xh=new an("Set Injector scope."),ef={},a_={};let ju;function Tg(){return void 0===ju&&(ju=new Bu),ju}function $u(i,s=null,a=null,l){const c=u_(i,s,a,l);return c._resolveInjectorDefTypes(),c}function u_(i,s=null,a=null,l){return new OD(i,a,s||Tg(),l)}class OD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Kr(a,E=>this.processProvider(E,s,a)),Kr([s],E=>this.processInjectorType(E,[],p)),this.records.set(Yl,Ba(void 0,this));const _=this.records.get(Xh);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=jo,l=dt.Default){this.assertNotDestroyed();const c=te(this),p=wn(void 0);try{if(!(l&dt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function kD(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(s)&&Mt(s);E=I&&this.injectableDefInScope(I)?Ba(Va(s),ef):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&dt.Self?Tg():this.parent).get(s,a=l&dt.Optional&&a===jo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[io]=_[io]||[]).unshift(ie(s)),c)throw _;return function Gn(i,s,a,l){const c=i[io];throw s[M]&&c.unshift(s[M]),i.message=function Ji(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ie(s);if(Array.isArray(s))c=s.map(ie).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[io]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{wn(p),te(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ie(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(s,a,l){if(!(s=X(s)))return!1;let c=wr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=wr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{Kr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:K}=S[k];Kr(K,ye=>this.processProvider(ye,V,K||L))}}this.injectorDefTypes.add(_);const I=dr(_)||(()=>new _);this.records.set(_,Ba(I,ef));const A=c.providers;if(null!=A&&!E){const S=s;Kr(A,k=>this.processProvider(k,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=_d(s=X(s))?s:X(s&&s.provide);const p=function Ag(i,s,a){return l_(i)?Ba(void 0,i.useValue):Ba(tf(i),ef)}(s);if(_d(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Ba(void 0,ef,!0),_.factory=()=>Pt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===ef&&(a.value=a_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function rf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Va(i){const s=Mt(i),a=null!==s?s.factory:dr(i);if(null!==a)return a;if(i instanceof an)throw new Ne(204,!1);if(i instanceof Function)return function Ua(i){const s=i.length;if(s>0)throw function no(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Ne(204,!1);const a=function Lr(i){const s=i&&(i[Ii]||i[Vr]);if(s){const a=function sr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function tf(i,s,a){let l;if(_d(i)){const c=X(i);return dr(c)||Va(c)}if(l_(i))l=()=>X(i.useValue);else if(function Sg(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Pt(i.deps||[]));else if(function Tn(i){return!(!i||!i.useExisting)}(i))l=()=>Le(X(i.useExisting));else{const c=X(i&&(i.useClass||i.provide));if(!function nf(i){return!!i.deps}(i))return dr(c)||Va(c);l=()=>new c(...Pt(i.deps))}return l}function Ba(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function l_(i){return null!==i&&"object"==typeof i&&F in i}function _d(i){return"function"==typeof i}let xs=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return $u({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return $u({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=jo,i.NULL=new Bu,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>Le(Yl)}),i.__NG_ELEMENT_ID__=-1,i})();function p_(i,s){Bc(od(i)[1],on())}function Jl(i){let s=function wd(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Si(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ne(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Ln(i.inputs),_.declaredInputs=Ln(i.declaredInputs),_.outputs=Ln(i.outputs);const E=c.hostBindings;E&&$D(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&wE(i,I),A&&jD(i,A),ae(i.inputs,c.inputs),ae(i.declaredInputs,c.declaredInputs),ae(i.outputs,c.outputs),Si(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Jl&&(a=!1)}}s=Object.getPrototypeOf(s)}!function BD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Mn(c.hostAttrs,a=Mn(a,c.hostAttrs))}}(l)}function Ln(i){return i===ur?{}:i===L?[]:i}function wE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function jD(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function $D(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let uf=null;function Xl(){if(!uf){const i=Nt.Symbol;if(i&&i.iterator)uf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(uf=l)}}}return uf}function Id(i){return!!g_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xl()in i)}function g_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Fr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function lf(i,s,a,l){const c=Ae();return Fr(c,_s(),s)&&(Tt(),Zo(gn(),c,i,s,a,l)),lf}function I_(i,s,a,l,c,p,_,E){const I=Ae(),A=Tt(),S=i+20,k=A.firstCreatePass?function is(i,s,a,l,c,p,_,E,I){const A=s.consts,S=Uu(s,i,4,_||null,hi(A,E));Zh(s,a,S,hi(A,I)),Bc(s,S);const k=S.tViews=gd(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,p,_):A.data[S];Hr(k,!1);const V=I[11].createComment("");eg(A,I,V,k),nr(V,I),yd(I,I[S]=md(V,I,V,k)),Ai(k)&&hg(A,I,k),null!=_&&Yy(I,k,E)}function ft(i,s=dt.Default){const a=Ae();return null===a?Le(i,s):ws(on(),a,X(i),s)}function b_(){throw new Error("invalid")}function qa(i,s,a){const l=Ae();return Fr(l,_s(),s)&&function ns(i,s,a,l,c,p,_,E){const I=Qn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(s_(i,a,S,l,c),bc(s)&&function Jy(i,s){const a=Jn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function TD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Jt(p)?p.setProperty(I,l,c):qr(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Tt(),gn(),l,i,s,l[11],a,!1),qa}function Ng(i,s,a,l,c){const _=c?"class":"style";s_(i,a,s.inputs[_],_,l)}function kt(i,s,a,l){const c=Ae(),p=Tt(),_=20+i,E=c[11],I=c[_]=cd(E,s,function Uc(){return lt.lFrame.currentNamespace}()),A=p.firstCreatePass?function hf(i,s,a,l,c,p,_){const E=s.consts,A=Uu(s,i,2,c,hi(E,p));return Zh(s,a,A,hi(E,_)),null!==A.attrs&&bg(A,A.attrs,!1),null!==A.mergedAttrs&&bg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];Hr(A,!0);const S=A.mergedAttrs;null!==S&&Xe(E,I,S);const k=A.classes;null!==k&&Oy(E,I,k);const V=A.styles;return null!==V&&$0(E,I,V),64!=(64&A.flags)&&eg(p,c,I,A),0===function lu(){return lt.lFrame.elementDepthCount}()&&nr(I,c),function ca(){lt.lFrame.elementDepthCount++}(),Ai(A)&&(hg(p,c,A),function dg(i,s,a){if(ou(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&Yy(c,A),kt}function Og(){let i=on();ha()?function wl(){lt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function _l(){lt.lFrame.elementDepthCount--}();const a=Tt();return a.firstCreatePass&&(Bc(a,i),ou(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function $c(i){return 0!=(16&i.flags)}(s)&&Ng(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ip(i){return 0!=(32&i.flags)}(s)&&Ng(a,s,Ae(),s.stylesWithoutHost,!1),Og}function Wn(i,s,a,l){return kt(i,s,a,l),Og(),Wn}function xn(){return Ae()}function Wa(i){return!!i&&"function"==typeof i.then}function Pg(i){return!!i&&"function"==typeof i.subscribe}const A_=Pg;function sc(i,s,a,l){const c=Ae(),p=Tt(),_=on();return function Td(i,s,a,l,c,p,_,E){const I=Ai(l),S=i.firstCreatePass&&Qh(i),k=s[8],V=Dg(s);let K=!0;if(3&l.type||E){const Pe=Qn(l,s),We=E?E(Pe):Pe,Se=V.length,ct=E?xt=>E(zt(xt[l.index])):l.index;if(Jt(a)){let xt=null;if(!E&&I&&(xt=function Za(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],I=c[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=p,xt.__ngLastListenerFn__=p,K=!1;else{p=kg(l,s,k,p,!1);const Kt=a.listen(We,c,p);V.push(p,Kt),S&&S.push(c,ct,Se,Se+1)}}else p=kg(l,s,k,p,!0),We.addEventListener(c,p,_),V.push(p),S&&S.push(c,ct,Se,_)}else p=kg(l,s,k,p,!1);const ye=l.outputs;let be;if(K&&null!==ye&&(be=ye[c])){const Pe=be.length;if(Pe)for(let We=0;We<Pe;We+=2){const ji=s[be[We]][be[We+1]].subscribe(p),wc=V.length;V.push(p,ji),S&&S.push(c,l.index,wc,-(wc+1))}}}(p,c,c[11],_,i,s,!!a,l),sc}function Ad(i,s,a,l){try{return!1!==a(l)}catch(c){return i_(i,c),!1}}function kg(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?Jn(i.index,s):s;0==(32&s[2])&&Eg(E);let I=Ad(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)I=Ad(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function $e(i=1){return function Oi(i){return(lt.lFrame.contextLView=function ph(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function x_(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?lo(p):Fa(p),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];tC(i[E],s)&&(I=!0,i[E+1]=l?pr(S):Py(S)),E=l?lo(S):Fa(S)}I&&(i[a+1]=l?Py(p):pr(p))}function tC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Cs(i,s)>=0}function Md(i,s){return function fo(i,s,a,l){const c=Ae(),p=Tt(),_=function fi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function UE(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[jn()],_=function Ju(i,s){return s>=i.expandoStartIndex}(i,a);(function HE(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function yf(i,s,a,l){const c=function ma(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Kn(a=Gg(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Gg(c,i,s,a,l),null===p){let I=function $g(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Fa(l))return i[lo(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Gg(null,i,s,I[1],l),I=Kn(I,s.attrs,l),function Hg(i,s,a,l){i[lo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function BE(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Kn(l,i[p].hostAttrs,a);return Kn(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function Ug(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=lo(_),I=Fa(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Cs(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=lo(i[E+1]);i[l+1]=Vu(V,E),0!==V&&(i[V+1]=fr(i[V+1],l)),i[E+1]=function yD(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Vu(E,0),0!==E&&(i[E+1]=fr(i[E+1],l)),E=l;else i[l+1]=Vu(I,0),0===E?E=l:i[I+1]=fr(i[I+1],l),I=l;A&&(i[l+1]=Py(i[l+1])),x_(i,S,l,!0),x_(i,S,l,!1),function pf(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Cs(p,s)>=0&&(a[l+1]=pr(a[l+1]))}(s,S,i,l,p),_=Vu(E,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==It&&Fr(c,_,s)&&function P_(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];qg(function Uh(i){return 1==(1&i)}(A)?$E(I,s,a,c,Fa(A),_):void 0)||(qg(p)||function og(i){return 2==(2&i)}(A)&&(p=$E(I,null,a,c,E,_)),function fD(i,s,a,l,c){const p=Jt(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:T.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=T.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,ys(jn(),a),c,p))}(p,p.data[jn()],c,c[11],i,c[_+1]=function oC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ie(Go(i)))),i}(s,a),l,_)}(i,s,null,!0),Md}function Gg(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=Kn(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Kn(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hn(i,_,!!a||s[++p]))}return void 0===i?null:i}function $E(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let V=a[c+1];V===It&&(V=k?L:void 0);let K=k?ba(V,l):S===l?V:void 0;if(A&&!qg(K)&&(K=ba(I,l)),qg(K)&&(E=K,_))return E;const ye=i[c+1];c=_?lo(ye):Fa(ye)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=ba(I,l))}return E}function qg(i){return void 0!==i}function Ya(i,s=""){const a=Ae(),l=Tt(),c=i+20,p=l.firstCreatePass?Uu(l,c,1,s,null):l.data[c],_=a[c]=function ud(i,s){return Jt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);eg(l,a,_,p),Hr(p,!1)}function Xu(i){return zg("",i,""),Xu}function zg(i,s,a){const l=Ae(),c=function Dd(i,s,a,l){return Fr(i,_s(),a)?s+de(a)+l:It}(l,i,s,a);return c!==It&&Ko(l,jn(),c),zg}const hn=void 0;var Qg=["en",[["a","p"],["AM","PM"],hn],[["AM","PM"],hn,hn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hn,"{1} 'at' {0}",hn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Yg(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Nd={};function q_(i){const s=function nw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Od(s);if(a)return a;const l=s.split("-")[0];if(a=Od(l),a)return a;if("en"===l)return Qg;throw new Error(`Missing locale data for the locale "${i}".`)}function z_(i){return q_(i)[pt.PluralCase]}function Od(i){return i in Nd||(Nd[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),Nd[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const kd="en-US";let Qa=kd;function le(i,s,a,l,c){if(i=X(i),Array.isArray(i))for(let p=0;p<i.length;p++)le(i[p],s,a,l,c);else{const p=Tt(),_=Ae();let E=_d(i)?i:X(i.provide),I=tf(i);const A=on(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(_d(i)||!i.multi){const K=new gu(I,c,ft),ye=rv(E,s,c?S:S+V,k);-1===ye?(Xn(Cn(A,_),p,E),Bd(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[ye]=K,_[ye]=K)}else{const K=rv(E,s,S+V,k),ye=rv(E,s,S,S+V),be=K>=0&&a[K],Pe=ye>=0&&a[ye];if(c&&!Pe||!c&&!be){Xn(Cn(A,_),p,E);const We=function pc(i,s,a,l,c){const p=new gu(i,a,ft);return p.multi=[],p.index=s,p.componentProviders=0,Ls(p,c,l&&!a),p}(c?fc:Sf,a.length,c,l,I);!c&&Pe&&(a[ye].providerFactory=We),Bd(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(We),_.push(We)}else Bd(p,i,K>-1?K:ye,Ls(a[c?ye:K],I,!c&&l));!c&&l&&Pe&&a[ye].componentProviders++}}}function Bd(i,s,a,l){const c=_d(s),p=function PD(i){return!!i.useClass}(s);if(c||p){const I=(p?X(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function Ls(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function rv(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Sf(i,s,a,l){return iv(this.multi,[])}function fc(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Lo(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),iv(c,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],iv(c,p);return p}function iv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function sv(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Iw(i,s,a){const l=Tt();if(l.firstCreatePass){const c=Si(i);le(a,l.data,l.blueprint,c,!0),le(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class av{}class uv{resolveComponentFactory(s){throw function Ar(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let go=(()=>{class i{}return i.NULL=new uv,i})();function Cw(){return jd(on(),Ae())}function jd(i,s){return new $d(Qn(i,s))}let $d=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Cw,i})();function rm(i){return i instanceof $d?i.nativeElement:i}class rl{}let Gd=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function bw(){const i=Ae(),a=Jn(on().index,i);return function Mf(i){return i[11]}(Rr(a)?a:i)}(),i})(),lv=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class im{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const cv=new im("13.2.7"),dv={};function xf(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(zt(p)),Ti(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&xf(I[1],I,A,l)}const _=a.type;if(8&_)xf(i,s,a.child,l);else if(32&_){const E=q(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=B0(s,a);if(Array.isArray(E))l.push(...E);else{const I=Ze(s[16]);xf(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class qd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return xf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ti(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Dy(s,l),to(a,l))}this._attachedToViewContainer=!1}Cy(this._lView[1],this._lView)}onDestroy(s){pg(this._lView[1],this._lView,null,s)}markForCheck(){Eg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Yh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function r_(i,s,a){hu(!0);try{Yh(i,s,a)}finally{hu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lh(i,s){tg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=s}}class hv extends qd{constructor(s){super(s),this._view=s}detectChanges(){wg(this._view)}checkNoChanges(){!function Ig(i){hu(!0);try{wg(i)}finally{hu(!1)}}(this._view)}get context(){return null}}class zd extends go{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Pn(s);return new fv(a,this.ngModule)}}function il(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class fv extends av{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ka(i){return i.map(mD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return il(this.componentDef.inputs)}get outputs(){return il(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function Tw(i,s){return{get:(a,l,c)=>{const p=i.get(a,dv,c);return p!==dv||l===dv?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(rl,aa),E=p.get(lv,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Wh(i,s,a){if(Jt(i))return i.selectRootElement(s,a===Vt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):cd(_.createRenderer(null,this.componentDef),A,function jC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function af(i,s){return{components:[],scheduler:i||wy,clean:ND,playerHandler:s||null,flags:0}}(),K=gd(0,null,null,1,0,null,null,null,null,null),ye=Gl(null,K,V,k,null,null,_,I,E,p);let be,Pe;Ao(ye);try{const We=function of(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=Uu(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(bg(I,A,!0),null!==i&&(Xe(c,i,A),null!==I.classes&&Oy(c,i,I.classes),null!==I.styles&&$0(c,i,I.styles)));const S=l.createRenderer(i,s),k=Gl(a,fg(s),null,s.onPush?64:16,a[20],I,l,S,p||null,null);return _.firstCreatePass&&(Xn(Cn(I,a),_,s.type),n_(_,I),sE(I,a.length,1)),yd(a,k),a[20]=k}(S,this.componentDef,ye,_,I);if(S)if(l)Xe(I,S,["ng-version",cv.full]);else{const{attrs:Se,classes:ct}=function et(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!qn(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Se&&Xe(I,S,Se),ct&&ct.length>0&&Oy(I,S,ct.join(" "))}if(Pe=un(K,20),void 0!==a){const Se=Pe.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const xt=a[ct];Se.push(null!=xt?Array.from(xt):null)}}be=function Ed(i,s,a,l,c){const p=a[1],_=function gg(i,s,a){const l=on();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),zl(i,l,s,ql(i,s,1,null),a));const c=Lo(s,i,l.directiveStart,l);nr(c,s);const p=Qn(l,s);return p&&nr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=on();s.contentQueries(1,_,I.directiveStart)}const E=on();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Pi(E.index),mg(a[1],E,0,E.directiveStart,E.directiveEnd,s),t_(s,_)),_}(We,this.componentDef,ye,V,[p_]),fd(K,ye,null)}finally{Mo()}return new Rf(this.componentType,be,jd(Pe,ye),ye,Pe)}}class Rf extends class ov{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new hv(c),this.componentType=s}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Vs{}class pv{}const Wd=new Map;class Nf extends Vs{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new zd(this);const l=kn(s);this._bootstrapComponents=es(l.bootstrap),this._r3Injector=u_(s,a,[{provide:Vs,useValue:this},{provide:go,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=xs.THROW_IF_NOT_FOUND,l=dt.Default){return s===xs||s===Vs||s===Yl?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Zd extends pv{constructor(s){super(),this.moduleType=s,null!==kn(s)&&function om(i){const s=new Set;!function a(l){const c=kn(l,!0),p=c.id;null!==p&&(function sm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(p,Wd.get(p),l),Wd.set(p,l));const _=es(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Nf(this.moduleType,s)}}function Ei(i,s,a,l){return yc(Ae(),Dn(),i,s,a,l)}function yc(i,s,a,l,c,p){const _=s+a;return Fr(i,_,c)?function Rs(i,s,a){return i[s]=a}(i,_+1,p?l.call(p,c):l(c)):function Of(i,s){const a=i[s];return a===It?void 0:a}(i,_+1)}function _v(i,s){const a=Tt();let l;const c=i+20;a.firstCreatePass?(l=function HC(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=dr(l.type)),_=wn(ft);try{const E=pi(!1),I=p();return pi(E),function CE(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Ae(),c,I),I}finally{wn(_)}}function Rw(i,s,a){const l=i+20,c=Ae(),p=function Ri(i,s){return i[s]}(c,l);return function Pf(i,s){return i[1].data[s].pure}(c,l)?yc(c,Dn(),s,p.transform,a,p):p.transform(a)}function dm(i){return s=>{setTimeout(i,void 0,s)}}const ui=class zC extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=dm(I),E&&(E=dm(E)),A&&(A=dm(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Q.w0&&s.add(S),S}};function kf(){return this._results[Xl()]()}class hm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xl(),l=hm.prototype;l[a]||(l[a]=kf)}get changes(){return this._changes||(this._changes=new ui)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Zr(s);(this._changesDetected=!function xl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=vv,i})();const WC=Yd,Ow=class extends WC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Gl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),fd(a,l,s),new qd(l)}};function vv(){return Qd(on(),Ae())}function Qd(i,s){return 4&i.type?new Ow(s,i,jd(i,s)):null}let al=(()=>{class i{}return i.__NG_ELEMENT_ID__=fm,i})();function fm(){return kw(on(),Ae())}const Ev=al,Pw=class extends Ev{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return jd(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const s=vs(this._hostTNode,this._hostLView);if(Hc(s)){const a=en(s,this._hostLView),l=ki(s);return new Qs(a[1].data[l+8],a)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=pm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function eo(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const I=_?s:new fv(Pn(s)),A=l||this.parentInjector;if(!p&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Vs,null);V&&(p=V)}const S=I.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function la(i){return Ti(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new Pw(k,k[6],k[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function jl(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],Uo(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function Fu(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=My(p,_),I=l[11],A=Ui(I,_[7]);return null!==A&&function Fh(i,s,a,l,c,p){l[0]=c,l[6]=s,tg(i,l,a,1,c,p)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),Uo(gm(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=pm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Dy(this._lContainer,a);l&&(to(gm(this._lContainer),a),Cy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Dy(this._lContainer,a);return l&&null!=to(gm(this._lContainer),a)?new qd(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function pm(i){return i[8]}function gm(i){return i[8]||(i[8]=[])}function kw(i,s){let a;const l=s[i.index];if(Ti(l))a=l;else{let c;if(8&i.type)c=zt(l);else{const p=s[11];c=p.createComment("");const _=Qn(i,s);ts(p,Ui(p,_),c,function hD(i,s){return Jt(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=md(l,s,c,i),yd(s,a)}return new Pw(a,i,s)}class wv{constructor(s){this.queryList=s,this.matches=null}clone(){return new wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class mm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new mm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==vr(s,a).matches&&this.queries[a].setDirty()}}class Uw{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class ym{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new ym(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Iv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Iv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,Jd(a,p)),this.matchTNodeWithReadOption(s,a,Fo(a,s,p,!1,!1))}else l===Yd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Fo(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===$d||c===al||c===Yd&&4&a.type)this.addMatch(a.index,-2);else{const p=Fo(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Jd(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Dv(i,s,a,l){return-1===a?function Xd(i,s){return 11&i.type?jd(i,s):4&i.type?Qd(i,s):null}(s,i):-2===a?function _m(i,s,a){return a===$d?jd(s,i):a===Yd?Qd(s,i):a===al?kw(s,i):void 0}(i,s,l):Lo(i,i[1],a,s)}function Cv(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:Dv(s,p[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function vm(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=Cv(i,s,c,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&vm(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const K=k[V];vm(K[1],K,A,l)}}}}}return l}function bv(i){const s=Ae(),a=Tt(),l=Cl();ya(l+1);const c=vr(a,l);if(i.dirty&&zs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?vm(a,s,l,[]):Cv(a,s,c,l);i.reset(p,rm),i.notifyOnChanges()}return!0}return!1}function Em(i,s,a,l){const c=Tt();if(c.firstCreatePass){const p=on();(function $w(i,s,a){null===i.queries&&(i.queries=new ym),i.queries.track(new Iv(s,a))})(c,new Uw(s,a,l),p.index),function Av(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function jw(i,s,a){const l=new hm(4==(4&a));pg(i,s,l,l.destroy),null===s[19]&&(s[19]=new mm),s[19].queries.push(new wv(l))}(c,Ae(),a)}function Bw(){return function Tv(i,s){return i[19].queries[s].queryList}(Ae(),Cl())}function vr(i,s){return i.queries.getByIndex(s)}function xm(...i){}const Pv=new an("Application Initializer");let Rm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=xm,this.reject=xm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Wa(p))a.push(p);else if(A_(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Le(Pv,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const tI=new an("AppId",{providedIn:"root",factory:function Nm(){return`${zf()}${zf()}${zf()}`}});function zf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nI=new an("Platform Initializer"),Om=new an("Platform ID"),rI=new an("appBootstrapListener");let kv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();const Wf=new an("LocaleId",{providedIn:"root",factory:()=>at(Wf,dt.Optional|dt.SkipSelf)||function Fv(){return"undefined"!=typeof $localize&&$localize.locale||kd}()}),Lv=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nh{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let rh=(()=>{class i{compileModuleSync(a){return new Zd(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=es(kn(a).declarations).reduce((_,E)=>{const I=Pn(E);return I&&_.push(new fv(I)),_},[]);return new nh(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ib=(()=>Promise.resolve(0))();function Vv(i){"undefined"==typeof Zone?ib.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ss{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ui(!1),this.onMicrotaskEmpty=new ui(!1),this.onStable=new ui(!1),this.onError=new ui(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Uv(){let i=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ob(i){const s=()=>{!function sb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Qf(i),i.isCheckStableRunning=!0,Yf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Qf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return Pm(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),aI(i)}},onInvoke:(a,l,c,p,_,E,I)=>{try{return Pm(i),a.invoke(c,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),aI(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Qf(i),Yf(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,Bv,xm,xm);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Bv={};function Yf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Qf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Pm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function aI(i){i._nesting--,Yf(i)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ui,this.onMicrotaskEmpty=new ui,this.onStable=new ui,this.onError=new ui}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let lI=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Le(ss))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),jv=(()=>{class i{constructor(){this._applications=new Map,km.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return km.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();class cI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function dI(i){km=i}let mo,km=new cI;const Fm=new an("AllowMultipleToken");class $v{constructor(s,a){this.name=s,this.token=a}}function hI(i,s,a=[]){const l=`Platform: ${s}`,c=new an(l);return(p=[])=>{let _=Lm();if(!_||_.injector.get(Fm,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const E=a.concat(p).concat({provide:c,useValue:!0},{provide:Xh,useValue:"platform"});!function Hv(i){if(mo&&!mo.destroyed&&!mo.injector.get(Fm,!1))throw new Ne(400,"");mo=i.get(qv);const s=i.get(nI,null);s&&s.forEach(a=>a())}(xs.create({providers:E,name:l}))}return function Gv(i){const s=Lm();if(!s)throw new Ne(401,"");return s}()}}function Lm(){return mo&&!mo.destroyed?mo:null}let qv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function zv(i,s){let a;return a="noop"===i?new uI:("zone.js"===i?void 0:i)||new ss({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ss,useValue:E}];return E.run(()=>{const A=xs.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(ad,null);if(!k)throw new Ne(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{Wv(this._modules,S),V.unsubscribe()})}),function fI(i,s,a){try{const l=a();return Wa(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(Rm);return V.runInitializers(),V.donePromise.then(()=>(function fC(i){Rt(i,"Expected localeId to be defined"),"string"==typeof i&&(Qa=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Wf,kd)||kd),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=pI({},l);return function ab(i,s,a){const l=new Zd(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Jf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Le(xs))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();function pI(i,s){return Array.isArray(s)?s.reduce(pI,i):Object.assign(Object.assign({},i),s)}let Jf=(()=>{class i{constructor(a,l,c,p,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new P.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let c;c=a instanceof av?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function ub(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Vs),E=c.create(xs.NULL,[],l||c.selector,p),I=E.location.nativeElement,A=E.injector.get(lI,null),S=A&&E.injector.get(jv);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Wv(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(rI,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Le(ss),Le(xs),Le(ad),Le(go),Le(Rm))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Wv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Um=!0,gI=!1;function Zv(){return gI=!0,Um}function Kv(){if(gI)throw new Error("Cannot enable prod mode after platform setup.");Um=!1}let Qv=(()=>{class i{}return i.__NG_ELEMENT_ID__=cb,i})();function cb(i){return function Jv(i,s,a){if(bc(i)&&!a){const l=Jn(i.index,s);return new qd(l,l)}return 47&i.type?new qd(s[16],s):null}(on(),Ae(),16==(16&i))}class Hm{constructor(){}supports(s){return Id(s)}create(s){return new CI(s)}}const fb=(i,s)=>s;class CI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||fb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<n0(l,c,p)?a:l,E=n0(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const K=V<p.length?p[V]:p[V]=0,ye=K+V;S<=ye&&ye<A&&(p[V]=K+1)}p[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Id(s))throw new Ne(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function DE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Xl()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new bI(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gm),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class bI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Gm{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new pb,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function n0(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class tp{constructor(){}supports(s){return s instanceof Map||g_(s)}create(){return new gb}}class gb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||g_(s)))throw new Ne(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new mb(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class mb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TI(){return new r0([new Hm])}let r0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||TI()),deps:[[i,new Jr,new Yr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:TI}),i})();function qm(){return new zm([new tp])}let zm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||qm()),deps:[[i,new Jr,new Yr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ne(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:qm}),i})();const MI=hI(null,"core",[{provide:Om,useValue:"unknown"},{provide:qv,deps:[xs]},{provide:jv,deps:[]},{provide:kv,deps:[]}]);let u0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Le(Jf))},i.\u0275mod=Ir({type:i}),i.\u0275inj=Ht({}),i})()},3942:(Je,Ee,O)=>{O.d(Ee,{Z:()=>Ne});var f=O(2090),Q=O(4859),P=O(9681),oe=O(1877);class ne{constructor(de,Ce){this._delegate=de,this.firebase=Ce,(0,P._addComponent)(de,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(de,Ce=P._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(de);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Ge=Ke.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ce})}_removeServiceInstance(de,Ce=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ce)}_addComponent(de){(0,P._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,P._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const Ue=function ie(Ue){const de={},Ce={__esModule:!0,initializeApp:function Te(Be,B={}){const _e=P.initializeApp(Be,B);if((0,f.r3)(de,_e.name))return de[_e.name];const W=new Ue(_e,Ce);return de[_e.name]=W,W},app:Ke,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const B=Be.name,_e=B.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const W=(re=Ke())=>{if("function"!=typeof re[_e])throw ae.create("invalid-app-argument",{appName:B});return re[_e]()};void 0!==Be.serviceProps&&(0,f.ZB)(W,Be.serviceProps),Ce[_e]=W,Ue.prototype[_e]=function(...re){return this._getService.bind(this,B).apply(this,Be.multipleInstances?re:[])}}return"PUBLIC"===Be.type?Ce[_e]:null},removeApp:function Ge(Be){delete de[Be]},useAsService:function je(Be,B){return"serverAuth"===B?null:B},modularAPIs:P}};function Ke(Be){if(!(0,f.r3)(de,Be=Be||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Be});return de[Be]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function ve(){return Object.keys(de).map(Be=>de[Be])}}),Ke.App=Ue,Ce}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function de(Ce){(0,f.ZB)(Ue,Ce)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ue}(),U=new oe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;!function Me(Ue){(0,P.registerVersion)("@firebase/app-compat","0.1.25",Ue)}()},9681:(Je,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Ii,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>qt,_apps:()=>Wt,_clearComponents:()=>Gi,_components:()=>En,_getProvider:()=>Ht,_registerComponent:()=>Er,_removeServiceInstance:()=>Mt,deleteApp:()=>dt,getApp:()=>Vr,getApps:()=>Di,initializeApp:()=>cs,onLog:()=>wn,registerVersion:()=>pn,setLogLevel:()=>Us});var f=O(5861),Q=O(4859),P=O(1877),oe=O(2090),ne=O(8766);class fe{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function ae($){const Y=$.getComponent();return"VERSION"===(null==Y?void 0:Y.type)}(Re)){const Qe=Re.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Re=>Re).join(" ")}}const ie="@firebase/app",j=new P.Yd("@firebase/app"),Rt="[DEFAULT]",Ye={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,En=new Map;function Yt($,Y){try{$.container.addComponent(Y)}catch(Re){j.debug(`Component ${Y.name} failed to register with FirebaseApp ${$.name}`,Re)}}function qt($,Y){$.container.addOrOverwriteComponent(Y)}function Er($){const Y=$.name;if(En.has(Y))return j.debug(`There were multiple attempts to register component ${Y}.`),!1;En.set(Y,$);for(const Re of Wt.values())Yt(Re,$);return!0}function Ht($,Y){const Re=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),$.container.getProvider(Y)}function Mt($,Y,Re=Rt){Ht($,Y).clearInstance(Re)}function Gi(){En.clear()}const sr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wr{constructor(Y,Re,Qe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const Ii="9.8.1";function cs($,Y={}){"object"!=typeof Y&&(Y={name:Y});const Re=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},Y),Qe=Re.name;if("string"!=typeof Qe||!Qe)throw sr.create("bad-app-name",{appName:String(Qe)});const ut=Wt.get(Qe);if(ut){if((0,oe.vZ)($,ut.options)&&(0,oe.vZ)(Re,ut.config))return ut;throw sr.create("duplicate-app",{appName:Qe})}const vt=new Q.H0(Qe);for(const yt of En.values())vt.addComponent(yt);const rn=new wr($,Re,vt);return Wt.set(Qe,rn),rn}function Vr($=Rt){const Y=Wt.get($);if(!Y)throw sr.create("no-app",{appName:$});return Y}function Di(){return Array.from(Wt.values())}function dt($){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*($){const Y=$.name;Wt.has(Y)&&(Wt.delete(Y),yield Promise.all($.container.getProviders().map(Re=>Re.delete())),$.isDeleted=!0)})).apply(this,arguments)}function pn($,Y,Re){var Qe;let ut=null!==(Qe=Ye[$])&&void 0!==Qe?Qe:$;Re&&(ut+=`-${Re}`);const vt=ut.match(/\s|\//),rn=Y.match(/\s|\//);if(vt||rn){const yt=[`Unable to register library "${ut}" with version "${Y}":`];return vt&&yt.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),vt&&rn&&yt.push("and"),rn&&yt.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void j.warn(yt.join(" "))}Er(new Q.wA(`${ut}-version`,()=>({library:ut,version:Y}),"VERSION"))}function wn($,Y){if(null!==$&&"function"!=typeof $)throw sr.create("invalid-log-argument");(0,P.Am)($,Y)}function Us($){(0,P.Ub)($)}const An="firebase-heartbeat-store";let ci=null;function yo(){return ci||(ci=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(An)}}).catch($=>{throw sr.create("storage-open",{originalErrorMessage:$.message})})),ci}function rt(){return(rt=(0,f.Z)(function*($){try{return(yield yo()).transaction(An).objectStore(An).get(jr($))}catch(Y){throw sr.create("storage-get",{originalErrorMessage:Y.message})}})).apply(this,arguments)}function gt($,Y){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*($,Y){try{const Qe=(yield yo()).transaction(An,"readwrite");return yield Qe.objectStore(An).put(Y,jr($)),Qe.done}catch(Re){throw sr.create("storage-set",{originalErrorMessage:Re.message})}})).apply(this,arguments)}function jr($){return`${$.name}!${$.options.appId}`}class ar{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new H(Re),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var Y=this;return(0,f.Z)(function*(){const Qe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=ur();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Y._heartbeatsCache.heartbeats.some(vt=>vt.date===ut))return Y._heartbeatsCache.heartbeats.push({date:ut,agent:Qe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(vt=>{const rn=new Date(vt.date).valueOf();return Date.now()-rn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,f.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Re=ur(),{heartbeatsToSend:Qe,unsentEntries:ut}=function L($,Y=1024){const Re=[];let Qe=$.slice();for(const ut of $){const vt=Re.find(rn=>rn.agent===ut.agent);if(vt){if(vt.dates.push(ut.date),G(Re)>Y){vt.dates.pop();break}}else if(Re.push({agent:ut.agent,dates:[ut.date]}),G(Re)>Y){Re.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Re,unsentEntries:Qe}}(Y._heartbeatsCache.heartbeats),vt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Qe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Re,ut.length>0?(Y._heartbeatsCache.heartbeats=ut,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),vt})()}}function ur(){return(new Date).toISOString().substring(0,10)}class H{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,f.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Vt($){return rt.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Re=this;return(0,f.Z)(function*(){var Qe;if(yield Re._canUseIndexedDBPromise){const vt=yield Re.read();return gt(Re.app,{lastSentHeartbeatDate:null!==(Qe=Y.lastSentHeartbeatDate)&&void 0!==Qe?Qe:vt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Re=this;return(0,f.Z)(function*(){var Qe;if(yield Re._canUseIndexedDBPromise){const vt=yield Re.read();return gt(Re.app,{lastSentHeartbeatDate:null!==(Qe=Y.lastSentHeartbeatDate)&&void 0!==Qe?Qe:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...Y.heartbeats]})}})()}}function G($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}!function De($){Er(new Q.wA("platform-logger",Y=>new fe(Y),"PRIVATE")),Er(new Q.wA("heartbeat",Y=>new ar(Y),"PRIVATE")),pn(ie,"0.7.24",$),pn(ie,"0.7.24","esm2017"),pn("fire-js","")}("")},4859:(Je,Ee,O)=>{O.d(Ee,{wA:()=>P,H0:()=>ie});var f=O(5861),Q=O(2090);class P{constructor(j,U,X){this.name=j,this.instanceFactory=U,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class ne{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const X=new Q.BH;if(this.instancesDeferred.set(U,X),this.isInitialized(U)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:U});He&&X.resolve(He)}catch(He){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const X=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),He=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(He)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ae(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(U){}for(const[U,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(U);try{const Me=this.getOrInitializeService({instanceIdentifier:He});X.resolve(Me)}catch(Me){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...U.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,X=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:U});for(const[Me,Ne]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Ne.resolve(He);return He}onInit(j,U){var X;const He=this.normalizeInstanceIdentifier(U),Me=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;Me.add(j),this.onInitCallbacks.set(He,Me);const Ne=this.instances.get(He);return Ne&&j(Ne,He),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,U){const X=this.onInitCallbacks.get(U);if(X)for(const He of X)try{He(j,U)}catch(Me){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let X=this.instances.get(j);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===oe?void 0:ce),options:U}),this.instances.set(j,X),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(X,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,X)}catch(He){}var ce;return X||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ne(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,Ee,O)=>{O.d(Ee,{in:()=>Q,Yd:()=>ae,Ub:()=>ie,Am:()=>ce});const f=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},oe=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},fe=(j,U,...X)=>{if(U<j.logLevel)return;const He=(new Date).toISOString(),Me=ne[U];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Me](`[${He}]  ${j.name}:`,...X)};class ae{constructor(U){this.name=U,this._logLevel=oe,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Q))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...U),this._logHandler(this,Q.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...U),this._logHandler(this,Q.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...U),this._logHandler(this,Q.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...U),this._logHandler(this,Q.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...U),this._logHandler(this,Q.ERROR,...U)}}function ie(j){f.forEach(U=>{U.setLogLevel(j)})}function ce(j,U){for(const X of f){let He=null;U&&U.level&&(He=P[U.level]),X.userLogHandler=null===j?null:(Me,Ne,...Ue)=>{const de=Ue.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(Ge){return null}}).filter(Ce=>Ce).join(" ");Ne>=(null!=He?He:Me.logLevel)&&j({level:Q[Ne].toLowerCase(),message:de,args:Ue,type:Me.name})}}}},8766:(Je,Ee,O)=>{O.d(Ee,{Lj:()=>Te,X3:()=>Ke});var f=O(5861);let P,oe;const ae=new WeakMap,ie=new WeakMap,ce=new WeakMap,j=new WeakMap,U=new WeakMap;let Me={get(B,_e,W){if(B instanceof IDBTransaction){if("done"===_e)return ie.get(B);if("objectStoreNames"===_e)return B.objectStoreNames||ce.get(B);if("store"===_e)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return Ce(B[_e])},set:(B,_e,W)=>(B[_e]=W,!0),has:(B,_e)=>B instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in B};function de(B){return"function"==typeof B?function Ue(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(..._e){return B.apply(Ge(this),_e),Ce(ae.get(this))}:function(..._e){return Ce(B.apply(Ge(this),_e))}:function(_e,...W){const re=B.call(Ge(this),_e,...W);return ce.set(re,_e.sort?_e.sort():[_e]),Ce(re)}}(B):(B instanceof IDBTransaction&&function He(B){if(ie.has(B))return;const _e=new Promise((W,re)=>{const J=()=>{B.removeEventListener("complete",me),B.removeEventListener("error",se),B.removeEventListener("abort",se)},me=()=>{W(),J()},se=()=>{re(B.error||new DOMException("AbortError","AbortError")),J()};B.addEventListener("complete",me),B.addEventListener("error",se),B.addEventListener("abort",se)});ie.set(B,_e)}(B),((B,_e)=>_e.some(W=>B instanceof W))(B,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Me):B)}function Ce(B){if(B instanceof IDBRequest)return function X(B){const _e=new Promise((W,re)=>{const J=()=>{B.removeEventListener("success",me),B.removeEventListener("error",se)},me=()=>{W(Ce(B.result)),J()},se=()=>{re(B.error),J()};B.addEventListener("success",me),B.addEventListener("error",se)});return _e.then(W=>{W instanceof IDBCursor&&ae.set(W,B)}).catch(()=>{}),U.set(_e,B),_e}(B);if(j.has(B))return j.get(B);const _e=de(B);return _e!==B&&(j.set(B,_e),U.set(_e,B)),_e}const Ge=B=>U.get(B);function Ke(B,_e,{blocked:W,upgrade:re,blocking:J,terminated:me}={}){const se=indexedDB.open(B,_e),Oe=Ce(se);return re&&se.addEventListener("upgradeneeded",st=>{re(Ce(se.result),st.oldVersion,st.newVersion,Ce(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),Oe.then(st=>{me&&st.addEventListener("close",()=>me()),J&&st.addEventListener("versionchange",()=>J())}).catch(()=>{}),Oe}function Te(B,{blocked:_e}={}){const W=indexedDB.deleteDatabase(B);return _e&&W.addEventListener("blocked",()=>_e()),Ce(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],je=new Map;function Be(B,_e){if(!(B instanceof IDBDatabase)||_e in B||"string"!=typeof _e)return;if(je.get(_e))return je.get(_e);const W=_e.replace(/FromIndex$/,""),re=_e!==W,J=Ie.includes(W);if(!(W in(re?IDBIndex:IDBObjectStore).prototype)||!J&&!ve.includes(W))return;const me=function(){var se=(0,f.Z)(function*(Oe,...st){const Lt=this.transaction(Oe,J?"readwrite":"readonly");let Rt=Lt.store;return re&&(Rt=Rt.index(st.shift())),(yield Promise.all([Rt[W](...st),J&&Lt.done]))[0]});return function(st){return se.apply(this,arguments)}}();return je.set(_e,me),me}!function Ne(B){Me=B(Me)}(B=>LM(FM({},B),{get:(_e,W,re)=>Be(_e,W)||B.get(_e,W,re),has:(_e,W)=>!!Be(_e,W)||B.has(_e,W)}))},5861:(Je,Ee,O)=>{function f(P,oe,ne,fe,ae,ie,ce){try{var j=P[ie](ce),U=j.value}catch(X){return void ne(X)}j.done?oe(U):Promise.resolve(U).then(fe,ae)}function Q(P){return function(){var oe=this,ne=arguments;return new Promise(function(fe,ae){var ie=P.apply(oe,ne);function ce(U){f(ie,fe,ae,ce,j,"next",U)}function j(U){f(ie,fe,ae,ce,j,"throw",U)}ce(void 0)})}}O.d(Ee,{Z:()=>Q})}},Je=>{Je(Je.s=3485)}]);